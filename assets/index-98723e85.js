import{_ as $a}from"./ToolBreadcrumbs-5f41bc48.js";import{U as ae,a as ns,r as xe,o as Ha,z as je,A as Vi,m as ce,B as Ee,G as as,E as $e,F as _i,C as ke}from"./index-51c4f481.js";import{c as wi}from"./_commonjs-dynamic-modules-302442b1.js";import{j as Wa,i as qi,n as Va}from"./VSheet-64ccf2d2.js";import{V as os,a as qa}from"./VSelect-c4381dfb.js";import"./delay-61075896.js";import"./catalog-aa46acc5.js";import"./scopeId-b672533e.js";import"./VTextField-a1d624fc.js";import"./VSelectionControl-8574afd9.js";var br={},Ga={get exports(){return br},set exports(r){br=r}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(r,t){(function(e){r.exports=e()})(function(){return function e(i,n,s){function a(u,d){if(!n[u]){if(!i[u]){var h=typeof wi=="function"&&wi;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var p=n[u]={exports:{}};i[u][0].call(p.exports,function(g){var f=i[u][1][g];return a(f||g)},p,p.exports,e,i,n,s)}return n[u].exports}for(var o=typeof wi=="function"&&wi,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(e,i,n){var s=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var u,d,h,m,p,g,f,y=[],b=0,w=l.length,k=w,T=s.getTypeOf(l)!=="string";b<l.length;)k=w-b,h=T?(u=l[b++],d=b<w?l[b++]:0,b<w?l[b++]:0):(u=l.charCodeAt(b++),d=b<w?l.charCodeAt(b++):0,b<w?l.charCodeAt(b++):0),m=u>>2,p=(3&u)<<4|d>>4,g=1<k?(15&d)<<2|h>>6:64,f=2<k?63&h:64,y.push(o.charAt(m)+o.charAt(p)+o.charAt(g)+o.charAt(f));return y.join("")},n.decode=function(l){var u,d,h,m,p,g,f=0,y=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var w,k=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&k--,l.charAt(l.length-2)===o.charAt(64)&&k--,k%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=a.uint8array?new Uint8Array(0|k):new Array(0|k);f<l.length;)u=o.indexOf(l.charAt(f++))<<2|(m=o.indexOf(l.charAt(f++)))>>4,d=(15&m)<<4|(p=o.indexOf(l.charAt(f++)))>>2,h=(3&p)<<6|(g=o.indexOf(l.charAt(f++))),w[y++]=u,p!==64&&(w[y++]=d),g!==64&&(w[y++]=h);return w}},{"./support":30,"./utils":32}],2:[function(e,i,n){var s=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),l=e("./stream/DataLengthProbe");function u(d,h,m,p,g){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=p,this.compressedContent=g}u.prototype={getContentWorker:function(){var d=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},i.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,i,n){var s=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,i,n){var s=e("./utils"),a=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();i.exports=function(o,l){return o!==void 0&&o.length?s.getTypeOf(o)!=="string"?function(u,d,h,m){var p=a,g=m+h;u^=-1;for(var f=m;f<g;f++)u=u>>>8^p[255&(u^d[f])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var p=a,g=m+h;u^=-1;for(var f=m;f<g;f++)u=u>>>8^p[255&(u^d.charCodeAt(f))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(e,i,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,i,n){var s=null;s=typeof Promise<"u"?Promise:e("lie"),i.exports={Promise:s}},{lie:37}],7:[function(e,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=e("pako"),o=e("./utils"),l=e("./stream/GenericWorker"),u=s?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}n.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},n.compressWorker=function(h){return new d("Deflate",h)},n.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,i,n){function s(p,g){var f,y="";for(f=0;f<g;f++)y+=String.fromCharCode(255&p),p>>>=8;return y}function a(p,g,f,y,b,w){var k,T,x=p.file,F=p.compression,A=w!==u.utf8encode,N=o.transformTo("string",w(x.name)),O=o.transformTo("string",u.utf8encode(x.name)),L=x.comment,K=o.transformTo("string",w(L)),E=o.transformTo("string",u.utf8encode(L)),z=O.length!==x.name.length,v=E.length!==L.length,U="",J="",$="",it=x.dir,W=x.date,et={crc32:0,compressedSize:0,uncompressedSize:0};g&&!f||(et.crc32=p.crc32,et.compressedSize=p.compressedSize,et.uncompressedSize=p.uncompressedSize);var B=0;g&&(B|=8),A||!z&&!v||(B|=2048);var I=0,Q=0;it&&(I|=16),b==="UNIX"?(Q=798,I|=function(G,ct){var ft=G;return G||(ft=ct?16893:33204),(65535&ft)<<16}(x.unixPermissions,it)):(Q=20,I|=function(G){return 63&(G||0)}(x.dosPermissions)),k=W.getUTCHours(),k<<=6,k|=W.getUTCMinutes(),k<<=5,k|=W.getUTCSeconds()/2,T=W.getUTCFullYear()-1980,T<<=4,T|=W.getUTCMonth()+1,T<<=5,T|=W.getUTCDate(),z&&(J=s(1,1)+s(d(N),4)+O,U+="up"+s(J.length,2)+J),v&&($=s(1,1)+s(d(K),4)+E,U+="uc"+s($.length,2)+$);var X="";return X+=`
\0`,X+=s(B,2),X+=F.magic,X+=s(k,2),X+=s(T,2),X+=s(et.crc32,4),X+=s(et.compressedSize,4),X+=s(et.uncompressedSize,4),X+=s(N.length,2),X+=s(U.length,2),{fileRecord:h.LOCAL_FILE_HEADER+X+N+U,dirRecord:h.CENTRAL_FILE_HEADER+s(Q,2)+X+s(K.length,2)+"\0\0\0\0"+s(I,4)+s(y,4)+N+U+K}}var o=e("../utils"),l=e("../stream/GenericWorker"),u=e("../utf8"),d=e("../crc32"),h=e("../signature");function m(p,g,f,y){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=f,this.encodeFileName=y,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(p){var g=p.meta.percent||0,f=this.entriesCount,y=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:f?(g+100*(f-y-1))/f:100}}))},m.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var g=this.streamFiles&&!p.file.dir;if(g){var f=a(p,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:f.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(p){this.accumulate=!1;var g=this.streamFiles&&!p.file.dir,f=a(p,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(f.dirRecord),g)this.push({data:function(y){return h.DATA_DESCRIPTOR+s(y.crc32,4)+s(y.compressedSize,4)+s(y.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:f.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var p=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var f=this.bytesWritten-p,y=function(b,w,k,T,x){var F=o.transformTo("string",x(T));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(b,2)+s(b,2)+s(w,4)+s(k,4)+s(F.length,2)+F}(this.dirRecords.length,f,p,this.zipComment,this.encodeFileName);this.push({data:y,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(p){this._sources.push(p);var g=this;return p.on("data",function(f){g.processChunk(f)}),p.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),p.on("error",function(f){g.error(f)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(p){var g=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var f=0;f<g.length;f++)try{g[f].error(p)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,g=0;g<p.length;g++)p[g].lock()},i.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,i,n){var s=e("../compressions"),a=e("./ZipFileWorker");n.generateWorker=function(o,l,u){var d=new a(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,p){h++;var g=function(w,k){var T=w||k,x=s[T];if(!x)throw new Error(T+" is not a valid compression method !");return x}(p.options.compression,l.compression),f=p.options.compressionOptions||l.compressionOptions||{},y=p.dir,b=p.date;p._compressWorker(g,f).withStreamInfo("file",{name:m,dir:y,date:b,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,i,n){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=e("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,i,n){var s=e("./utils"),a=e("./external"),o=e("./utf8"),l=e("./zipEntries"),u=e("./stream/Crc32Probe"),d=e("./nodejsUtils");function h(m){return new a.Promise(function(p,g){var f=m.decompressed.getContentWorker().pipe(new u);f.on("error",function(y){g(y)}).on("end",function(){f.streamInfo.crc32!==m.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}i.exports=function(m,p){var g=this;return p=s.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",m,!0,p.optimizedBinaryString,p.base64).then(function(f){var y=new l(p);return y.load(f),y}).then(function(f){var y=[a.Promise.resolve(f)],b=f.files;if(p.checkCRC32)for(var w=0;w<b.length;w++)y.push(h(b[w]));return a.Promise.all(y)}).then(function(f){for(var y=f.shift(),b=y.files,w=0;w<b.length;w++){var k=b[w],T=k.fileNameStr,x=s.resolve(k.fileNameStr);g.file(x,k.decompressed,{binary:!0,optimizedBinaryString:!0,date:k.date,dir:k.dir,comment:k.fileCommentStr.length?k.fileCommentStr:null,unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions,createFolders:p.createFolders}),k.dir||(g.file(x).unsafeOriginalName=T)}return y.zipComment.length&&(g.comment=y.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,i,n){var s=e("../utils"),a=e("../stream/GenericWorker");function o(l,u){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,i,n){var s=e("readable-stream").Readable;function a(o,l,u){s.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}e("../utils").inherits(a,s),a.prototype._read=function(){this._helper.resume()},i.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,i,n){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(e,i,n){function s(x,F,A){var N,O=o.getTypeOf(F),L=o.extend(A||{},d);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(x=b(x)),L.createFolders&&(N=y(x))&&w.call(this,N,!0);var K=O==="string"&&L.binary===!1&&L.base64===!1;A&&A.binary!==void 0||(L.binary=!K),(F instanceof h&&F.uncompressedSize===0||L.dir||!F||F.length===0)&&(L.base64=!1,L.binary=!0,F="",L.compression="STORE",O="string");var E=null;E=F instanceof h||F instanceof l?F:g.isNode&&g.isStream(F)?new f(x,F):o.prepareContent(x,F,L.binary,L.optimizedBinaryString,L.base64);var z=new m(x,E,L);this.files[x]=z}var a=e("./utf8"),o=e("./utils"),l=e("./stream/GenericWorker"),u=e("./stream/StreamHelper"),d=e("./defaults"),h=e("./compressedObject"),m=e("./zipObject"),p=e("./generate"),g=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),y=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var F=x.lastIndexOf("/");return 0<F?x.substring(0,F):""},b=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},w=function(x,F){return F=F!==void 0?F:d.createFolders,x=b(x),this.files[x]||s.call(this,x,null,{dir:!0,createFolders:F}),this.files[x]};function k(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var F,A,N;for(F in this.files)N=this.files[F],(A=F.slice(this.root.length,F.length))&&F.slice(0,this.root.length)===this.root&&x(A,N)},filter:function(x){var F=[];return this.forEach(function(A,N){x(A,N)&&F.push(N)}),F},file:function(x,F,A){if(arguments.length!==1)return x=this.root+x,s.call(this,x,F,A),this;if(k(x)){var N=x;return this.filter(function(L,K){return!K.dir&&N.test(L)})}var O=this.files[this.root+x];return O&&!O.dir?O:null},folder:function(x){if(!x)return this;if(k(x))return this.filter(function(O,L){return L.dir&&x.test(O)});var F=this.root+x,A=w.call(this,F),N=this.clone();return N.root=A.name,N},remove:function(x){x=this.root+x;var F=this.files[x];if(F||(x.slice(-1)!=="/"&&(x+="/"),F=this.files[x]),F&&!F.dir)delete this.files[x];else for(var A=this.filter(function(O,L){return L.name.slice(0,x.length)===x}),N=0;N<A.length;N++)delete this.files[A[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var F,A={};try{if((A=o.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");o.checkSupport(A.type),A.platform!=="darwin"&&A.platform!=="freebsd"&&A.platform!=="linux"&&A.platform!=="sunos"||(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var N=A.comment||this.comment||"";F=p.generateWorker(this,A,N)}catch(O){(F=new l("error")).error(O)}return new u(F,A.type||"string",A.mimeType)},generateAsync:function(x,F){return this.generateInternalStream(x).accumulate(F)},generateNodeStream:function(x,F){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(F)}};i.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,i,n){i.exports=e("stream")},{stream:void 0}],17:[function(e,i,n){var s=e("./DataReader");function a(o){s.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,i,n){var s=e("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},i.exports=a},{"../utils":32}],19:[function(e,i,n){var s=e("./Uint8ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,i,n){var s=e("./DataReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,i,n){var s=e("./ArrayReader");function a(o){s.call(this,o)}e("../utils").inherits(a,s),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},i.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,i,n){var s=e("../utils"),a=e("../support"),o=e("./ArrayReader"),l=e("./StringReader"),u=e("./NodeBufferReader"),d=e("./Uint8ArrayReader");i.exports=function(h){var m=s.getTypeOf(h);return s.checkSupport(m),m!=="string"||a.uint8array?m==="nodebuffer"?new u(h):a.uint8array?new d(s.transformTo("uint8array",h)):new o(s.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,i,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,i,n){var s=e("./GenericWorker"),a=e("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},i.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,i,n){var s=e("./GenericWorker"),a=e("../crc32");function o(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,s),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},i.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,i,n){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}a.prototype.processChunk.call(this,l)},i.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,i,n){var s=e("../utils"),a=e("./GenericWorker");function o(l){a.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=s.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}s.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,i,n){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},i.exports=s},{}],29:[function(e,i,n){var s=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),l=e("../base64"),u=e("../support"),d=e("../external"),h=null;if(u.nodestream)try{h=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(g,f){return new d.Promise(function(y,b){var w=[],k=g._internalType,T=g._outputType,x=g._mimeType;g.on("data",function(F,A){w.push(F),f&&f(A)}).on("error",function(F){w=[],b(F)}).on("end",function(){try{var F=function(A,N,O){switch(A){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),O);case"base64":return l.encode(N);default:return s.transformTo(A,N)}}(T,function(A,N){var O,L=0,K=null,E=0;for(O=0;O<N.length;O++)E+=N[O].length;switch(A){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(K=new Uint8Array(E),O=0;O<N.length;O++)K.set(N[O],L),L+=N[O].length;return K;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+A+"'")}}(k,w),x);y(F)}catch(A){b(A)}w=[]}).resume()})}function p(g,f,y){var b=f;switch(f){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=f,this._mimeType=y,s.checkSupport(b),this._worker=g.pipe(new a(b)),g.lock()}catch(w){this._worker=new o("error"),this._worker.error(w)}}p.prototype={accumulate:function(g){return m(this,g)},on:function(g,f){var y=this;return g==="data"?this._worker.on(g,function(b){f.call(y,b.data,b.meta)}):this._worker.on(g,function(){s.delay(f,arguments,y)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},g)}},i.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,i,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var s=new ArrayBuffer(0);try{n.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(s),n.blob=a.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,i,n){for(var s=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),l=e("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}n.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(g){var f,y,b,w,k,T=g.length,x=0;for(w=0;w<T;w++)(64512&(y=g.charCodeAt(w)))==55296&&w+1<T&&(64512&(b=g.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),w++),x+=y<128?1:y<2048?2:y<65536?3:4;for(f=a.uint8array?new Uint8Array(x):new Array(x),w=k=0;k<x;w++)(64512&(y=g.charCodeAt(w)))==55296&&w+1<T&&(64512&(b=g.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(b-56320),w++),y<128?f[k++]=y:(y<2048?f[k++]=192|y>>>6:(y<65536?f[k++]=224|y>>>12:(f[k++]=240|y>>>18,f[k++]=128|y>>>12&63),f[k++]=128|y>>>6&63),f[k++]=128|63&y);return f}(p)},n.utf8decode=function(p){return a.nodebuffer?s.transformTo("nodebuffer",p).toString("utf-8"):function(g){var f,y,b,w,k=g.length,T=new Array(2*k);for(f=y=0;f<k;)if((b=g[f++])<128)T[y++]=b;else if(4<(w=u[b]))T[y++]=65533,f+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&f<k;)b=b<<6|63&g[f++],w--;1<w?T[y++]=65533:b<65536?T[y++]=b:(b-=65536,T[y++]=55296|b>>10&1023,T[y++]=56320|1023&b)}return T.length!==y&&(T.subarray?T=T.subarray(0,y):T.length=y),s.applyFromCharCode(T)}(p=s.transformTo(a.uint8array?"uint8array":"array",p))},s.inherits(h,l),h.prototype.processChunk=function(p){var g=s.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var f=g;(g=new Uint8Array(f.length+this.leftOver.length)).set(this.leftOver,0),g.set(f,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var y=function(w,k){var T;for((k=k||w.length)>w.length&&(k=w.length),T=k-1;0<=T&&(192&w[T])==128;)T--;return T<0||T===0?k:T+u[w[T]]>k?T:k}(g),b=g;y!==g.length&&(a.uint8array?(b=g.subarray(0,y),this.leftOver=g.subarray(y,g.length)):(b=g.slice(0,y),this.leftOver=g.slice(y,g.length))),this.push({data:n.utf8decode(b),meta:p.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=h,s.inherits(m,l),m.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,i,n){var s=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),l=e("./external");function u(f){return f}function d(f,y){for(var b=0;b<f.length;++b)y[b]=255&f.charCodeAt(b);return y}e("setimmediate"),n.newBlob=function(f,y){n.checkSupport("blob");try{return new Blob([f],{type:y})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(f),b.getBlob(y)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(f,y,b){var w=[],k=0,T=f.length;if(T<=b)return String.fromCharCode.apply(null,f);for(;k<T;)y==="array"||y==="nodebuffer"?w.push(String.fromCharCode.apply(null,f.slice(k,Math.min(k+b,T)))):w.push(String.fromCharCode.apply(null,f.subarray(k,Math.min(k+b,T)))),k+=b;return w.join("")},stringifyByChar:function(f){for(var y="",b=0;b<f.length;b++)y+=String.fromCharCode(f[b]);return y},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(f){var y=65536,b=n.getTypeOf(f),w=!0;if(b==="uint8array"?w=h.applyCanBeUsed.uint8array:b==="nodebuffer"&&(w=h.applyCanBeUsed.nodebuffer),w)for(;1<y;)try{return h.stringifyByChunk(f,b,y)}catch{y=Math.floor(y/2)}return h.stringifyByChar(f)}function p(f,y){for(var b=0;b<f.length;b++)y[b]=f[b];return y}n.applyFromCharCode=m;var g={};g.string={string:u,array:function(f){return d(f,new Array(f.length))},arraybuffer:function(f){return g.string.uint8array(f).buffer},uint8array:function(f){return d(f,new Uint8Array(f.length))},nodebuffer:function(f){return d(f,o.allocBuffer(f.length))}},g.array={string:m,array:u,arraybuffer:function(f){return new Uint8Array(f).buffer},uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(f)}},g.arraybuffer={string:function(f){return m(new Uint8Array(f))},array:function(f){return p(new Uint8Array(f),new Array(f.byteLength))},arraybuffer:u,uint8array:function(f){return new Uint8Array(f)},nodebuffer:function(f){return o.newBufferFrom(new Uint8Array(f))}},g.uint8array={string:m,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return f.buffer},uint8array:u,nodebuffer:function(f){return o.newBufferFrom(f)}},g.nodebuffer={string:m,array:function(f){return p(f,new Array(f.length))},arraybuffer:function(f){return g.nodebuffer.uint8array(f).buffer},uint8array:function(f){return p(f,new Uint8Array(f.length))},nodebuffer:u},n.transformTo=function(f,y){if(y=y||"",!f)return y;n.checkSupport(f);var b=n.getTypeOf(y);return g[b][f](y)},n.resolve=function(f){for(var y=f.split("/"),b=[],w=0;w<y.length;w++){var k=y[w];k==="."||k===""&&w!==0&&w!==y.length-1||(k===".."?b.pop():b.push(k))}return b.join("/")},n.getTypeOf=function(f){return typeof f=="string"?"string":Object.prototype.toString.call(f)==="[object Array]"?"array":s.nodebuffer&&o.isBuffer(f)?"nodebuffer":s.uint8array&&f instanceof Uint8Array?"uint8array":s.arraybuffer&&f instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(f){if(!s[f.toLowerCase()])throw new Error(f+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(f){var y,b,w="";for(b=0;b<(f||"").length;b++)w+="\\x"+((y=f.charCodeAt(b))<16?"0":"")+y.toString(16).toUpperCase();return w},n.delay=function(f,y,b){setImmediate(function(){f.apply(b||null,y||[])})},n.inherits=function(f,y){function b(){}b.prototype=y.prototype,f.prototype=new b},n.extend=function(){var f,y,b={};for(f=0;f<arguments.length;f++)for(y in arguments[f])Object.prototype.hasOwnProperty.call(arguments[f],y)&&b[y]===void 0&&(b[y]=arguments[f][y]);return b},n.prepareContent=function(f,y,b,w,k){return l.Promise.resolve(y).then(function(T){return s.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new l.Promise(function(x,F){var A=new FileReader;A.onload=function(N){x(N.target.result)},A.onerror=function(N){F(N.target.error)},A.readAsArrayBuffer(T)}):T}).then(function(T){var x=n.getTypeOf(T);return x?(x==="arraybuffer"?T=n.transformTo("uint8array",T):x==="string"&&(k?T=a.decode(T):b&&w!==!0&&(T=function(F){return d(F,s.uint8array?new Uint8Array(F.length):new Array(F.length))}(T))),T):l.Promise.reject(new Error("Can't read the data of '"+f+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,i,n){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),l=e("./zipEntry"),u=e("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(m)+", expected "+a.pretty(h)+")")}},isSignature:function(h,m){var p=this.reader.index;this.reader.setIndex(h);var g=this.reader.readString(4)===m;return this.reader.setIndex(p),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",p=a.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,p,g=this.zip64EndOfCentralSize-44;0<g;)h=this.reader.readInt(2),m=this.reader.readInt(4),p=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var g=m-p;if(0<g)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,i,n){var s=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),l=e("./crc32"),u=e("./utf8"),d=e("./compressions"),h=e("./support");function m(p,g){this.options=p,this.loadOptions=g}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var g,f;if(p.skip(22),this.fileNameLength=p.readInt(2),f=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(f),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(y){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===y)return d[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var g=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(g),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var g,f,y,b=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<b;)g=p.readInt(2),f=p.readInt(2),y=p.readData(f),this.extraFields[g]={id:g,length:f,value:y};p.setIndex(b)},handleUTF8:function(){var p=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var f=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(f)}var y=this.findExtraFieldUnicodeComment();if(y!==null)this.fileCommentStr=y;else{var b=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var g=s(p.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:u.utf8decode(g.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var g=s(p.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:u.utf8decode(g.readData(p.length-5))}return null}},i.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,i,n){function s(g,f,y){this.name=g,this.dir=y.dir,this.date=y.date,this.comment=y.comment,this.unixPermissions=y.unixPermissions,this.dosPermissions=y.dosPermissions,this._data=f,this._dataBinary=y.binary,this.options={compression:y.compression,compressionOptions:y.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),l=e("./utf8"),u=e("./compressedObject"),d=e("./stream/GenericWorker");s.prototype={internalStream:function(g){var f=null,y="string";try{if(!g)throw new Error("No output type specified.");var b=(y=g.toLowerCase())==="string"||y==="text";y!=="binarystring"&&y!=="text"||(y="string"),f=this._decompressWorker();var w=!this._dataBinary;w&&!b&&(f=f.pipe(new l.Utf8EncodeWorker)),!w&&b&&(f=f.pipe(new l.Utf8DecodeWorker))}catch(k){(f=new d("error")).error(k)}return new a(f,y,"")},async:function(g,f){return this.internalStream(g).accumulate(f)},nodeStream:function(g,f){return this.internalStream(g||"nodebuffer").toNodejsStream(f)},_compressWorker:function(g,f){if(this._data instanceof u&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var y=this._decompressWorker();return this._dataBinary||(y=y.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(y,g,f)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<h.length;p++)s.prototype[h[p]]=m;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,i,n){(function(s){var a,o,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,d=new l(g),h=s.document.createTextNode("");d.observe(h,{characterData:!0}),a=function(){h.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)a="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var f=s.document.createElement("script");f.onreadystatechange=function(){g(),f.onreadystatechange=null,f.parentNode.removeChild(f),f=null},s.document.documentElement.appendChild(f)}:function(){setTimeout(g,0)};else{var m=new s.MessageChannel;m.port1.onmessage=g,a=function(){m.port2.postMessage(0)}}var p=[];function g(){var f,y;o=!0;for(var b=p.length;b;){for(y=p,p=[],f=-1;++f<b;)y[f]();b=p.length}o=!1}i.exports=function(f){p.push(f)!==1||o||a()}}).call(this,typeof ae<"u"?ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,i,n){var s=e("immediate");function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==a&&f(this,b)}function m(b,w,k){this.promise=b,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}function p(b,w,k){s(function(){var T;try{T=w(k)}catch(x){return o.reject(b,x)}T===b?o.reject(b,new TypeError("Cannot resolve promise with itself")):o.resolve(b,T)})}function g(b){var w=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof w=="function")return function(){w.apply(b,arguments)}}function f(b,w){var k=!1;function T(A){k||(k=!0,o.reject(b,A))}function x(A){k||(k=!0,o.resolve(b,A))}var F=y(function(){w(x,T)});F.status==="error"&&T(F.value)}function y(b,w){var k={};try{k.value=b(w),k.status="success"}catch(T){k.status="error",k.value=T}return k}(i.exports=h).prototype.finally=function(b){if(typeof b!="function")return this;var w=this.constructor;return this.then(function(k){return w.resolve(b()).then(function(){return k})},function(k){return w.resolve(b()).then(function(){throw k})})},h.prototype.catch=function(b){return this.then(null,b)},h.prototype.then=function(b,w){if(typeof b!="function"&&this.state===u||typeof w!="function"&&this.state===l)return this;var k=new this.constructor(a);return this.state!==d?p(k,this.state===u?b:w,this.outcome):this.queue.push(new m(k,b,w)),k},m.prototype.callFulfilled=function(b){o.resolve(this.promise,b)},m.prototype.otherCallFulfilled=function(b){p(this.promise,this.onFulfilled,b)},m.prototype.callRejected=function(b){o.reject(this.promise,b)},m.prototype.otherCallRejected=function(b){p(this.promise,this.onRejected,b)},o.resolve=function(b,w){var k=y(g,w);if(k.status==="error")return o.reject(b,k.value);var T=k.value;if(T)f(b,T);else{b.state=u,b.outcome=w;for(var x=-1,F=b.queue.length;++x<F;)b.queue[x].callFulfilled(w)}return b},o.reject=function(b,w){b.state=l,b.outcome=w;for(var k=-1,T=b.queue.length;++k<T;)b.queue[k].callRejected(w);return b},h.resolve=function(b){return b instanceof this?b:o.resolve(new this(a),b)},h.reject=function(b){var w=new this(a);return o.reject(w,b)},h.all=function(b){var w=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=b.length,T=!1;if(!k)return this.resolve([]);for(var x=new Array(k),F=0,A=-1,N=new this(a);++A<k;)O(b[A],A);return N;function O(L,K){w.resolve(L).then(function(E){x[K]=E,++F!==k||T||(T=!0,o.resolve(N,x))},function(E){T||(T=!0,o.reject(N,E))})}},h.race=function(b){var w=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=b.length,T=!1;if(!k)return this.resolve([]);for(var x=-1,F=new this(a);++x<k;)A=b[x],w.resolve(A).then(function(N){T||(T=!0,o.resolve(F,N))},function(N){T||(T=!0,o.reject(F,N))});var A;return F}},{immediate:36}],38:[function(e,i,n){var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,i,n){var s=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/messages"),u=e("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,p=0,g=8;function f(b){if(!(this instanceof f))return new f(b);this.options=a.assign({level:m,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},b||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var k=s.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(k!==h)throw new Error(l[k]);if(w.header&&s.deflateSetHeader(this.strm,w.header),w.dictionary){var T;if(T=typeof w.dictionary=="string"?o.string2buf(w.dictionary):d.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(k=s.deflateSetDictionary(this.strm,T))!==h)throw new Error(l[k]);this._dict_set=!0}}function y(b,w){var k=new f(w);if(k.push(b,!0),k.err)throw k.msg||l[k.err];return k.result}f.prototype.push=function(b,w){var k,T,x=this.strm,F=this.options.chunkSize;if(this.ended)return!1;T=w===~~w?w:w===!0?4:0,typeof b=="string"?x.input=o.string2buf(b):d.call(b)==="[object ArrayBuffer]"?x.input=new Uint8Array(b):x.input=b,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new a.Buf8(F),x.next_out=0,x.avail_out=F),(k=s.deflate(x,T))!==1&&k!==h)return this.onEnd(k),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(x.output,x.next_out))):this.onData(a.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&k!==1);return T===4?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===h):T!==2||(this.onEnd(h),!(x.avail_out=0))},f.prototype.onData=function(b){this.chunks.push(b)},f.prototype.onEnd=function(b){b===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Deflate=f,n.deflate=y,n.deflateRaw=function(b,w){return(w=w||{}).raw=!0,y(b,w)},n.gzip=function(b,w){return(w=w||{}).gzip=!0,y(b,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,i,n){var s=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),d=e("./zlib/zstream"),h=e("./zlib/gzheader"),m=Object.prototype.toString;function p(f){if(!(this instanceof p))return new p(f);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},f||{});var y=this.options;y.raw&&0<=y.windowBits&&y.windowBits<16&&(y.windowBits=-y.windowBits,y.windowBits===0&&(y.windowBits=-15)),!(0<=y.windowBits&&y.windowBits<16)||f&&f.windowBits||(y.windowBits+=32),15<y.windowBits&&y.windowBits<48&&!(15&y.windowBits)&&(y.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=s.inflateInit2(this.strm,y.windowBits);if(b!==l.Z_OK)throw new Error(u[b]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}function g(f,y){var b=new p(y);if(b.push(f,!0),b.err)throw b.msg||u[b.err];return b.result}p.prototype.push=function(f,y){var b,w,k,T,x,F,A=this.strm,N=this.options.chunkSize,O=this.options.dictionary,L=!1;if(this.ended)return!1;w=y===~~y?y:y===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof f=="string"?A.input=o.binstring2buf(f):m.call(f)==="[object ArrayBuffer]"?A.input=new Uint8Array(f):A.input=f,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new a.Buf8(N),A.next_out=0,A.avail_out=N),(b=s.inflate(A,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&O&&(F=typeof O=="string"?o.string2buf(O):m.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,b=s.inflateSetDictionary(this.strm,F)),b===l.Z_BUF_ERROR&&L===!0&&(b=l.Z_OK,L=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);A.next_out&&(A.avail_out!==0&&b!==l.Z_STREAM_END&&(A.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(k=o.utf8border(A.output,A.next_out),T=A.next_out-k,x=o.buf2string(A.output,k),A.next_out=T,A.avail_out=N-T,T&&a.arraySet(A.output,A.output,k,T,0),this.onData(x)):this.onData(a.shrinkBuf(A.output,A.next_out)))),A.avail_in===0&&A.avail_out===0&&(L=!0)}while((0<A.avail_in||A.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(b=s.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(A.avail_out=0))},p.prototype.onData=function(f){this.chunks.push(f)},p.prototype.onEnd=function(f){f===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=f,this.msg=this.strm.msg},n.Inflate=p,n.inflate=g,n.inflateRaw=function(f,y){return(y=y||{}).raw=!0,g(f,y)},n.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,i,n){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},n.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var p=0;p<h;p++)l[m+p]=u[d+p]},flattenChunks:function(l){var u,d,h,m,p,g;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(g=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)p=l[u],g.set(p,m),m+=p.length;return g}},o={arraySet:function(l,u,d,h,m){for(var p=0;p<h;p++)l[m+p]=u[d+p]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(s)},{}],42:[function(e,i,n){var s=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,m));for(var p="",g=0;g<m;g++)p+=String.fromCharCode(h[g]);return p}l[254]=l[254]=1,n.string2buf=function(h){var m,p,g,f,y,b=h.length,w=0;for(f=0;f<b;f++)(64512&(p=h.charCodeAt(f)))==55296&&f+1<b&&(64512&(g=h.charCodeAt(f+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),f++),w+=p<128?1:p<2048?2:p<65536?3:4;for(m=new s.Buf8(w),f=y=0;y<w;f++)(64512&(p=h.charCodeAt(f)))==55296&&f+1<b&&(64512&(g=h.charCodeAt(f+1)))==56320&&(p=65536+(p-55296<<10)+(g-56320),f++),p<128?m[y++]=p:(p<2048?m[y++]=192|p>>>6:(p<65536?m[y++]=224|p>>>12:(m[y++]=240|p>>>18,m[y++]=128|p>>>12&63),m[y++]=128|p>>>6&63),m[y++]=128|63&p);return m},n.buf2binstring=function(h){return d(h,h.length)},n.binstring2buf=function(h){for(var m=new s.Buf8(h.length),p=0,g=m.length;p<g;p++)m[p]=h.charCodeAt(p);return m},n.buf2string=function(h,m){var p,g,f,y,b=m||h.length,w=new Array(2*b);for(p=g=0;p<b;)if((f=h[p++])<128)w[g++]=f;else if(4<(y=l[f]))w[g++]=65533,p+=y-1;else{for(f&=y===2?31:y===3?15:7;1<y&&p<b;)f=f<<6|63&h[p++],y--;1<y?w[g++]=65533:f<65536?w[g++]=f:(f-=65536,w[g++]=55296|f>>10&1023,w[g++]=56320|1023&f)}return d(w,g)},n.utf8border=function(h,m){var p;for((m=m||h.length)>h.length&&(m=h.length),p=m-1;0<=p&&(192&h[p])==128;)p--;return p<0||p===0?m:p+l[h[p]]>m?p:m}},{"./common":41}],43:[function(e,i,n){i.exports=function(s,a,o,l){for(var u=65535&s|0,d=s>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+a[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(e,i,n){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,i,n){var s=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();i.exports=function(a,o,l,u){var d=s,h=u+l;a^=-1;for(var m=u;m<h;m++)a=a>>>8^d[255&(a^o[m])];return-1^a}},{}],46:[function(e,i,n){var s,a=e("../utils/common"),o=e("./trees"),l=e("./adler32"),u=e("./crc32"),d=e("./messages"),h=0,m=4,p=0,g=-2,f=-1,y=4,b=2,w=8,k=9,T=286,x=30,F=19,A=2*T+1,N=15,O=3,L=258,K=L+O+1,E=42,z=113,v=1,U=2,J=3,$=4;function it(c,M){return c.msg=d[M],M}function W(c){return(c<<1)-(4<c?9:0)}function et(c){for(var M=c.length;0<=--M;)c[M]=0}function B(c){var M=c.state,R=M.pending;R>c.avail_out&&(R=c.avail_out),R!==0&&(a.arraySet(c.output,M.pending_buf,M.pending_out,R,c.next_out),c.next_out+=R,M.pending_out+=R,c.total_out+=R,c.avail_out-=R,M.pending-=R,M.pending===0&&(M.pending_out=0))}function I(c,M){o._tr_flush_block(c,0<=c.block_start?c.block_start:-1,c.strstart-c.block_start,M),c.block_start=c.strstart,B(c.strm)}function Q(c,M){c.pending_buf[c.pending++]=M}function X(c,M){c.pending_buf[c.pending++]=M>>>8&255,c.pending_buf[c.pending++]=255&M}function G(c,M){var R,C,S=c.max_chain_length,P=c.strstart,j=c.prev_length,H=c.nice_match,D=c.strstart>c.w_size-K?c.strstart-(c.w_size-K):0,V=c.window,Y=c.w_mask,q=c.prev,tt=c.strstart+L,ht=V[P+j-1],at=V[P+j];c.prev_length>=c.good_match&&(S>>=2),H>c.lookahead&&(H=c.lookahead);do if(V[(R=M)+j]===at&&V[R+j-1]===ht&&V[R]===V[P]&&V[++R]===V[P+1]){P+=2,R++;do;while(V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&V[++P]===V[++R]&&P<tt);if(C=L-(tt-P),P=tt-L,j<C){if(c.match_start=M,H<=(j=C))break;ht=V[P+j-1],at=V[P+j]}}while((M=q[M&Y])>D&&--S!=0);return j<=c.lookahead?j:c.lookahead}function ct(c){var M,R,C,S,P,j,H,D,V,Y,q=c.w_size;do{if(S=c.window_size-c.lookahead-c.strstart,c.strstart>=q+(q-K)){for(a.arraySet(c.window,c.window,q,q,0),c.match_start-=q,c.strstart-=q,c.block_start-=q,M=R=c.hash_size;C=c.head[--M],c.head[M]=q<=C?C-q:0,--R;);for(M=R=q;C=c.prev[--M],c.prev[M]=q<=C?C-q:0,--R;);S+=q}if(c.strm.avail_in===0)break;if(j=c.strm,H=c.window,D=c.strstart+c.lookahead,V=S,Y=void 0,Y=j.avail_in,V<Y&&(Y=V),R=Y===0?0:(j.avail_in-=Y,a.arraySet(H,j.input,j.next_in,Y,D),j.state.wrap===1?j.adler=l(j.adler,H,Y,D):j.state.wrap===2&&(j.adler=u(j.adler,H,Y,D)),j.next_in+=Y,j.total_in+=Y,Y),c.lookahead+=R,c.lookahead+c.insert>=O)for(P=c.strstart-c.insert,c.ins_h=c.window[P],c.ins_h=(c.ins_h<<c.hash_shift^c.window[P+1])&c.hash_mask;c.insert&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[P+O-1])&c.hash_mask,c.prev[P&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=P,P++,c.insert--,!(c.lookahead+c.insert<O)););}while(c.lookahead<K&&c.strm.avail_in!==0)}function ft(c,M){for(var R,C;;){if(c.lookahead<K){if(ct(c),c.lookahead<K&&M===h)return v;if(c.lookahead===0)break}if(R=0,c.lookahead>=O&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+O-1])&c.hash_mask,R=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),R!==0&&c.strstart-R<=c.w_size-K&&(c.match_length=G(c,R)),c.match_length>=O)if(C=o._tr_tally(c,c.strstart-c.match_start,c.match_length-O),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=O){for(c.match_length--;c.strstart++,c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+O-1])&c.hash_mask,R=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart,--c.match_length!=0;);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+1])&c.hash_mask;else C=o._tr_tally(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(C&&(I(c,!1),c.strm.avail_out===0))return v}return c.insert=c.strstart<O-1?c.strstart:O-1,M===m?(I(c,!0),c.strm.avail_out===0?J:$):c.last_lit&&(I(c,!1),c.strm.avail_out===0)?v:U}function nt(c,M){for(var R,C,S;;){if(c.lookahead<K){if(ct(c),c.lookahead<K&&M===h)return v;if(c.lookahead===0)break}if(R=0,c.lookahead>=O&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+O-1])&c.hash_mask,R=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=O-1,R!==0&&c.prev_length<c.max_lazy_match&&c.strstart-R<=c.w_size-K&&(c.match_length=G(c,R),c.match_length<=5&&(c.strategy===1||c.match_length===O&&4096<c.strstart-c.match_start)&&(c.match_length=O-1)),c.prev_length>=O&&c.match_length<=c.prev_length){for(S=c.strstart+c.lookahead-O,C=o._tr_tally(c,c.strstart-1-c.prev_match,c.prev_length-O),c.lookahead-=c.prev_length-1,c.prev_length-=2;++c.strstart<=S&&(c.ins_h=(c.ins_h<<c.hash_shift^c.window[c.strstart+O-1])&c.hash_mask,R=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),--c.prev_length!=0;);if(c.match_available=0,c.match_length=O-1,c.strstart++,C&&(I(c,!1),c.strm.avail_out===0))return v}else if(c.match_available){if((C=o._tr_tally(c,0,c.window[c.strstart-1]))&&I(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return v}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(C=o._tr_tally(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<O-1?c.strstart:O-1,M===m?(I(c,!0),c.strm.avail_out===0?J:$):c.last_lit&&(I(c,!1),c.strm.avail_out===0)?v:U}function ot(c,M,R,C,S){this.good_length=c,this.max_lazy=M,this.nice_length=R,this.max_chain=C,this.func=S}function wt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*A),this.dyn_dtree=new a.Buf16(2*(2*x+1)),this.bl_tree=new a.Buf16(2*(2*F+1)),et(this.dyn_ltree),et(this.dyn_dtree),et(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(N+1),this.heap=new a.Buf16(2*T+1),et(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*T+1),et(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function mt(c){var M;return c&&c.state?(c.total_in=c.total_out=0,c.data_type=b,(M=c.state).pending=0,M.pending_out=0,M.wrap<0&&(M.wrap=-M.wrap),M.status=M.wrap?E:z,c.adler=M.wrap===2?0:1,M.last_flush=h,o._tr_init(M),p):it(c,g)}function Wt(c){var M=mt(c);return M===p&&function(R){R.window_size=2*R.w_size,et(R.head),R.max_lazy_match=s[R.level].max_lazy,R.good_match=s[R.level].good_length,R.nice_match=s[R.level].nice_length,R.max_chain_length=s[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=O-1,R.match_available=0,R.ins_h=0}(c.state),M}function zt(c,M,R,C,S,P){if(!c)return g;var j=1;if(M===f&&(M=6),C<0?(j=0,C=-C):15<C&&(j=2,C-=16),S<1||k<S||R!==w||C<8||15<C||M<0||9<M||P<0||y<P)return it(c,g);C===8&&(C=9);var H=new wt;return(c.state=H).strm=c,H.wrap=j,H.gzhead=null,H.w_bits=C,H.w_size=1<<H.w_bits,H.w_mask=H.w_size-1,H.hash_bits=S+7,H.hash_size=1<<H.hash_bits,H.hash_mask=H.hash_size-1,H.hash_shift=~~((H.hash_bits+O-1)/O),H.window=new a.Buf8(2*H.w_size),H.head=new a.Buf16(H.hash_size),H.prev=new a.Buf16(H.w_size),H.lit_bufsize=1<<S+6,H.pending_buf_size=4*H.lit_bufsize,H.pending_buf=new a.Buf8(H.pending_buf_size),H.d_buf=1*H.lit_bufsize,H.l_buf=3*H.lit_bufsize,H.level=M,H.strategy=P,H.method=R,Wt(c)}s=[new ot(0,0,0,0,function(c,M){var R=65535;for(R>c.pending_buf_size-5&&(R=c.pending_buf_size-5);;){if(c.lookahead<=1){if(ct(c),c.lookahead===0&&M===h)return v;if(c.lookahead===0)break}c.strstart+=c.lookahead,c.lookahead=0;var C=c.block_start+R;if((c.strstart===0||c.strstart>=C)&&(c.lookahead=c.strstart-C,c.strstart=C,I(c,!1),c.strm.avail_out===0)||c.strstart-c.block_start>=c.w_size-K&&(I(c,!1),c.strm.avail_out===0))return v}return c.insert=0,M===m?(I(c,!0),c.strm.avail_out===0?J:$):(c.strstart>c.block_start&&(I(c,!1),c.strm.avail_out),v)}),new ot(4,4,8,4,ft),new ot(4,5,16,8,ft),new ot(4,6,32,32,ft),new ot(4,4,16,16,nt),new ot(8,16,32,32,nt),new ot(8,16,128,128,nt),new ot(8,32,128,256,nt),new ot(32,128,258,1024,nt),new ot(32,258,258,4096,nt)],n.deflateInit=function(c,M){return zt(c,M,w,15,8,0)},n.deflateInit2=zt,n.deflateReset=Wt,n.deflateResetKeep=mt,n.deflateSetHeader=function(c,M){return c&&c.state?c.state.wrap!==2?g:(c.state.gzhead=M,p):g},n.deflate=function(c,M){var R,C,S,P;if(!c||!c.state||5<M||M<0)return c?it(c,g):g;if(C=c.state,!c.output||!c.input&&c.avail_in!==0||C.status===666&&M!==m)return it(c,c.avail_out===0?-5:g);if(C.strm=c,R=C.last_flush,C.last_flush=M,C.status===E)if(C.wrap===2)c.adler=0,Q(C,31),Q(C,139),Q(C,8),C.gzhead?(Q(C,(C.gzhead.text?1:0)+(C.gzhead.hcrc?2:0)+(C.gzhead.extra?4:0)+(C.gzhead.name?8:0)+(C.gzhead.comment?16:0)),Q(C,255&C.gzhead.time),Q(C,C.gzhead.time>>8&255),Q(C,C.gzhead.time>>16&255),Q(C,C.gzhead.time>>24&255),Q(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Q(C,255&C.gzhead.os),C.gzhead.extra&&C.gzhead.extra.length&&(Q(C,255&C.gzhead.extra.length),Q(C,C.gzhead.extra.length>>8&255)),C.gzhead.hcrc&&(c.adler=u(c.adler,C.pending_buf,C.pending,0)),C.gzindex=0,C.status=69):(Q(C,0),Q(C,0),Q(C,0),Q(C,0),Q(C,0),Q(C,C.level===9?2:2<=C.strategy||C.level<2?4:0),Q(C,3),C.status=z);else{var j=w+(C.w_bits-8<<4)<<8;j|=(2<=C.strategy||C.level<2?0:C.level<6?1:C.level===6?2:3)<<6,C.strstart!==0&&(j|=32),j+=31-j%31,C.status=z,X(C,j),C.strstart!==0&&(X(C,c.adler>>>16),X(C,65535&c.adler)),c.adler=1}if(C.status===69)if(C.gzhead.extra){for(S=C.pending;C.gzindex<(65535&C.gzhead.extra.length)&&(C.pending!==C.pending_buf_size||(C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),B(c),S=C.pending,C.pending!==C.pending_buf_size));)Q(C,255&C.gzhead.extra[C.gzindex]),C.gzindex++;C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),C.gzindex===C.gzhead.extra.length&&(C.gzindex=0,C.status=73)}else C.status=73;if(C.status===73)if(C.gzhead.name){S=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),B(c),S=C.pending,C.pending===C.pending_buf_size)){P=1;break}P=C.gzindex<C.gzhead.name.length?255&C.gzhead.name.charCodeAt(C.gzindex++):0,Q(C,P)}while(P!==0);C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),P===0&&(C.gzindex=0,C.status=91)}else C.status=91;if(C.status===91)if(C.gzhead.comment){S=C.pending;do{if(C.pending===C.pending_buf_size&&(C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),B(c),S=C.pending,C.pending===C.pending_buf_size)){P=1;break}P=C.gzindex<C.gzhead.comment.length?255&C.gzhead.comment.charCodeAt(C.gzindex++):0,Q(C,P)}while(P!==0);C.gzhead.hcrc&&C.pending>S&&(c.adler=u(c.adler,C.pending_buf,C.pending-S,S)),P===0&&(C.status=103)}else C.status=103;if(C.status===103&&(C.gzhead.hcrc?(C.pending+2>C.pending_buf_size&&B(c),C.pending+2<=C.pending_buf_size&&(Q(C,255&c.adler),Q(C,c.adler>>8&255),c.adler=0,C.status=z)):C.status=z),C.pending!==0){if(B(c),c.avail_out===0)return C.last_flush=-1,p}else if(c.avail_in===0&&W(M)<=W(R)&&M!==m)return it(c,-5);if(C.status===666&&c.avail_in!==0)return it(c,-5);if(c.avail_in!==0||C.lookahead!==0||M!==h&&C.status!==666){var H=C.strategy===2?function(D,V){for(var Y;;){if(D.lookahead===0&&(ct(D),D.lookahead===0)){if(V===h)return v;break}if(D.match_length=0,Y=o._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,Y&&(I(D,!1),D.strm.avail_out===0))return v}return D.insert=0,V===m?(I(D,!0),D.strm.avail_out===0?J:$):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?v:U}(C,M):C.strategy===3?function(D,V){for(var Y,q,tt,ht,at=D.window;;){if(D.lookahead<=L){if(ct(D),D.lookahead<=L&&V===h)return v;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=O&&0<D.strstart&&(q=at[tt=D.strstart-1])===at[++tt]&&q===at[++tt]&&q===at[++tt]){ht=D.strstart+L;do;while(q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&q===at[++tt]&&tt<ht);D.match_length=L-(ht-tt),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=O?(Y=o._tr_tally(D,1,D.match_length-O),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(Y=o._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),Y&&(I(D,!1),D.strm.avail_out===0))return v}return D.insert=0,V===m?(I(D,!0),D.strm.avail_out===0?J:$):D.last_lit&&(I(D,!1),D.strm.avail_out===0)?v:U}(C,M):s[C.level].func(C,M);if(H!==J&&H!==$||(C.status=666),H===v||H===J)return c.avail_out===0&&(C.last_flush=-1),p;if(H===U&&(M===1?o._tr_align(C):M!==5&&(o._tr_stored_block(C,0,0,!1),M===3&&(et(C.head),C.lookahead===0&&(C.strstart=0,C.block_start=0,C.insert=0))),B(c),c.avail_out===0))return C.last_flush=-1,p}return M!==m?p:C.wrap<=0?1:(C.wrap===2?(Q(C,255&c.adler),Q(C,c.adler>>8&255),Q(C,c.adler>>16&255),Q(C,c.adler>>24&255),Q(C,255&c.total_in),Q(C,c.total_in>>8&255),Q(C,c.total_in>>16&255),Q(C,c.total_in>>24&255)):(X(C,c.adler>>>16),X(C,65535&c.adler)),B(c),0<C.wrap&&(C.wrap=-C.wrap),C.pending!==0?p:1)},n.deflateEnd=function(c){var M;return c&&c.state?(M=c.state.status)!==E&&M!==69&&M!==73&&M!==91&&M!==103&&M!==z&&M!==666?it(c,g):(c.state=null,M===z?it(c,-3):p):g},n.deflateSetDictionary=function(c,M){var R,C,S,P,j,H,D,V,Y=M.length;if(!c||!c.state||(P=(R=c.state).wrap)===2||P===1&&R.status!==E||R.lookahead)return g;for(P===1&&(c.adler=l(c.adler,M,Y,0)),R.wrap=0,Y>=R.w_size&&(P===0&&(et(R.head),R.strstart=0,R.block_start=0,R.insert=0),V=new a.Buf8(R.w_size),a.arraySet(V,M,Y-R.w_size,R.w_size,0),M=V,Y=R.w_size),j=c.avail_in,H=c.next_in,D=c.input,c.avail_in=Y,c.next_in=0,c.input=M,ct(R);R.lookahead>=O;){for(C=R.strstart,S=R.lookahead-(O-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[C+O-1])&R.hash_mask,R.prev[C&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=C,C++,--S;);R.strstart=C,R.lookahead=O-1,ct(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=O-1,R.match_available=0,c.next_in=H,c.input=D,c.avail_in=j,R.wrap=P,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,i,n){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,i,n){i.exports=function(s,a){var o,l,u,d,h,m,p,g,f,y,b,w,k,T,x,F,A,N,O,L,K,E,z,v,U;o=s.state,l=s.next_in,v=s.input,u=l+(s.avail_in-5),d=s.next_out,U=s.output,h=d-(a-s.avail_out),m=d+(s.avail_out-257),p=o.dmax,g=o.wsize,f=o.whave,y=o.wnext,b=o.window,w=o.hold,k=o.bits,T=o.lencode,x=o.distcode,F=(1<<o.lenbits)-1,A=(1<<o.distbits)-1;t:do{k<15&&(w+=v[l++]<<k,k+=8,w+=v[l++]<<k,k+=8),N=T[w&F];e:for(;;){if(w>>>=O=N>>>24,k-=O,(O=N>>>16&255)===0)U[d++]=65535&N;else{if(!(16&O)){if(!(64&O)){N=T[(65535&N)+(w&(1<<O)-1)];continue e}if(32&O){o.mode=12;break t}s.msg="invalid literal/length code",o.mode=30;break t}L=65535&N,(O&=15)&&(k<O&&(w+=v[l++]<<k,k+=8),L+=w&(1<<O)-1,w>>>=O,k-=O),k<15&&(w+=v[l++]<<k,k+=8,w+=v[l++]<<k,k+=8),N=x[w&A];i:for(;;){if(w>>>=O=N>>>24,k-=O,!(16&(O=N>>>16&255))){if(!(64&O)){N=x[(65535&N)+(w&(1<<O)-1)];continue i}s.msg="invalid distance code",o.mode=30;break t}if(K=65535&N,k<(O&=15)&&(w+=v[l++]<<k,(k+=8)<O&&(w+=v[l++]<<k,k+=8)),p<(K+=w&(1<<O)-1)){s.msg="invalid distance too far back",o.mode=30;break t}if(w>>>=O,k-=O,(O=d-h)<K){if(f<(O=K-O)&&o.sane){s.msg="invalid distance too far back",o.mode=30;break t}if(z=b,(E=0)===y){if(E+=g-O,O<L){for(L-=O;U[d++]=b[E++],--O;);E=d-K,z=U}}else if(y<O){if(E+=g+y-O,(O-=y)<L){for(L-=O;U[d++]=b[E++],--O;);if(E=0,y<L){for(L-=O=y;U[d++]=b[E++],--O;);E=d-K,z=U}}}else if(E+=y-O,O<L){for(L-=O;U[d++]=b[E++],--O;);E=d-K,z=U}for(;2<L;)U[d++]=z[E++],U[d++]=z[E++],U[d++]=z[E++],L-=3;L&&(U[d++]=z[E++],1<L&&(U[d++]=z[E++]))}else{for(E=d-K;U[d++]=U[E++],U[d++]=U[E++],U[d++]=U[E++],2<(L-=3););L&&(U[d++]=U[E++],1<L&&(U[d++]=U[E++]))}break}}break}}while(l<u&&d<m);l-=L=k>>3,w&=(1<<(k-=L<<3))-1,s.next_in=l,s.next_out=d,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=d<m?m-d+257:257-(d-m),o.hold=w,o.bits=k}},{}],49:[function(e,i,n){var s=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),l=e("./inffast"),u=e("./inftrees"),d=1,h=2,m=0,p=-2,g=1,f=852,y=592;function b(E){return(E>>>24&255)+(E>>>8&65280)+((65280&E)<<8)+((255&E)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function k(E){var z;return E&&E.state?(z=E.state,E.total_in=E.total_out=z.total=0,E.msg="",z.wrap&&(E.adler=1&z.wrap),z.mode=g,z.last=0,z.havedict=0,z.dmax=32768,z.head=null,z.hold=0,z.bits=0,z.lencode=z.lendyn=new s.Buf32(f),z.distcode=z.distdyn=new s.Buf32(y),z.sane=1,z.back=-1,m):p}function T(E){var z;return E&&E.state?((z=E.state).wsize=0,z.whave=0,z.wnext=0,k(E)):p}function x(E,z){var v,U;return E&&E.state?(U=E.state,z<0?(v=0,z=-z):(v=1+(z>>4),z<48&&(z&=15)),z&&(z<8||15<z)?p:(U.window!==null&&U.wbits!==z&&(U.window=null),U.wrap=v,U.wbits=z,T(E))):p}function F(E,z){var v,U;return E?(U=new w,(E.state=U).window=null,(v=x(E,z))!==m&&(E.state=null),v):p}var A,N,O=!0;function L(E){if(O){var z;for(A=new s.Buf32(512),N=new s.Buf32(32),z=0;z<144;)E.lens[z++]=8;for(;z<256;)E.lens[z++]=9;for(;z<280;)E.lens[z++]=7;for(;z<288;)E.lens[z++]=8;for(u(d,E.lens,0,288,A,0,E.work,{bits:9}),z=0;z<32;)E.lens[z++]=5;u(h,E.lens,0,32,N,0,E.work,{bits:5}),O=!1}E.lencode=A,E.lenbits=9,E.distcode=N,E.distbits=5}function K(E,z,v,U){var J,$=E.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new s.Buf8($.wsize)),U>=$.wsize?(s.arraySet($.window,z,v-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(U<(J=$.wsize-$.wnext)&&(J=U),s.arraySet($.window,z,v-U,J,$.wnext),(U-=J)?(s.arraySet($.window,z,v-U,U,0),$.wnext=U,$.whave=$.wsize):($.wnext+=J,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=J))),0}n.inflateReset=T,n.inflateReset2=x,n.inflateResetKeep=k,n.inflateInit=function(E){return F(E,15)},n.inflateInit2=F,n.inflate=function(E,z){var v,U,J,$,it,W,et,B,I,Q,X,G,ct,ft,nt,ot,wt,mt,Wt,zt,c,M,R,C,S=0,P=new s.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!E||!E.state||!E.output||!E.input&&E.avail_in!==0)return p;(v=E.state).mode===12&&(v.mode=13),it=E.next_out,J=E.output,et=E.avail_out,$=E.next_in,U=E.input,W=E.avail_in,B=v.hold,I=v.bits,Q=W,X=et,M=m;t:for(;;)switch(v.mode){case g:if(v.wrap===0){v.mode=13;break}for(;I<16;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(2&v.wrap&&B===35615){P[v.check=0]=255&B,P[1]=B>>>8&255,v.check=o(v.check,P,2,0),I=B=0,v.mode=2;break}if(v.flags=0,v.head&&(v.head.done=!1),!(1&v.wrap)||(((255&B)<<8)+(B>>8))%31){E.msg="incorrect header check",v.mode=30;break}if((15&B)!=8){E.msg="unknown compression method",v.mode=30;break}if(I-=4,c=8+(15&(B>>>=4)),v.wbits===0)v.wbits=c;else if(c>v.wbits){E.msg="invalid window size",v.mode=30;break}v.dmax=1<<c,E.adler=v.check=1,v.mode=512&B?10:12,I=B=0;break;case 2:for(;I<16;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(v.flags=B,(255&v.flags)!=8){E.msg="unknown compression method",v.mode=30;break}if(57344&v.flags){E.msg="unknown header flags set",v.mode=30;break}v.head&&(v.head.text=B>>8&1),512&v.flags&&(P[0]=255&B,P[1]=B>>>8&255,v.check=o(v.check,P,2,0)),I=B=0,v.mode=3;case 3:for(;I<32;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.head&&(v.head.time=B),512&v.flags&&(P[0]=255&B,P[1]=B>>>8&255,P[2]=B>>>16&255,P[3]=B>>>24&255,v.check=o(v.check,P,4,0)),I=B=0,v.mode=4;case 4:for(;I<16;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.head&&(v.head.xflags=255&B,v.head.os=B>>8),512&v.flags&&(P[0]=255&B,P[1]=B>>>8&255,v.check=o(v.check,P,2,0)),I=B=0,v.mode=5;case 5:if(1024&v.flags){for(;I<16;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.length=B,v.head&&(v.head.extra_len=B),512&v.flags&&(P[0]=255&B,P[1]=B>>>8&255,v.check=o(v.check,P,2,0)),I=B=0}else v.head&&(v.head.extra=null);v.mode=6;case 6:if(1024&v.flags&&(W<(G=v.length)&&(G=W),G&&(v.head&&(c=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),s.arraySet(v.head.extra,U,$,G,c)),512&v.flags&&(v.check=o(v.check,U,G,$)),W-=G,$+=G,v.length-=G),v.length))break t;v.length=0,v.mode=7;case 7:if(2048&v.flags){if(W===0)break t;for(G=0;c=U[$+G++],v.head&&c&&v.length<65536&&(v.head.name+=String.fromCharCode(c)),c&&G<W;);if(512&v.flags&&(v.check=o(v.check,U,G,$)),W-=G,$+=G,c)break t}else v.head&&(v.head.name=null);v.length=0,v.mode=8;case 8:if(4096&v.flags){if(W===0)break t;for(G=0;c=U[$+G++],v.head&&c&&v.length<65536&&(v.head.comment+=String.fromCharCode(c)),c&&G<W;);if(512&v.flags&&(v.check=o(v.check,U,G,$)),W-=G,$+=G,c)break t}else v.head&&(v.head.comment=null);v.mode=9;case 9:if(512&v.flags){for(;I<16;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(B!==(65535&v.check)){E.msg="header crc mismatch",v.mode=30;break}I=B=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),E.adler=v.check=0,v.mode=12;break;case 10:for(;I<32;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}E.adler=v.check=b(B),I=B=0,v.mode=11;case 11:if(v.havedict===0)return E.next_out=it,E.avail_out=et,E.next_in=$,E.avail_in=W,v.hold=B,v.bits=I,2;E.adler=v.check=1,v.mode=12;case 12:if(z===5||z===6)break t;case 13:if(v.last){B>>>=7&I,I-=7&I,v.mode=27;break}for(;I<3;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}switch(v.last=1&B,I-=1,3&(B>>>=1)){case 0:v.mode=14;break;case 1:if(L(v),v.mode=20,z!==6)break;B>>>=2,I-=2;break t;case 2:v.mode=17;break;case 3:E.msg="invalid block type",v.mode=30}B>>>=2,I-=2;break;case 14:for(B>>>=7&I,I-=7&I;I<32;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if((65535&B)!=(B>>>16^65535)){E.msg="invalid stored block lengths",v.mode=30;break}if(v.length=65535&B,I=B=0,v.mode=15,z===6)break t;case 15:v.mode=16;case 16:if(G=v.length){if(W<G&&(G=W),et<G&&(G=et),G===0)break t;s.arraySet(J,U,$,G,it),W-=G,$+=G,et-=G,it+=G,v.length-=G;break}v.mode=12;break;case 17:for(;I<14;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(v.nlen=257+(31&B),B>>>=5,I-=5,v.ndist=1+(31&B),B>>>=5,I-=5,v.ncode=4+(15&B),B>>>=4,I-=4,286<v.nlen||30<v.ndist){E.msg="too many length or distance symbols",v.mode=30;break}v.have=0,v.mode=18;case 18:for(;v.have<v.ncode;){for(;I<3;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.lens[j[v.have++]]=7&B,B>>>=3,I-=3}for(;v.have<19;)v.lens[j[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,R={bits:v.lenbits},M=u(0,v.lens,0,19,v.lencode,0,v.work,R),v.lenbits=R.bits,M){E.msg="invalid code lengths set",v.mode=30;break}v.have=0,v.mode=19;case 19:for(;v.have<v.nlen+v.ndist;){for(;ot=(S=v.lencode[B&(1<<v.lenbits)-1])>>>16&255,wt=65535&S,!((nt=S>>>24)<=I);){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(wt<16)B>>>=nt,I-=nt,v.lens[v.have++]=wt;else{if(wt===16){for(C=nt+2;I<C;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(B>>>=nt,I-=nt,v.have===0){E.msg="invalid bit length repeat",v.mode=30;break}c=v.lens[v.have-1],G=3+(3&B),B>>>=2,I-=2}else if(wt===17){for(C=nt+3;I<C;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}I-=nt,c=0,G=3+(7&(B>>>=nt)),B>>>=3,I-=3}else{for(C=nt+7;I<C;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}I-=nt,c=0,G=11+(127&(B>>>=nt)),B>>>=7,I-=7}if(v.have+G>v.nlen+v.ndist){E.msg="invalid bit length repeat",v.mode=30;break}for(;G--;)v.lens[v.have++]=c}}if(v.mode===30)break;if(v.lens[256]===0){E.msg="invalid code -- missing end-of-block",v.mode=30;break}if(v.lenbits=9,R={bits:v.lenbits},M=u(d,v.lens,0,v.nlen,v.lencode,0,v.work,R),v.lenbits=R.bits,M){E.msg="invalid literal/lengths set",v.mode=30;break}if(v.distbits=6,v.distcode=v.distdyn,R={bits:v.distbits},M=u(h,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,R),v.distbits=R.bits,M){E.msg="invalid distances set",v.mode=30;break}if(v.mode=20,z===6)break t;case 20:v.mode=21;case 21:if(6<=W&&258<=et){E.next_out=it,E.avail_out=et,E.next_in=$,E.avail_in=W,v.hold=B,v.bits=I,l(E,X),it=E.next_out,J=E.output,et=E.avail_out,$=E.next_in,U=E.input,W=E.avail_in,B=v.hold,I=v.bits,v.mode===12&&(v.back=-1);break}for(v.back=0;ot=(S=v.lencode[B&(1<<v.lenbits)-1])>>>16&255,wt=65535&S,!((nt=S>>>24)<=I);){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(ot&&!(240&ot)){for(mt=nt,Wt=ot,zt=wt;ot=(S=v.lencode[zt+((B&(1<<mt+Wt)-1)>>mt)])>>>16&255,wt=65535&S,!(mt+(nt=S>>>24)<=I);){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}B>>>=mt,I-=mt,v.back+=mt}if(B>>>=nt,I-=nt,v.back+=nt,v.length=wt,ot===0){v.mode=26;break}if(32&ot){v.back=-1,v.mode=12;break}if(64&ot){E.msg="invalid literal/length code",v.mode=30;break}v.extra=15&ot,v.mode=22;case 22:if(v.extra){for(C=v.extra;I<C;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.length+=B&(1<<v.extra)-1,B>>>=v.extra,I-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=23;case 23:for(;ot=(S=v.distcode[B&(1<<v.distbits)-1])>>>16&255,wt=65535&S,!((nt=S>>>24)<=I);){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(!(240&ot)){for(mt=nt,Wt=ot,zt=wt;ot=(S=v.distcode[zt+((B&(1<<mt+Wt)-1)>>mt)])>>>16&255,wt=65535&S,!(mt+(nt=S>>>24)<=I);){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}B>>>=mt,I-=mt,v.back+=mt}if(B>>>=nt,I-=nt,v.back+=nt,64&ot){E.msg="invalid distance code",v.mode=30;break}v.offset=wt,v.extra=15&ot,v.mode=24;case 24:if(v.extra){for(C=v.extra;I<C;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}v.offset+=B&(1<<v.extra)-1,B>>>=v.extra,I-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){E.msg="invalid distance too far back",v.mode=30;break}v.mode=25;case 25:if(et===0)break t;if(G=X-et,v.offset>G){if((G=v.offset-G)>v.whave&&v.sane){E.msg="invalid distance too far back",v.mode=30;break}ct=G>v.wnext?(G-=v.wnext,v.wsize-G):v.wnext-G,G>v.length&&(G=v.length),ft=v.window}else ft=J,ct=it-v.offset,G=v.length;for(et<G&&(G=et),et-=G,v.length-=G;J[it++]=ft[ct++],--G;);v.length===0&&(v.mode=21);break;case 26:if(et===0)break t;J[it++]=v.length,et--,v.mode=21;break;case 27:if(v.wrap){for(;I<32;){if(W===0)break t;W--,B|=U[$++]<<I,I+=8}if(X-=et,E.total_out+=X,v.total+=X,X&&(E.adler=v.check=v.flags?o(v.check,J,X,it-X):a(v.check,J,X,it-X)),X=et,(v.flags?B:b(B))!==v.check){E.msg="incorrect data check",v.mode=30;break}I=B=0}v.mode=28;case 28:if(v.wrap&&v.flags){for(;I<32;){if(W===0)break t;W--,B+=U[$++]<<I,I+=8}if(B!==(4294967295&v.total)){E.msg="incorrect length check",v.mode=30;break}I=B=0}v.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;case 32:default:return p}return E.next_out=it,E.avail_out=et,E.next_in=$,E.avail_in=W,v.hold=B,v.bits=I,(v.wsize||X!==E.avail_out&&v.mode<30&&(v.mode<27||z!==4))&&K(E,E.output,E.next_out,X-E.avail_out)?(v.mode=31,-4):(Q-=E.avail_in,X-=E.avail_out,E.total_in+=Q,E.total_out+=X,v.total+=X,v.wrap&&X&&(E.adler=v.check=v.flags?o(v.check,J,X,E.next_out-X):a(v.check,J,X,E.next_out-X)),E.data_type=v.bits+(v.last?64:0)+(v.mode===12?128:0)+(v.mode===20||v.mode===15?256:0),(Q==0&&X===0||z===4)&&M===m&&(M=-5),M)},n.inflateEnd=function(E){if(!E||!E.state)return p;var z=E.state;return z.window&&(z.window=null),E.state=null,m},n.inflateGetHeader=function(E,z){var v;return E&&E.state&&2&(v=E.state).wrap?((v.head=z).done=!1,m):p},n.inflateSetDictionary=function(E,z){var v,U=z.length;return E&&E.state?(v=E.state).wrap!==0&&v.mode!==11?p:v.mode===11&&a(1,z,U,0)!==v.check?-3:K(E,z,U,U)?(v.mode=31,-4):(v.havedict=1,m):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,i,n){var s=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(d,h,m,p,g,f,y,b){var w,k,T,x,F,A,N,O,L,K=b.bits,E=0,z=0,v=0,U=0,J=0,$=0,it=0,W=0,et=0,B=0,I=null,Q=0,X=new s.Buf16(16),G=new s.Buf16(16),ct=null,ft=0;for(E=0;E<=15;E++)X[E]=0;for(z=0;z<p;z++)X[h[m+z]]++;for(J=K,U=15;1<=U&&X[U]===0;U--);if(U<J&&(J=U),U===0)return g[f++]=20971520,g[f++]=20971520,b.bits=1,0;for(v=1;v<U&&X[v]===0;v++);for(J<v&&(J=v),E=W=1;E<=15;E++)if(W<<=1,(W-=X[E])<0)return-1;if(0<W&&(d===0||U!==1))return-1;for(G[1]=0,E=1;E<15;E++)G[E+1]=G[E]+X[E];for(z=0;z<p;z++)h[m+z]!==0&&(y[G[h[m+z]]++]=z);if(A=d===0?(I=ct=y,19):d===1?(I=a,Q-=257,ct=o,ft-=257,256):(I=l,ct=u,-1),E=v,F=f,it=z=B=0,T=-1,x=(et=1<<($=J))-1,d===1&&852<et||d===2&&592<et)return 1;for(;;){for(N=E-it,L=y[z]<A?(O=0,y[z]):y[z]>A?(O=ct[ft+y[z]],I[Q+y[z]]):(O=96,0),w=1<<E-it,v=k=1<<$;g[F+(B>>it)+(k-=w)]=N<<24|O<<16|L|0,k!==0;);for(w=1<<E-1;B&w;)w>>=1;if(w!==0?(B&=w-1,B+=w):B=0,z++,--X[E]==0){if(E===U)break;E=h[m+y[z]]}if(J<E&&(B&x)!==T){for(it===0&&(it=J),F+=v,W=1<<($=E-it);$+it<U&&!((W-=X[$+it])<=0);)$++,W<<=1;if(et+=1<<$,d===1&&852<et||d===2&&592<et)return 1;g[T=B&x]=J<<24|$<<16|F-f|0}}return B!==0&&(g[F+B]=E-it<<24|64<<16|0),b.bits=J,0}},{"../utils/common":41}],51:[function(e,i,n){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,i,n){var s=e("../utils/common"),a=0,o=1;function l(S){for(var P=S.length;0<=--P;)S[P]=0}var u=0,d=29,h=256,m=h+1+d,p=30,g=19,f=2*m+1,y=15,b=16,w=7,k=256,T=16,x=17,F=18,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(m+2));l(K);var E=new Array(2*p);l(E);var z=new Array(512);l(z);var v=new Array(256);l(v);var U=new Array(d);l(U);var J,$,it,W=new Array(p);function et(S,P,j,H,D){this.static_tree=S,this.extra_bits=P,this.extra_base=j,this.elems=H,this.max_length=D,this.has_stree=S&&S.length}function B(S,P){this.dyn_tree=S,this.max_code=0,this.stat_desc=P}function I(S){return S<256?z[S]:z[256+(S>>>7)]}function Q(S,P){S.pending_buf[S.pending++]=255&P,S.pending_buf[S.pending++]=P>>>8&255}function X(S,P,j){S.bi_valid>b-j?(S.bi_buf|=P<<S.bi_valid&65535,Q(S,S.bi_buf),S.bi_buf=P>>b-S.bi_valid,S.bi_valid+=j-b):(S.bi_buf|=P<<S.bi_valid&65535,S.bi_valid+=j)}function G(S,P,j){X(S,j[2*P],j[2*P+1])}function ct(S,P){for(var j=0;j|=1&S,S>>>=1,j<<=1,0<--P;);return j>>>1}function ft(S,P,j){var H,D,V=new Array(y+1),Y=0;for(H=1;H<=y;H++)V[H]=Y=Y+j[H-1]<<1;for(D=0;D<=P;D++){var q=S[2*D+1];q!==0&&(S[2*D]=ct(V[q]++,q))}}function nt(S){var P;for(P=0;P<m;P++)S.dyn_ltree[2*P]=0;for(P=0;P<p;P++)S.dyn_dtree[2*P]=0;for(P=0;P<g;P++)S.bl_tree[2*P]=0;S.dyn_ltree[2*k]=1,S.opt_len=S.static_len=0,S.last_lit=S.matches=0}function ot(S){8<S.bi_valid?Q(S,S.bi_buf):0<S.bi_valid&&(S.pending_buf[S.pending++]=S.bi_buf),S.bi_buf=0,S.bi_valid=0}function wt(S,P,j,H){var D=2*P,V=2*j;return S[D]<S[V]||S[D]===S[V]&&H[P]<=H[j]}function mt(S,P,j){for(var H=S.heap[j],D=j<<1;D<=S.heap_len&&(D<S.heap_len&&wt(P,S.heap[D+1],S.heap[D],S.depth)&&D++,!wt(P,H,S.heap[D],S.depth));)S.heap[j]=S.heap[D],j=D,D<<=1;S.heap[j]=H}function Wt(S,P,j){var H,D,V,Y,q=0;if(S.last_lit!==0)for(;H=S.pending_buf[S.d_buf+2*q]<<8|S.pending_buf[S.d_buf+2*q+1],D=S.pending_buf[S.l_buf+q],q++,H===0?G(S,D,P):(G(S,(V=v[D])+h+1,P),(Y=A[V])!==0&&X(S,D-=U[V],Y),G(S,V=I(--H),j),(Y=N[V])!==0&&X(S,H-=W[V],Y)),q<S.last_lit;);G(S,k,P)}function zt(S,P){var j,H,D,V=P.dyn_tree,Y=P.stat_desc.static_tree,q=P.stat_desc.has_stree,tt=P.stat_desc.elems,ht=-1;for(S.heap_len=0,S.heap_max=f,j=0;j<tt;j++)V[2*j]!==0?(S.heap[++S.heap_len]=ht=j,S.depth[j]=0):V[2*j+1]=0;for(;S.heap_len<2;)V[2*(D=S.heap[++S.heap_len]=ht<2?++ht:0)]=1,S.depth[D]=0,S.opt_len--,q&&(S.static_len-=Y[2*D+1]);for(P.max_code=ht,j=S.heap_len>>1;1<=j;j--)mt(S,V,j);for(D=tt;j=S.heap[1],S.heap[1]=S.heap[S.heap_len--],mt(S,V,1),H=S.heap[1],S.heap[--S.heap_max]=j,S.heap[--S.heap_max]=H,V[2*D]=V[2*j]+V[2*H],S.depth[D]=(S.depth[j]>=S.depth[H]?S.depth[j]:S.depth[H])+1,V[2*j+1]=V[2*H+1]=D,S.heap[1]=D++,mt(S,V,1),2<=S.heap_len;);S.heap[--S.heap_max]=S.heap[1],function(at,It){var Ue,Vt,Me,gt,yi,Wi,Yt=It.dyn_tree,rs=It.max_code,Ma=It.stat_desc.static_tree,La=It.stat_desc.has_stree,ja=It.stat_desc.extra_bits,ss=It.stat_desc.extra_base,Le=It.stat_desc.max_length,bi=0;for(gt=0;gt<=y;gt++)at.bl_count[gt]=0;for(Yt[2*at.heap[at.heap_max]+1]=0,Ue=at.heap_max+1;Ue<f;Ue++)Le<(gt=Yt[2*Yt[2*(Vt=at.heap[Ue])+1]+1]+1)&&(gt=Le,bi++),Yt[2*Vt+1]=gt,rs<Vt||(at.bl_count[gt]++,yi=0,ss<=Vt&&(yi=ja[Vt-ss]),Wi=Yt[2*Vt],at.opt_len+=Wi*(gt+yi),La&&(at.static_len+=Wi*(Ma[2*Vt+1]+yi)));if(bi!==0){do{for(gt=Le-1;at.bl_count[gt]===0;)gt--;at.bl_count[gt]--,at.bl_count[gt+1]+=2,at.bl_count[Le]--,bi-=2}while(0<bi);for(gt=Le;gt!==0;gt--)for(Vt=at.bl_count[gt];Vt!==0;)rs<(Me=at.heap[--Ue])||(Yt[2*Me+1]!==gt&&(at.opt_len+=(gt-Yt[2*Me+1])*Yt[2*Me],Yt[2*Me+1]=gt),Vt--)}}(S,P),ft(V,ht,S.bl_count)}function c(S,P,j){var H,D,V=-1,Y=P[1],q=0,tt=7,ht=4;for(Y===0&&(tt=138,ht=3),P[2*(j+1)+1]=65535,H=0;H<=j;H++)D=Y,Y=P[2*(H+1)+1],++q<tt&&D===Y||(q<ht?S.bl_tree[2*D]+=q:D!==0?(D!==V&&S.bl_tree[2*D]++,S.bl_tree[2*T]++):q<=10?S.bl_tree[2*x]++:S.bl_tree[2*F]++,V=D,ht=(q=0)===Y?(tt=138,3):D===Y?(tt=6,3):(tt=7,4))}function M(S,P,j){var H,D,V=-1,Y=P[1],q=0,tt=7,ht=4;for(Y===0&&(tt=138,ht=3),H=0;H<=j;H++)if(D=Y,Y=P[2*(H+1)+1],!(++q<tt&&D===Y)){if(q<ht)for(;G(S,D,S.bl_tree),--q!=0;);else D!==0?(D!==V&&(G(S,D,S.bl_tree),q--),G(S,T,S.bl_tree),X(S,q-3,2)):q<=10?(G(S,x,S.bl_tree),X(S,q-3,3)):(G(S,F,S.bl_tree),X(S,q-11,7));V=D,ht=(q=0)===Y?(tt=138,3):D===Y?(tt=6,3):(tt=7,4)}}l(W);var R=!1;function C(S,P,j,H){X(S,(u<<1)+(H?1:0),3),function(D,V,Y,q){ot(D),q&&(Q(D,Y),Q(D,~Y)),s.arraySet(D.pending_buf,D.window,V,Y,D.pending),D.pending+=Y}(S,P,j,!0)}n._tr_init=function(S){R||(function(){var P,j,H,D,V,Y=new Array(y+1);for(D=H=0;D<d-1;D++)for(U[D]=H,P=0;P<1<<A[D];P++)v[H++]=D;for(v[H-1]=D,D=V=0;D<16;D++)for(W[D]=V,P=0;P<1<<N[D];P++)z[V++]=D;for(V>>=7;D<p;D++)for(W[D]=V<<7,P=0;P<1<<N[D]-7;P++)z[256+V++]=D;for(j=0;j<=y;j++)Y[j]=0;for(P=0;P<=143;)K[2*P+1]=8,P++,Y[8]++;for(;P<=255;)K[2*P+1]=9,P++,Y[9]++;for(;P<=279;)K[2*P+1]=7,P++,Y[7]++;for(;P<=287;)K[2*P+1]=8,P++,Y[8]++;for(ft(K,m+1,Y),P=0;P<p;P++)E[2*P+1]=5,E[2*P]=ct(P,5);J=new et(K,A,h+1,m,y),$=new et(E,N,0,p,y),it=new et(new Array(0),O,0,g,w)}(),R=!0),S.l_desc=new B(S.dyn_ltree,J),S.d_desc=new B(S.dyn_dtree,$),S.bl_desc=new B(S.bl_tree,it),S.bi_buf=0,S.bi_valid=0,nt(S)},n._tr_stored_block=C,n._tr_flush_block=function(S,P,j,H){var D,V,Y=0;0<S.level?(S.strm.data_type===2&&(S.strm.data_type=function(q){var tt,ht=4093624447;for(tt=0;tt<=31;tt++,ht>>>=1)if(1&ht&&q.dyn_ltree[2*tt]!==0)return a;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return o;for(tt=32;tt<h;tt++)if(q.dyn_ltree[2*tt]!==0)return o;return a}(S)),zt(S,S.l_desc),zt(S,S.d_desc),Y=function(q){var tt;for(c(q,q.dyn_ltree,q.l_desc.max_code),c(q,q.dyn_dtree,q.d_desc.max_code),zt(q,q.bl_desc),tt=g-1;3<=tt&&q.bl_tree[2*L[tt]+1]===0;tt--);return q.opt_len+=3*(tt+1)+5+5+4,tt}(S),D=S.opt_len+3+7>>>3,(V=S.static_len+3+7>>>3)<=D&&(D=V)):D=V=j+5,j+4<=D&&P!==-1?C(S,P,j,H):S.strategy===4||V===D?(X(S,2+(H?1:0),3),Wt(S,K,E)):(X(S,4+(H?1:0),3),function(q,tt,ht,at){var It;for(X(q,tt-257,5),X(q,ht-1,5),X(q,at-4,4),It=0;It<at;It++)X(q,q.bl_tree[2*L[It]+1],3);M(q,q.dyn_ltree,tt-1),M(q,q.dyn_dtree,ht-1)}(S,S.l_desc.max_code+1,S.d_desc.max_code+1,Y+1),Wt(S,S.dyn_ltree,S.dyn_dtree)),nt(S),H&&ot(S)},n._tr_tally=function(S,P,j){return S.pending_buf[S.d_buf+2*S.last_lit]=P>>>8&255,S.pending_buf[S.d_buf+2*S.last_lit+1]=255&P,S.pending_buf[S.l_buf+S.last_lit]=255&j,S.last_lit++,P===0?S.dyn_ltree[2*j]++:(S.matches++,P--,S.dyn_ltree[2*(v[j]+h+1)]++,S.dyn_dtree[2*I(P)]++),S.last_lit===S.lit_bufsize-1},n._tr_align=function(S){X(S,2,3),G(S,k,K),function(P){P.bi_valid===16?(Q(P,P.bi_buf),P.bi_buf=0,P.bi_valid=0):8<=P.bi_valid&&(P.pending_buf[P.pending++]=255&P.bi_buf,P.bi_buf>>=8,P.bi_valid-=8)}(S)}},{"../utils/common":41}],53:[function(e,i,n){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,i,n){(function(s){(function(a,o){if(!a.setImmediate){var l,u,d,h,m=1,p={},g=!1,f=a.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(a);y=y&&y.setTimeout?y:a,l={}.toString.call(a.process)==="[object process]"?function(T){process.nextTick(function(){w(T)})}:function(){if(a.postMessage&&!a.importScripts){var T=!0,x=a.onmessage;return a.onmessage=function(){T=!1},a.postMessage("","*"),a.onmessage=x,T}}()?(h="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",k,!1):a.attachEvent("onmessage",k),function(T){a.postMessage(h+T,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(T){w(T.data)},function(T){d.port2.postMessage(T)}):f&&"onreadystatechange"in f.createElement("script")?(u=f.documentElement,function(T){var x=f.createElement("script");x.onreadystatechange=function(){w(T),x.onreadystatechange=null,u.removeChild(x),x=null},u.appendChild(x)}):function(T){setTimeout(w,0,T)},y.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var x=new Array(arguments.length-1),F=0;F<x.length;F++)x[F]=arguments[F+1];var A={callback:T,args:x};return p[m]=A,l(m),m++},y.clearImmediate=b}function b(T){delete p[T]}function w(T){if(g)setTimeout(w,0,T);else{var x=p[T];if(x){g=!0;try{(function(F){var A=F.callback,N=F.args;switch(N.length){case 0:A();break;case 1:A(N[0]);break;case 2:A(N[0],N[1]);break;case 3:A(N[0],N[1],N[2]);break;default:A.apply(o,N)}})(x)}finally{b(T),g=!1}}}}function k(T){T.source===a&&typeof T.data=="string"&&T.data.indexOf(h)===0&&w(+T.data.slice(h.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof ae<"u"?ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Ga);const Xa=br;function Ya(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function ls(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var Za=0;function Ka(r){return"__private_"+Za+++"_"+r}function Ja(r,t,e){const i=[];return r.forEach(n=>typeof n!="string"?i.push(n):t[Symbol.split](n).forEach((s,a,o)=>{s!==""&&i.push(s),a<o.length-1&&i.push(e)})),i}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param {string} phrase that needs interpolation, with placeholders
 * @param {object} options with values that will be used to replace placeholders
 * @returns {any[]} interpolated
 */function hs(r,t){const e=/\$/g,i="$$$$";let n=[r];if(t==null)return n;for(const s of Object.keys(t))if(s!=="_"){let a=t[s];typeof a=="string"&&(a=e[Symbol.replace](a,i)),n=Ja(n,new RegExp(`%\\{${s}\\}`,"g"),a)}return n}var He=Ka("apply");class Fn{constructor(t){Object.defineProperty(this,He,{value:Qa}),this.locale={strings:{},pluralize(e){return e===1?0:1}},Array.isArray(t)?t.forEach(ls(this,He)[He],this):ls(this,He)[He](t)}translate(t,e){return this.translateArray(t,e).join("")}translateArray(t,e){if(!Ya(this.locale.strings,t))throw new Error(`missing string: ${t}`);const i=this.locale.strings[t];if(typeof i=="object"){if(e&&typeof e.smart_count<"u"){const s=this.locale.pluralize(e.smart_count);return hs(i[s],e)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return hs(i,e)}}function Qa(r){if(!(r!=null&&r.strings))return;const t=this.locale;this.locale={...t,strings:{...t.strings,...r.strings}},this.locale.pluralize=r.pluralize||t.pluralize}var to=function(){var t={},e=t._fns={};t.emit=function(a,o,l,u,d,h,m){var p=i(a);p.length&&n(a,p,[o,l,u,d,h,m])},t.on=function(a,o){e[a]||(e[a]=[]),e[a].push(o)},t.once=function(a,o){function l(){o.apply(this,arguments),t.off(a,l)}this.on(a,l)},t.off=function(a,o){var l=[];if(a&&o){var u=this._fns[a],d=0,h=u?u.length:0;for(d;d<h;d++)u[d]!==o&&l.push(u[d])}l.length?this._fns[a]=l:delete this._fns[a]};function i(s){var a=e[s]?e[s]:[],o=s.indexOf(":"),l=o===-1?[s]:[s.substring(0,o),s.substring(o+1)],u=Object.keys(e),d=0,h=u.length;for(d;d<h;d++){var m=u[d];if(m==="*"&&(a=a.concat(e[m])),l.length===2&&l[0]===m){a=a.concat(e[m]);break}}return a}function n(s,a,o){var l=0,u=a.length;for(l;l<u&&a[l];l++)a[l].event=s,a[l].apply(a[l],o)}return t};let eo="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Lr=(r=21)=>{let t="",e=r;for(;e--;)t+=eo[Math.random()*64|0];return t};function io(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}var jr=io,ro=typeof ae=="object"&&ae&&ae.Object===Object&&ae,so=ro,no=so,ao=typeof self=="object"&&self&&self.Object===Object&&self,oo=no||ao||Function("return this")(),xn=oo,lo=xn,ho=function(){return lo.Date.now()},uo=ho,co=/\s/;function po(r){for(var t=r.length;t--&&co.test(r.charAt(t)););return t}var fo=po,mo=fo,go=/^\s+/;function vo(r){return r&&r.slice(0,mo(r)+1).replace(go,"")}var yo=vo,bo=xn,_o=bo.Symbol,En=_o,us=En,Tn=Object.prototype,wo=Tn.hasOwnProperty,So=Tn.toString,We=us?us.toStringTag:void 0;function ko(r){var t=wo.call(r,We),e=r[We];try{r[We]=void 0;var i=!0}catch{}var n=So.call(r);return i&&(t?r[We]=e:delete r[We]),n}var Co=ko,Fo=Object.prototype,xo=Fo.toString;function Eo(r){return xo.call(r)}var To=Eo,ds=En,Ao=Co,Po=To,Oo="[object Null]",Do="[object Undefined]",cs=ds?ds.toStringTag:void 0;function Io(r){return r==null?r===void 0?Do:Oo:cs&&cs in Object(r)?Ao(r):Po(r)}var No=Io;function Bo(r){return r!=null&&typeof r=="object"}var Ro=Bo,zo=No,Uo=Ro,Mo="[object Symbol]";function Lo(r){return typeof r=="symbol"||Uo(r)&&zo(r)==Mo}var jo=Lo,$o=yo,ps=jr,Ho=jo,fs=0/0,Wo=/^[-+]0x[0-9a-f]+$/i,Vo=/^0b[01]+$/i,qo=/^0o[0-7]+$/i,Go=parseInt;function Xo(r){if(typeof r=="number")return r;if(Ho(r))return fs;if(ps(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=ps(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=$o(r);var e=Vo.test(r);return e||qo.test(r)?Go(r.slice(2),e?2:8):Wo.test(r)?fs:+r}var Yo=Xo,Zo=jr,Gi=uo,ms=Yo,Ko="Expected a function",Jo=Math.max,Qo=Math.min;function tl(r,t,e){var i,n,s,a,o,l,u=0,d=!1,h=!1,m=!0;if(typeof r!="function")throw new TypeError(Ko);t=ms(t)||0,Zo(e)&&(d=!!e.leading,h="maxWait"in e,s=h?Jo(ms(e.maxWait)||0,t):s,m="trailing"in e?!!e.trailing:m);function p(F){var A=i,N=n;return i=n=void 0,u=F,a=r.apply(N,A),a}function g(F){return u=F,o=setTimeout(b,t),d?p(F):a}function f(F){var A=F-l,N=F-u,O=t-A;return h?Qo(O,s-N):O}function y(F){var A=F-l,N=F-u;return l===void 0||A>=t||A<0||h&&N>=s}function b(){var F=Gi();if(y(F))return w(F);o=setTimeout(b,f(F))}function w(F){return o=void 0,m&&i?p(F):(i=n=void 0,a)}function k(){o!==void 0&&clearTimeout(o),u=0,i=l=n=o=void 0}function T(){return o===void 0?a:w(Gi())}function x(){var F=Gi(),A=y(F);if(i=arguments,n=this,l=F,A){if(o===void 0)return g(l);if(h)return clearTimeout(o),o=setTimeout(b,t),p(l)}return o===void 0&&(o=setTimeout(b,t)),a}return x.cancel=k,x.flush=T,x}var An=tl,el=An,il=jr,rl="Expected a function";function sl(r,t,e){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(rl);return il(e)&&(i="leading"in e?!!e.leading:i,n="trailing"in e?!!e.trailing:n),el(r,t,{leading:i,maxWait:t,trailing:n})}var nl=sl;function Di(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var al=0;function Pn(r){return"__private_"+al+++"_"+r}const ol={version:"3.0.3"};var ve=Pn("callbacks"),Xi=Pn("publish");class On{constructor(){Object.defineProperty(this,Xi,{value:ll}),Object.defineProperty(this,ve,{writable:!0,value:new Set}),this.state={}}getState(){return this.state}setState(t){const e={...this.state},i={...this.state,...t};this.state=i,Di(this,Xi)[Xi](e,i,t)}subscribe(t){return Di(this,ve)[ve].add(t),()=>{Di(this,ve)[ve].delete(t)}}}function ll(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];Di(this,ve)[ve].forEach(i=>{i(...t)})}On.VERSION=ol.version;function Dn(r){const t=r.lastIndexOf(".");return t===-1||t===r.length-1?{name:r,extension:void 0}:{name:r.slice(0,t),extension:r.slice(t+1)}}const gs={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function In(r){var t;if(r.type)return r.type;const e=r.name?(t=Dn(r.name).extension)==null?void 0:t.toLowerCase():null;return e&&e in gs?gs[e]:"application/octet-stream"}function hl(r){return r.charCodeAt(0).toString(32)}function vs(r){let t="";return r.replace(/[^A-Z0-9]/ig,e=>(t+=`-${hl(e)}`,"/"))+t}function ul(r){let t="uppy";return typeof r.name=="string"&&(t+=`-${vs(r.name.toLowerCase())}`),r.type!==void 0&&(t+=`-${r.type}`),r.meta&&typeof r.meta.relativePath=="string"&&(t+=`-${vs(r.meta.relativePath.toLowerCase())}`),r.data.size!==void 0&&(t+=`-${r.data.size}`),r.data.lastModified!==void 0&&(t+=`-${r.data.lastModified}`),t}function dl(r){return!r.isRemote||!r.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(r.remote.provider)}function cl(r){if(dl(r))return r.id;const t=In(r);return ul({...r,type:t})}function pl(r){if(r==null&&typeof navigator<"u"&&(r=navigator.userAgent),!r)return!0;const t=/Edge\/(\d+\.\d+)/.exec(r);if(!t)return!0;const e=t[1];let[i,n]=e.split(".");return i=parseInt(i,10),n=parseInt(n,10),i<15||i===15&&n<15063||i>18||i===18&&n>=18218}function fl(r,t){return t.name?t.name:r.split("/")[0]==="image"?`${r.split("/")[0]}.${r.split("/")[1]}`:"noname"}function Yi(r){return r<10?`0${r}`:r.toString()}function Ii(){const r=new Date,t=Yi(r.getHours()),e=Yi(r.getMinutes()),i=Yi(r.getSeconds());return`${t}:${e}:${i}`}const ml={debug:()=>{},warn:()=>{},error:function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return console.error(`[Uppy] [${Ii()}]`,...t)}},gl={debug:function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return console.debug(`[Uppy] [${Ii()}]`,...t)},warn:function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return console.warn(`[Uppy] [${Ii()}]`,...t)},error:function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return console.error(`[Uppy] [${Ii()}]`,...t)}};var ai=function(t){if(typeof t!="number"||isNaN(t))throw new TypeError(`Expected a number, got ${typeof t}`);const e=t<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return`${(e?"-":"")+t} B`;const n=Math.min(Math.floor(Math.log(t)/Math.log(1024)),i.length-1);t=Number(t/Math.pow(1024,n));const s=i[n];return t>=10||t%1===0?`${(e?"-":"")+t.toFixed(0)} ${s}`:`${(e?"-":"")+t.toFixed(1)} ${s}`};function Nn(r,t){this.text=r=r||"",this.hasWild=~r.indexOf("*"),this.separator=t,this.parts=r.split(t)}Nn.prototype.match=function(r){var t=!0,e=this.parts,i,n=e.length,s;if(typeof r=="string"||r instanceof String)if(!this.hasWild&&this.text!=r)t=!1;else{for(s=(r||"").split(this.separator),i=0;t&&i<n;i++)e[i]!=="*"&&(i<s.length?t=e[i]===s[i]:t=!1);t=t&&s}else if(typeof r.splice=="function")for(t=[],i=r.length;i--;)this.match(r[i])&&(t[t.length]=r[i]);else if(typeof r=="object"){t={};for(var a in r)this.match(a)&&(t[a]=r[a])}return t};var vl=function(r,t,e){var i=new Nn(r,e||/[\/\.]/);return typeof t<"u"?i.match(t):i},yl=vl,bl=/[\/\+\.]/,_l=function(r,t){function e(i){var n=yl(i,r,bl);return n&&n.length>=2}return t?e(t.split(";")[0]):e};const wl={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class Mt extends Error{constructor(t,e){let{isUserFacing:i=!0,file:n}=e===void 0?{}:e;super(t),this.isRestriction=!0,this.isUserFacing=i,n!=null&&(this.file=n)}}class Sl{constructor(t,e){this.i18n=e,this.getOpts=()=>{const i=t();if(i.restrictions.allowedFileTypes!=null&&!Array.isArray(i.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return i}}validateAggregateRestrictions(t,e){const{maxTotalFileSize:i,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&t.filter(a=>!a.isGhost).length+e.length>n)throw new Mt(`${this.i18n("youCanOnlyUploadX",{smart_count:n})}`);if(i){let s=t.reduce((a,o)=>a+o.size,0);for(const a of e)if(a.size!=null&&(s+=a.size,s>i))throw new Mt(this.i18n("exceedsSize",{size:ai(i),file:a.name}))}}validateSingleFile(t){const{maxFileSize:e,minFileSize:i,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?t.type?_l(t.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&t.extension?t.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){const a=n.join(", ");throw new Mt(this.i18n("youCanOnlyUploadFileTypes",{types:a}),{file:t})}if(e&&t.size!=null&&t.size>e)throw new Mt(this.i18n("exceedsSize",{size:ai(e),file:t.name}),{file:t});if(i&&t.size!=null&&t.size<i)throw new Mt(this.i18n("inferiorSize",{size:ai(i)}),{file:t})}validate(t,e){e.forEach(i=>{this.validateSingleFile(i)}),this.validateAggregateRestrictions(t,e)}validateMinNumberOfFiles(t){const{minNumberOfFiles:e}=this.getOpts().restrictions;if(Object.keys(t).length<e)throw new Mt(this.i18n("youHaveToAtLeastSelectX",{smart_count:e}))}getMissingRequiredMetaFields(t){const e=new Mt(this.i18n("missingRequiredMetaFieldOnFile",{fileName:t.name})),{requiredMetaFields:i}=this.getOpts().restrictions,n=[];for(const s of i)(!Object.hasOwn(t.meta,s)||t.meta[s]==="")&&n.push(s);return{missingFields:n,error:e}}}const kl={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled"}};let Bn,Rn;function Z(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var Cl=0;function bt(r){return"__private_"+Cl+++"_"+r}const Fl={version:"3.4.0"};var Ft=bt("plugins"),Pt=bt("restricter"),Ve=bt("storeUnsubscribe"),Zt=bt("emitter"),ye=bt("preProcessors"),be=bt("uploaders"),ie=bt("postProcessors"),Ot=bt("informAndEmit"),ui=bt("checkRequiredMetaFieldsOnFile"),Zi=bt("checkRequiredMetaFields"),qe=bt("assertNewUploadAllowed"),_r=bt("transformFile"),Ge=bt("startIfAutoProceed"),Xe=bt("checkAndUpdateFileState"),Ki=bt("addListeners"),$t=bt("updateOnlineStatus"),Kt=bt("createUpload"),Ji=bt("getUpload"),Se=bt("removeUpload"),Jt=bt("runUpload");Bn=Symbol.for("uppy test: getPlugins");Rn=Symbol.for("uppy test: createUpload");let zn=class{constructor(t){Object.defineProperty(this,Jt,{value:zl}),Object.defineProperty(this,Se,{value:Rl}),Object.defineProperty(this,Ji,{value:Bl}),Object.defineProperty(this,Kt,{value:Nl}),Object.defineProperty(this,Ki,{value:Il}),Object.defineProperty(this,Xe,{value:Dl}),Object.defineProperty(this,Ge,{value:Ol}),Object.defineProperty(this,_r,{value:Pl}),Object.defineProperty(this,qe,{value:Al}),Object.defineProperty(this,Zi,{value:Tl}),Object.defineProperty(this,ui,{value:El}),Object.defineProperty(this,Ot,{value:xl}),Object.defineProperty(this,Ft,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,Pt,{writable:!0,value:void 0}),Object.defineProperty(this,Ve,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:to()}),Object.defineProperty(this,ye,{writable:!0,value:new Set}),Object.defineProperty(this,be,{writable:!0,value:new Set}),Object.defineProperty(this,ie,{writable:!0,value:new Set}),this.calculateProgress=nl((i,n)=>{const s=this.getFile(i==null?void 0:i.id);if(i==null||!s){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}if(s.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${i.id}`);return}const a=Number.isFinite(n.bytesTotal)&&n.bytesTotal>0;this.setFileState(i.id,{progress:{...s.progress,bytesUploaded:n.bytesUploaded,bytesTotal:n.bytesTotal,percentage:a?Math.round(n.bytesUploaded/n.bytesTotal*100):0}}),this.calculateTotalProgress()},500,{leading:!0,trailing:!0}),Object.defineProperty(this,$t,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=kl;const e={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:wl,meta:{},onBeforeFileAdded:(i,n)=>!Object.hasOwn(n,i.id),onBeforeUpload:i=>i,store:new On,logger:ml,infoTimeout:5e3};this.opts={...e,...t,restrictions:{...e.restrictions,...t&&t.restrictions}},t&&t.logger&&t.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):t&&t.debug&&(this.opts.logger=gl),this.log(`Using Core v${this.constructor.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:pl(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:{...this.opts.meta},info:[],recoveredState:null}),Z(this,Pt)[Pt]=new Sl(()=>this.opts,this.i18n),Z(this,Ve)[Ve]=this.store.subscribe((i,n,s)=>{this.emit("state-update",i,n,s),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),Z(this,Ki)[Ki]()}emit(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];Z(this,Zt)[Zt].emit(t,...i)}on(t,e){return Z(this,Zt)[Zt].on(t,e),this}once(t,e){return Z(this,Zt)[Zt].once(t,e),this}off(t,e){return Z(this,Zt)[Zt].off(t,e),this}updateAll(t){this.iteratePlugins(e=>{e.update(t)})}setState(t){this.store.setState(t)}getState(){return this.store.getState()}patchFilesState(t){const e=this.getState().files;this.setState({files:{...e,...Object.fromEntries(Object.entries(t).map(i=>{let[n,s]=i;return[n,{...e[n],...s}]}))}})}setFileState(t,e){if(!this.getState().files[t])throw new Error(`Can’t set state for ${t} (the file could have been removed)`);this.patchFilesState({[t]:e})}i18nInit(){const t=new Fn([this.defaultLocale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(t){this.opts={...this.opts,...t,restrictions:{...this.opts.restrictions,...t&&t.restrictions}},t.meta&&this.setMeta(t.meta),this.i18nInit(),t.locale&&this.iteratePlugins(e=>{e.setOptions(t)}),this.setState()}resetProgress(){const t={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},e={...this.getState().files},i={};Object.keys(e).forEach(n=>{i[n]={...e[n],progress:{...e[n].progress,...t}}}),this.setState({files:i,totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null}),this.emit("reset-progress")}addPreProcessor(t){Z(this,ye)[ye].add(t)}removePreProcessor(t){return Z(this,ye)[ye].delete(t)}addPostProcessor(t){Z(this,ie)[ie].add(t)}removePostProcessor(t){return Z(this,ie)[ie].delete(t)}addUploader(t){Z(this,be)[be].add(t)}removeUploader(t){return Z(this,be)[be].delete(t)}setMeta(t){const e={...this.getState().meta,...t},i={...this.getState().files};Object.keys(i).forEach(n=>{i[n]={...i[n],meta:{...i[n].meta,...t}}}),this.log("Adding metadata:"),this.log(t),this.setState({meta:e,files:i})}setFileMeta(t,e){const i={...this.getState().files};if(!i[t]){this.log("Was trying to set metadata for a file that has been removed: ",t);return}const n={...i[t].meta,...e};i[t]={...i[t],meta:n},this.setState({files:i})}getFile(t){return this.getState().files[t]}getFiles(){const{files:t}=this.getState();return Object.values(t)}getFilesByIds(t){return t.map(e=>this.getFile(e))}getObjectOfFilesPerState(){const{files:t,totalProgress:e,error:i}=this.getState(),n=Object.values(t),s=n.filter(g=>{let{progress:f}=g;return!f.uploadComplete&&f.uploadStarted}),a=n.filter(g=>!g.progress.uploadStarted),o=n.filter(g=>g.progress.uploadStarted||g.progress.preprocess||g.progress.postprocess),l=n.filter(g=>g.progress.uploadStarted),u=n.filter(g=>g.isPaused),d=n.filter(g=>g.progress.uploadComplete),h=n.filter(g=>g.error),m=s.filter(g=>!g.isPaused),p=n.filter(g=>g.progress.preprocess||g.progress.postprocess);return{newFiles:a,startedFiles:o,uploadStartedFiles:l,pausedFiles:u,completeFiles:d,erroredFiles:h,inProgressFiles:s,inProgressNotPausedFiles:m,processingFiles:p,isUploadStarted:l.length>0,isAllComplete:e===100&&d.length===n.length&&p.length===0,isAllErrored:!!i&&h.length===n.length,isAllPaused:s.length!==0&&u.length===s.length,isUploadInProgress:s.length>0,isSomeGhost:n.some(g=>g.isGhost)}}validateRestrictions(t,e){e===void 0&&(e=this.getFiles());try{Z(this,Pt)[Pt].validate(e,[t])}catch(i){return i}return null}checkIfFileAlreadyExists(t){const{files:e}=this.getState();return!!(e[t]&&!e[t].isGhost)}addFile(t){Z(this,qe)[qe](t);const{nextFilesState:e,validFilesToAdd:i,errors:n}=Z(this,Xe)[Xe]([t]),s=n.filter(o=>o.isRestriction);if(Z(this,Ot)[Ot](s),n.length>0)throw n[0];this.setState({files:e});const[a]=i;return this.emit("file-added",a),this.emit("files-added",i),this.log(`Added file: ${a.name}, ${a.id}, mime type: ${a.type}`),Z(this,Ge)[Ge](),a.id}addFiles(t){Z(this,qe)[qe]();const{nextFilesState:e,validFilesToAdd:i,errors:n}=Z(this,Xe)[Xe](t),s=n.filter(o=>o.isRestriction);Z(this,Ot)[Ot](s);const a=n.filter(o=>!o.isRestriction);if(a.length>0){let o=`Multiple errors occurred while adding files:
`;if(a.forEach(l=>{o+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:a.length}),details:o},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(a,o);{const l=new Error(o);throw l.errors=a,l}}this.setState({files:e}),i.forEach(o=>{this.emit("file-added",o)}),this.emit("files-added",i),i.length>5?this.log(`Added batch of ${i.length} files`):Object.values(i).forEach(o=>{this.log(`Added file: ${o.name}
 id: ${o.id}
 type: ${o.type}`)}),i.length>0&&Z(this,Ge)[Ge]()}removeFiles(t,e){const{files:i,currentUploads:n}=this.getState(),s={...i},a={...n},o=Object.create(null);t.forEach(h=>{i[h]&&(o[h]=i[h],delete s[h])});function l(h){return o[h]===void 0}Object.keys(a).forEach(h=>{const m=n[h].fileIDs.filter(l);if(m.length===0){delete a[h];return}const{capabilities:p}=this.getState();if(m.length!==n[h].fileIDs.length&&!p.individualCancellation)throw new Error("individualCancellation is disabled");a[h]={...n[h],fileIDs:m}});const u={currentUploads:a,files:s};Object.keys(s).length===0&&(u.allowNewUpload=!0,u.error=null,u.recoveredState=null),this.setState(u),this.calculateTotalProgress();const d=Object.keys(o);d.forEach(h=>{this.emit("file-removed",o[h],e)}),d.length>5?this.log(`Removed ${d.length} files`):this.log(`Removed files: ${d.join(", ")}`)}removeFile(t,e){e===void 0&&(e=null),this.removeFiles([t],e)}pauseResume(t){if(!this.getState().capabilities.resumableUploads||this.getFile(t).uploadComplete)return;const i=!(this.getFile(t).isPaused||!1);return this.setFileState(t,{isPaused:i}),this.emit("upload-pause",t,i),i}pauseAll(){const t={...this.getState().files};Object.keys(t).filter(i=>!t[i].progress.uploadComplete&&t[i].progress.uploadStarted).forEach(i=>{const n={...t[i],isPaused:!0};t[i]=n}),this.setState({files:t}),this.emit("pause-all")}resumeAll(){const t={...this.getState().files};Object.keys(t).filter(i=>!t[i].progress.uploadComplete&&t[i].progress.uploadStarted).forEach(i=>{const n={...t[i],isPaused:!1,error:null};t[i]=n}),this.setState({files:t}),this.emit("resume-all")}retryAll(){const t={...this.getState().files},e=Object.keys(t).filter(n=>t[n].error);if(e.forEach(n=>{const s={...t[n],isPaused:!1,error:null};t[n]=s}),this.setState({files:t,error:null}),this.emit("retry-all",e),e.length===0)return Promise.resolve({successful:[],failed:[]});const i=Z(this,Kt)[Kt](e,{forceAllowNewUpload:!0});return Z(this,Jt)[Jt](i)}cancelAll(t){let{reason:e="user"}=t===void 0?{}:t;if(this.emit("cancel-all",{reason:e}),e==="user"){const{files:i}=this.getState(),n=Object.keys(i);n.length&&this.removeFiles(n,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}retryUpload(t){this.setFileState(t,{error:null,isPaused:!1}),this.emit("upload-retry",t);const e=Z(this,Kt)[Kt]([t],{forceAllowNewUpload:!0});return Z(this,Jt)[Jt](e)}logout(){this.iteratePlugins(t=>{t.provider&&t.provider.logout&&t.provider.logout()})}calculateTotalProgress(){const e=this.getFiles().filter(u=>u.progress.uploadStarted||u.progress.preprocess||u.progress.postprocess);if(e.length===0){this.emit("progress",0),this.setState({totalProgress:0});return}const i=e.filter(u=>u.progress.bytesTotal!=null),n=e.filter(u=>u.progress.bytesTotal==null);if(i.length===0){const u=e.length*100,d=n.reduce((m,p)=>m+p.progress.percentage,0),h=Math.round(d/u*100);this.setState({totalProgress:h});return}let s=i.reduce((u,d)=>u+d.progress.bytesTotal,0);const a=s/i.length;s+=a*n.length;let o=0;i.forEach(u=>{o+=u.progress.bytesUploaded}),n.forEach(u=>{o+=a*(u.progress.percentage||0)/100});let l=s===0?0:Math.round(o/s*100);l>100&&(l=100),this.setState({totalProgress:l}),this.emit("progress",l)}updateOnlineStatus(){(typeof window.navigator.onLine<"u"?window.navigator.onLine:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(t,e){if(typeof t!="function"){const a=`Expected a plugin class, but got ${t===null?"null":typeof t}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(a)}const i=new t(this,e),n=i.id;if(!n)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const s=this.getPlugin(n);if(s){const a=`Already found a plugin named '${s.id}'. Tried to use: '${n}'.
Uppy plugins must have unique \`id\` options. See https://uppy.io/docs/plugins/#id.`;throw new Error(a)}return t.VERSION&&this.log(`Using ${n} v${t.VERSION}`),i.type in Z(this,Ft)[Ft]?Z(this,Ft)[Ft][i.type].push(i):Z(this,Ft)[Ft][i.type]=[i],i.install(),this}getPlugin(t){for(const e of Object.values(Z(this,Ft)[Ft])){const i=e.find(n=>n.id===t);if(i!=null)return i}}[Bn](t){return Z(this,Ft)[Ft][t]}iteratePlugins(t){Object.values(Z(this,Ft)[Ft]).flat(1).forEach(t)}removePlugin(t){this.log(`Removing plugin ${t.id}`),this.emit("plugin-remove",t),t.uninstall&&t.uninstall();const e=Z(this,Ft)[Ft][t.type],i=e.findIndex(a=>a.id===t.id);i!==-1&&e.splice(i,1);const s={plugins:{...this.getState().plugins,[t.id]:void 0}};this.setState(s)}close(t){let{reason:e}=t===void 0?{}:t;this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll({reason:e}),Z(this,Ve)[Ve](),this.iteratePlugins(i=>{this.removePlugin(i)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",Z(this,$t)[$t]),window.removeEventListener("offline",Z(this,$t)[$t]))}hideInfo(){const{info:t}=this.getState();this.setState({info:t.slice(1)}),this.emit("info-hidden")}info(t,e,i){e===void 0&&(e="info"),i===void 0&&(i=3e3);const n=typeof t=="object";this.setState({info:[...this.getState().info,{type:e,message:n?t.message:t,details:n?t.details:null}]}),setTimeout(()=>this.hideInfo(),i),this.emit("info-visible")}log(t,e){const{logger:i}=this.opts;switch(e){case"error":i.error(t);break;case"warning":i.warn(t);break;default:i.debug(t);break}}restore(t){return this.log(`Core: attempting to restore upload "${t}"`),this.getState().currentUploads[t]?Z(this,Jt)[Jt](t):(Z(this,Se)[Se](t),Promise.reject(new Error("Nonexistent upload")))}[Rn](){return Z(this,Kt)[Kt](...arguments)}addResultData(t,e){if(!Z(this,Ji)[Ji](t)){this.log(`Not setting result for an upload that has been removed: ${t}`);return}const{currentUploads:i}=this.getState(),n={...i[t],result:{...i[t].result,...e}};this.setState({currentUploads:{...i,[t]:n}})}upload(){var t;(t=Z(this,Ft)[Ft].uploader)!=null&&t.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();const i=this.opts.onBeforeUpload(e);return i===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(i&&typeof i=="object"&&(e=i,this.setState({files:e})),Promise.resolve().then(()=>Z(this,Pt)[Pt].validateMinNumberOfFiles(e)).catch(n=>{throw Z(this,Ot)[Ot]([n]),n}).then(()=>{if(!Z(this,Zi)[Zi](e))throw new Mt(this.i18n("missingRequiredMetaField"))}).catch(n=>{throw n}).then(()=>{const{currentUploads:n}=this.getState(),s=Object.values(n).flatMap(l=>l.fileIDs),a=[];Object.keys(e).forEach(l=>{const u=this.getFile(l);!u.progress.uploadStarted&&s.indexOf(l)===-1&&a.push(u.id)});const o=Z(this,Kt)[Kt](a);return Z(this,Jt)[Jt](o)}).catch(n=>{throw this.emit("error",n),this.log(n,"error"),n}))}};function xl(r){for(const s of r){const{file:a,isRestriction:o}=s;o?this.emit("restriction-failed",a,s):this.emit("error",s),this.log(s,"warning")}const t=r.filter(s=>s.isUserFacing),e=4,i=t.slice(0,e),n=t.slice(e);i.forEach(s=>{let{message:a,details:o=""}=s;this.info({message:a,details:o},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function El(r){const{missingFields:t,error:e}=Z(this,Pt)[Pt].getMissingRequiredMetaFields(r);return t.length>0?(this.setFileState(r.id,{missingRequiredMetaFields:t}),this.log(e.message),this.emit("restriction-failed",r,e),!1):!0}function Tl(r){let t=!0;for(const e of Object.values(r))Z(this,ui)[ui](e)||(t=!1);return t}function Al(r){const{allowNewUpload:t}=this.getState();if(t===!1){const e=new Mt(this.i18n("noMoreFilesAllowed"),{file:r});throw Z(this,Ot)[Ot]([e]),e}}function Pl(r){const t=r instanceof File?{name:r.name,type:r.type,size:r.size,data:r}:r,e=In(t),i=fl(e,t),n=Dn(i).extension,s=!!t.isRemote,a=cl(t),o=t.meta||{};o.name=i,o.type=e;const l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:a,name:i,extension:n||"",meta:{...this.getState().meta,...o},type:e,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isRemote:s,remote:t.remote||"",preview:t.preview}}function Ol(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(r=>{r.isRestriction||this.log(r.stack||r.message||r)})},4))}function Dl(r){const{files:t}=this.getState(),e={...t},i=[],n=[];for(const a of r)try{var s;let o=Z(this,_r)[_r](a);if((s=t[o.id])!=null&&s.isGhost){const{isGhost:u,...d}=t[o.id];o={...d,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${o.name}, ${o.id}`)}const l=this.opts.onBeforeFileAdded(o,e);if(!l&&this.checkIfFileAlreadyExists(o.id))throw new Mt(this.i18n("noDuplicates",{fileName:o.name}),{file:a});if(l===!1)throw new Mt("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof l=="object"&&l!==null&&(o=l),Z(this,Pt)[Pt].validateSingleFile(o),e[o.id]=o,i.push(o)}catch(o){n.push(o)}try{Z(this,Pt)[Pt].validateAggregateRestrictions(Object.values(t),i)}catch(a){return n.push(a),{nextFilesState:t,validFilesToAdd:[],errors:n}}return{nextFilesState:e,validFilesToAdd:i,errors:n}}function Il(){const r=(i,n,s)=>{let a=i.message||"Unknown error";i.details&&(a+=` ${i.details}`),this.setState({error:a}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:a,response:s})};this.on("error",r),this.on("upload-error",(i,n,s)=>{if(r(n,i,s),typeof n=="object"&&n.message){this.log(n.message,"error");const a=new Error(this.i18n("failedToUpload",{file:i==null?void 0:i.name}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),Z(this,Ot)[Ot]([a])}else Z(this,Ot)[Ot]([n])});let t;this.on("upload-stalled",(i,n)=>{const{message:s}=i,a=n.map(o=>o.meta.name).join(", ");t||(this.info({message:s,details:a},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${s} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const e=i=>{const n=i.filter(a=>{const o=a!=null&&this.getFile(a.id);return o||this.log(`Not setting progress for a file that has been removed: ${a==null?void 0:a.id}`),o}),s=Object.fromEntries(n.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(s)};this.on("upload-start",i=>{i.forEach(n=>{this.emit("upload-started",n)}),e(i)}),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const s=this.getFile(i.id).progress;this.setFileState(i.id,{progress:{...s,postprocess:Z(this,ie)[ie].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:s.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),i.size==null&&this.setFileState(i.id,{size:n.bytesUploaded||s.bytesTotal}),this.calculateTotalProgress()}),this.on("preprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}this.setFileState(i.id,{progress:{...this.getFile(i.id).progress,preprocess:n}})}),this.on("preprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(i,n)=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}this.setFileState(i.id,{progress:{...this.getState().files[i.id].progress,postprocess:n}})}),this.on("postprocess-complete",i=>{if(i==null||!this.getFile(i.id)){this.log(`Not setting progress for a file that has been removed: ${i==null?void 0:i.id}`);return}const n={...this.getState().files};n[i.id]={...n[i.id],progress:{...n[i.id].progress}},delete n[i.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.calculateTotalProgress()}),this.on("dashboard:file-edit-complete",i=>{i&&Z(this,ui)[ui](i)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",Z(this,$t)[$t]),window.addEventListener("offline",Z(this,$t)[$t]),setTimeout(Z(this,$t)[$t],3e3))}function Nl(r,t){t===void 0&&(t={});const{forceAllowNewUpload:e=!1}=t,{allowNewUpload:i,currentUploads:n}=this.getState();if(!i&&!e)throw new Error("Cannot create a new upload: already uploading.");const s=Lr();return this.emit("upload",{id:s,fileIDs:r}),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[s]:{fileIDs:r,step:0,result:{}}}}),s}function Bl(r){const{currentUploads:t}=this.getState();return t[r]}function Rl(r){const t={...this.getState().currentUploads};delete t[r],this.setState({currentUploads:t})}async function zl(r){const t=()=>{const{currentUploads:s}=this.getState();return s[r]};let e=t();const i=[...Z(this,ye)[ye],...Z(this,be)[be],...Z(this,ie)[ie]];try{for(let s=e.step||0;s<i.length&&e;s++){const a=i[s];this.setState({currentUploads:{...this.getState().currentUploads,[r]:{...e,step:s}}});const{fileIDs:o}=e;await a(o,r),e=t()}}catch(s){throw Z(this,Se)[Se](r),s}if(e){e.fileIDs.forEach(l=>{const u=this.getFile(l);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const s=e.fileIDs.map(l=>this.getFile(l)),a=s.filter(l=>!l.error),o=s.filter(l=>l.error);await this.addResultData(r,{successful:a,failed:o,uploadID:r}),e=t()}let n;return e&&(n=e.result,this.emit("complete",n),Z(this,Se)[Se](r)),n==null&&this.log(`Not setting result for an upload that has been removed: ${r}`),n}zn.VERSION=Fl.version;var vi,rt,Un,_e,ys,Mn,wr,Ne={},Ln=[],Ul=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,$i=Array.isArray;function re(r,t){for(var e in t)r[e]=t[e];return r}function jn(r){var t=r.parentNode;t&&t.removeChild(r)}function _(r,t,e){var i,n,s,a={};for(s in t)s=="key"?i=t[s]:s=="ref"?n=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?vi.call(arguments,2):e),typeof r=="function"&&r.defaultProps!=null)for(s in r.defaultProps)a[s]===void 0&&(a[s]=r.defaultProps[s]);return oi(r,a,i,n,null)}function oi(r,t,e,i,n){var s={type:r,props:t,key:e,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:n??++Un};return n==null&&rt.vnode!=null&&rt.vnode(s),s}function Ml(){return{current:null}}function ue(r){return r.children}function Ht(r,t){this.props=r,this.context=t}function di(r,t){if(t==null)return r.__?di(r.__,r.__.__k.indexOf(r)+1):null;for(var e;t<r.__k.length;t++)if((e=r.__k[t])!=null&&e.__e!=null)return e.__e;return typeof r.type=="function"?di(r):null}function $n(r){var t,e;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,t=0;t<r.__k.length;t++)if((e=r.__k[t])!=null&&e.__e!=null){r.__e=r.__c.base=e.__e;break}return $n(r)}}function bs(r){(!r.__d&&(r.__d=!0)&&_e.push(r)&&!zi.__r++||ys!==rt.debounceRendering)&&((ys=rt.debounceRendering)||Mn)(zi)}function zi(){var r,t,e,i,n,s,a,o,l;for(_e.sort(wr);r=_e.shift();)r.__d&&(t=_e.length,i=void 0,n=void 0,s=void 0,o=(a=(e=r).__v).__e,(l=e.__P)&&(i=[],n=[],(s=re({},a)).__v=a.__v+1,$r(l,a,s,e.__n,l.ownerSVGElement!==void 0,a.__h!=null?[o]:null,i,o??di(a),a.__h,n),qn(i,a,n),a.__e!=o&&$n(a)),_e.length>t&&_e.sort(wr));zi.__r=0}function Hn(r,t,e,i,n,s,a,o,l,u,d){var h,m,p,g,f,y,b,w,k,T=0,x=i&&i.__k||Ln,F=x.length,A=F,N=t.length;for(e.__k=[],h=0;h<N;h++)(g=e.__k[h]=(g=t[h])==null||typeof g=="boolean"||typeof g=="function"?null:typeof g=="string"||typeof g=="number"||typeof g=="bigint"?oi(null,g,null,null,g):$i(g)?oi(ue,{children:g},null,null,null):g.__b>0?oi(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)!=null?(g.__=e,g.__b=e.__b+1,(w=Ll(g,x,b=h+T,A))===-1?p=Ne:(p=x[w]||Ne,x[w]=void 0,A--),$r(r,g,p,n,s,a,o,l,u,d),f=g.__e,(m=g.ref)&&p.ref!=m&&(p.ref&&Hr(p.ref,null,g),d.push(m,g.__c||f,g)),f!=null&&(y==null&&(y=f),(k=p===Ne||p.__v===null)?w==-1&&T--:w!==b&&(w===b+1?T++:w>b?A>N-b?T+=w-b:T--:T=w<b&&w==b-1?w-b:0),b=h+T,typeof g.type!="function"||w===b&&p.__k!==g.__k?typeof g.type=="function"||w===b&&!k?g.__d!==void 0?(l=g.__d,g.__d=void 0):l=f.nextSibling:l=Vn(r,f,l):l=Wn(g,l,r),typeof e.type=="function"&&(e.__d=l))):(p=x[h])&&p.key==null&&p.__e&&(p.__e==l&&(l=di(p)),Sr(p,p,!1),x[h]=null);for(e.__e=y,h=F;h--;)x[h]!=null&&(typeof e.type=="function"&&x[h].__e!=null&&x[h].__e==e.__d&&(e.__d=x[h].__e.nextSibling),Sr(x[h],x[h]))}function Wn(r,t,e){for(var i,n=r.__k,s=0;n&&s<n.length;s++)(i=n[s])&&(i.__=r,t=typeof i.type=="function"?Wn(i,t,e):Vn(e,i.__e,t));return t}function ne(r,t){return t=t||[],r==null||typeof r=="boolean"||($i(r)?r.some(function(e){ne(e,t)}):t.push(r)),t}function Vn(r,t,e){return e==null||e.parentNode!==r?r.insertBefore(t,null):t==e&&t.parentNode!=null||r.insertBefore(t,e),t.nextSibling}function Ll(r,t,e,i){var n=r.key,s=r.type,a=e-1,o=e+1,l=t[e];if(l===null||l&&n==l.key&&s===l.type)return e;if(i>(l!=null?1:0))for(;a>=0||o<t.length;){if(a>=0){if((l=t[a])&&n==l.key&&s===l.type)return a;a--}if(o<t.length){if((l=t[o])&&n==l.key&&s===l.type)return o;o++}}return-1}function jl(r,t,e,i,n){var s;for(s in e)s==="children"||s==="key"||s in t||Ui(r,s,null,e[s],i);for(s in t)n&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||e[s]===t[s]||Ui(r,s,t[s],e[s],i)}function _s(r,t,e){t[0]==="-"?r.setProperty(t,e??""):r[t]=e==null?"":typeof e!="number"||Ul.test(t)?e:e+"px"}function Ui(r,t,e,i,n){var s;t:if(t==="style")if(typeof e=="string")r.style.cssText=e;else{if(typeof i=="string"&&(r.style.cssText=i=""),i)for(t in i)e&&t in e||_s(r.style,t,"");if(e)for(t in e)i&&e[t]===i[t]||_s(r.style,t,e[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in r?t.toLowerCase().slice(2):t.slice(2),r.l||(r.l={}),r.l[t+s]=e,e?i||r.addEventListener(t,s?Ss:ws,s):r.removeEventListener(t,s?Ss:ws,s);else if(t!=="dangerouslySetInnerHTML"){if(n)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in r)try{r[t]=e??"";break t}catch{}typeof e=="function"||(e==null||e===!1&&t[4]!=="-"?r.removeAttribute(t):r.setAttribute(t,e))}}function ws(r){return this.l[r.type+!1](rt.event?rt.event(r):r)}function Ss(r){return this.l[r.type+!0](rt.event?rt.event(r):r)}function $r(r,t,e,i,n,s,a,o,l,u){var d,h,m,p,g,f,y,b,w,k,T,x,F,A,N,O=t.type;if(t.constructor!==void 0)return null;e.__h!=null&&(l=e.__h,o=t.__e=e.__e,t.__h=null,s=[o]),(d=rt.__b)&&d(t);t:if(typeof O=="function")try{if(b=t.props,w=(d=O.contextType)&&i[d.__c],k=d?w?w.props.value:d.__:i,e.__c?y=(h=t.__c=e.__c).__=h.__E:("prototype"in O&&O.prototype.render?t.__c=h=new O(b,k):(t.__c=h=new Ht(b,k),h.constructor=O,h.render=Hl),w&&w.sub(h),h.props=b,h.state||(h.state={}),h.context=k,h.__n=i,m=h.__d=!0,h.__h=[],h._sb=[]),h.__s==null&&(h.__s=h.state),O.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=re({},h.__s)),re(h.__s,O.getDerivedStateFromProps(b,h.__s))),p=h.props,g=h.state,h.__v=t,m)O.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(O.getDerivedStateFromProps==null&&b!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,k),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,k)===!1||t.__v===e.__v)){for(t.__v!==e.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=e.__e,t.__k=e.__k,t.__k.forEach(function(L){L&&(L.__=t)}),T=0;T<h._sb.length;T++)h.__h.push(h._sb[T]);h._sb=[],h.__h.length&&a.push(h);break t}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,k),h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,g,f)})}if(h.context=k,h.props=b,h.__P=r,h.__e=!1,x=rt.__r,F=0,"prototype"in O&&O.prototype.render){for(h.state=h.__s,h.__d=!1,x&&x(t),d=h.render(h.props,h.state,h.context),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[]}else do h.__d=!1,x&&x(t),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++F<25);h.state=h.__s,h.getChildContext!=null&&(i=re(re({},i),h.getChildContext())),m||h.getSnapshotBeforeUpdate==null||(f=h.getSnapshotBeforeUpdate(p,g)),Hn(r,$i(N=d!=null&&d.type===ue&&d.key==null?d.props.children:d)?N:[N],t,e,i,n,s,a,o,l,u),h.base=t.__e,t.__h=null,h.__h.length&&a.push(h),y&&(h.__E=h.__=null)}catch(L){t.__v=null,(l||s!=null)&&(t.__e=o,t.__h=!!l,s[s.indexOf(o)]=null),rt.__e(L,t,e)}else s==null&&t.__v===e.__v?(t.__k=e.__k,t.__e=e.__e):t.__e=$l(e.__e,t,e,i,n,s,a,l,u);(d=rt.diffed)&&d(t)}function qn(r,t,e){for(var i=0;i<e.length;i++)Hr(e[i],e[++i],e[++i]);rt.__c&&rt.__c(t,r),r.some(function(n){try{r=n.__h,n.__h=[],r.some(function(s){s.call(n)})}catch(s){rt.__e(s,n.__v)}})}function $l(r,t,e,i,n,s,a,o,l){var u,d,h,m=e.props,p=t.props,g=t.type,f=0;if(g==="svg"&&(n=!0),s!=null){for(;f<s.length;f++)if((u=s[f])&&"setAttribute"in u==!!g&&(g?u.localName===g:u.nodeType===3)){r=u,s[f]=null;break}}if(r==null){if(g===null)return document.createTextNode(p);r=n?document.createElementNS("http://www.w3.org/2000/svg",g):document.createElement(g,p.is&&p),s=null,o=!1}if(g===null)m===p||o&&r.data===p||(r.data=p);else{if(s=s&&vi.call(r.childNodes),d=(m=e.props||Ne).dangerouslySetInnerHTML,h=p.dangerouslySetInnerHTML,!o){if(s!=null)for(m={},f=0;f<r.attributes.length;f++)m[r.attributes[f].name]=r.attributes[f].value;(h||d)&&(h&&(d&&h.__html==d.__html||h.__html===r.innerHTML)||(r.innerHTML=h&&h.__html||""))}if(jl(r,p,m,n,o),h)t.__k=[];else if(Hn(r,$i(f=t.props.children)?f:[f],t,e,i,n&&g!=="foreignObject",s,a,s?s[0]:e.__k&&di(e,0),o,l),s!=null)for(f=s.length;f--;)s[f]!=null&&jn(s[f]);o||("value"in p&&(f=p.value)!==void 0&&(f!==r.value||g==="progress"&&!f||g==="option"&&f!==m.value)&&Ui(r,"value",f,m.value,!1),"checked"in p&&(f=p.checked)!==void 0&&f!==r.checked&&Ui(r,"checked",f,m.checked,!1))}return r}function Hr(r,t,e){try{typeof r=="function"?r(t):r.current=t}catch(i){rt.__e(i,e)}}function Sr(r,t,e){var i,n;if(rt.unmount&&rt.unmount(r),(i=r.ref)&&(i.current&&i.current!==r.__e||Hr(i,null,t)),(i=r.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(s){rt.__e(s,t)}i.base=i.__P=null,r.__c=void 0}if(i=r.__k)for(n=0;n<i.length;n++)i[n]&&Sr(i[n],t,e||typeof r.type!="function");e||r.__e==null||jn(r.__e),r.__=r.__e=r.__d=void 0}function Hl(r,t,e){return this.constructor(r,e)}function ks(r,t,e){var i,n,s,a;rt.__&&rt.__(r,t),n=(i=typeof e=="function")?null:e&&e.__k||t.__k,s=[],a=[],$r(t,r=(!i&&e||t).__k=_(ue,null,[r]),n||Ne,Ne,t.ownerSVGElement!==void 0,!i&&e?[e]:n?null:t.firstChild?vi.call(t.childNodes):null,s,!i&&e?e:n?n.__e:t.firstChild,i,a),qn(s,r,a)}function Gn(r,t,e){var i,n,s,a,o=re({},r.props);for(s in r.type&&r.type.defaultProps&&(a=r.type.defaultProps),t)s=="key"?i=t[s]:s=="ref"?n=t[s]:o[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(o.children=arguments.length>3?vi.call(arguments,2):e),oi(r.type,o,i||r.key,n||r.ref,null)}vi=Ln.slice,rt={__e:function(r,t,e,i){for(var n,s,a;t=t.__;)if((n=t.__c)&&!n.__)try{if((s=n.constructor)&&s.getDerivedStateFromError!=null&&(n.setState(s.getDerivedStateFromError(r)),a=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(r,i||{}),a=n.__d),a)return n.__E=n}catch(o){r=o}throw r}},Un=0,Ht.prototype.setState=function(r,t){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=re({},this.state),typeof r=="function"&&(r=r(re({},e),this.props)),r&&re(e,r),r!=null&&this.__v&&(t&&this._sb.push(t),bs(this))},Ht.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),bs(this))},Ht.prototype.render=ue,_e=[],Mn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wr=function(r,t){return r.__v.__b-t.__v.__b},zi.__r=0;function Xn(r){return(r==null?void 0:r.nodeType)===Node.ELEMENT_NODE}function Wl(r,t){return t===void 0&&(t=document),typeof r=="string"?t.querySelector(r):Xn(r)?r:null}function Yn(r){for(var t;r&&!r.dir;)r=r.parentNode;return(t=r)==null?void 0:t.dir}class Vl{constructor(t,e){e===void 0&&(e={}),this.uppy=t,this.opts=e}getPluginState(){const{plugins:t}=this.uppy.getState();return t[this.id]||{}}setPluginState(t){const{plugins:e}=this.uppy.getState();this.uppy.setState({plugins:{...e,[this.id]:{...e[this.id],...t}}})}setOptions(t){this.opts={...this.opts,...t},this.setPluginState(),this.i18nInit()}i18nInit(){const t=new Fn([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.setPluginState()}addTarget(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}render(){throw new Error("Extend the render method to add your plugin to a DOM element")}update(){}afterUpdate(){}}function Cs(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var ql=0;function Gl(r){return"__private_"+ql+++"_"+r}function Xl(r){let t=null,e=null;return function(){for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=n,t||(t=Promise.resolve().then(()=>(t=null,r(...e)))),t}}var Ye=Gl("updateUI");class Fe extends Vl{constructor(){super(...arguments),Object.defineProperty(this,Ye,{writable:!0,value:void 0})}getTargetPlugin(t){let e;if(typeof t=="object"&&t instanceof Fe)e=t;else if(typeof t=="function"){const i=t;this.uppy.iteratePlugins(n=>{n instanceof i&&(e=n)})}return e}mount(t,e){const i=e.id,n=Wl(t);if(n){this.isTargetDOMEl=!0;const o=document.createElement("div");return o.classList.add("uppy-Root"),Cs(this,Ye)[Ye]=Xl(l=>{this.uppy.getPlugin(this.id)&&(ks(this.render(l),o),this.afterUpdate())}),this.uppy.log(`Installing ${i} to a DOM element '${t}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),ks(this.render(this.uppy.getState()),o),this.el=o,n.appendChild(o),o.dir=this.opts.direction||Yn(o)||"ltr",this.onMount(),this.el}const s=this.getTargetPlugin(t);if(s)return this.uppy.log(`Installing ${i} to ${s.id}`),this.parent=s,this.el=s.addTarget(e),this.onMount(),this.el;this.uppy.log(`Not installing ${i}`);let a=`Invalid target option given to ${i}.`;throw typeof t=="function"?a+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":a+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(a)}update(t){if(this.el!=null){var e,i;(e=(i=Cs(this,Ye))[Ye])==null||e.call(i,t)}}unmount(){if(this.isTargetDOMEl){var t;(t=this.el)==null||t.remove()}this.onUnmount()}onMount(){}onUnmount(){}}function Fs(r,t,e,i){return e===0||r===t?r:i===0?t:r+(t-r)*2**(-i/e)}const Bt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var Dt={},Yl={get exports(){return Dt},set exports(r){Dt=r}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(r){(function(){var t={}.hasOwnProperty;function e(){for(var i=[],n=0;n<arguments.length;n++){var s=arguments[n];if(s){var a=typeof s;if(a==="string"||a==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var o=e.apply(null,s);o&&i.push(o)}}else if(a==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var l in s)t.call(s,l)&&s[l]&&i.push(l)}}}return i.join(" ")}r.exports?(e.default=e,r.exports=e):window.classNames=e})()})(Yl);function Qi(r){const t=[];let e,i;for(const{progress:s}of Object.values(r)){const{preprocess:a,postprocess:o}=s;i==null&&(a||o)&&({mode:e,message:i}=a||o),(a==null?void 0:a.mode)==="determinate"&&t.push(a.value),(o==null?void 0:o.mode)==="determinate"&&t.push(o.value)}const n=t.reduce((s,a)=>s+a/t.length,0);return{mode:e,message:i,value:n}}function Zl(r){const t=Math.floor(r/3600)%24,e=Math.floor(r/60)%60,i=Math.floor(r%60);return{hours:t,minutes:e,seconds:i}}function Kl(r){const t=Zl(r),e=t.hours===0?"":`${t.hours}h`,i=t.minutes===0?"":`${t.hours===0?t.minutes:` ${t.minutes.toString(10).padStart(2,"0")}`}m`,n=t.hours!==0?"":`${t.minutes===0?t.seconds:` ${t.seconds.toString(10).padStart(2,"0")}`}s`;return`${e}${i}${n}`}const Jl="·",xs=()=>` ${Jl} `;function Ql(r){const{newFiles:t,isUploadStarted:e,recoveredState:i,i18n:n,uploadState:s,isSomeGhost:a,startUpload:o}=r,l=Dt("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":s===Bt.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":a}),u=t&&e&&!i?n("uploadXNewFiles",{smart_count:t}):n("uploadXFiles",{smart_count:t});return _("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:t}),onClick:o,disabled:a,"data-uppy-super-focusable":!0},u)}function th(r){const{i18n:t,uppy:e}=r;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:()=>e.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},_("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t("retry"))}function eh(r){const{i18n:t,uppy:e}=r;return _("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:()=>e.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},_("g",{fill:"none",fillRule:"evenodd"},_("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),_("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function ih(r){const{isAllPaused:t,i18n:e,isAllComplete:i,resumableUploads:n,uppy:s}=r,a=e(t?"resume":"pause");function o(){return i?null:n?t?s.resumeAll():s.pauseAll():s.cancelAll()}return _("button",{title:a,"aria-label":a,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:o,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},_("g",{fill:"none",fillRule:"evenodd"},_("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),_("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function rh(r){const{i18n:t,doneButtonHandler:e}=r;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:e,"data-uppy-super-focusable":!0},t("done"))}function Zn(){return _("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},_("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function sh(r){const{progress:t}=r,{value:e,mode:i,message:n}=t,s=Math.round(e*100),a="·";return _("div",{className:"uppy-StatusBar-content"},_(Zn,null),i==="determinate"?`${s}% ${a} `:"",n)}function nh(r){const{numUploads:t,complete:e,totalUploadedSize:i,totalSize:n,totalETA:s,i18n:a}=r,o=t>1;return _("div",{className:"uppy-StatusBar-statusSecondary"},o&&a("filesUploadedOfTotal",{complete:e,smart_count:t}),_("span",{className:"uppy-StatusBar-additionalInfo"},o&&xs(),a("dataUploadedOfTotal",{complete:ai(i),total:ai(n)}),xs(),a("xTimeLeft",{time:Kl(s)})))}function Kn(r){const{i18n:t,complete:e,numUploads:i}=r;return _("div",{className:"uppy-StatusBar-statusSecondary"},t("filesUploadedOfTotal",{complete:e,smart_count:i}))}function ah(r){const{i18n:t,newFiles:e,startUpload:i}=r,n=Dt("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return _("div",{className:"uppy-StatusBar-statusSecondary"},_("div",{className:"uppy-StatusBar-statusSecondaryHint"},t("xMoreFilesAdded",{smart_count:e})),_("button",{type:"button",className:n,"aria-label":t("uploadXFiles",{smart_count:e}),onClick:i},t("upload")))}function oh(r){const{i18n:t,supportsUploadProgress:e,totalProgress:i,showProgressDetails:n,isUploadStarted:s,isAllComplete:a,isAllPaused:o,newFiles:l,numUploads:u,complete:d,totalUploadedSize:h,totalSize:m,totalETA:p,startUpload:g}=r,f=l&&s;if(!s||a)return null;const y=t(o?"paused":"uploading");function b(){return!o&&!f&&n?e?_(nh,{numUploads:u,complete:d,totalUploadedSize:h,totalSize:m,totalETA:p,i18n:t}):_(Kn,{i18n:t,complete:d,numUploads:u}):null}return _("div",{className:"uppy-StatusBar-content","aria-label":y,title:y},o?null:_(Zn,null),_("div",{className:"uppy-StatusBar-status"},_("div",{className:"uppy-StatusBar-statusPrimary"},e?`${y}: ${i}%`:y),b(),f?_(ah,{i18n:t,newFiles:l,startUpload:g}):null))}function lh(r){const{i18n:t}=r;return _("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},_("div",{className:"uppy-StatusBar-status"},_("div",{className:"uppy-StatusBar-statusPrimary"},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},_("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))}function hh(r){const{error:t,i18n:e,complete:i,numUploads:n}=r;function s(){const a=`${e("uploadFailed")} 

 ${t}`;alert(a)}return _("div",{className:"uppy-StatusBar-content",title:e("uploadFailed")},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},_("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),_("div",{className:"uppy-StatusBar-status"},_("div",{className:"uppy-StatusBar-statusPrimary"},e("uploadFailed"),_("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":e("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:s,type:"button"},"?")),_(Kn,{i18n:e,complete:i,numUploads:n})))}const{STATE_ERROR:Es,STATE_WAITING:Ts,STATE_PREPROCESSING:tr,STATE_UPLOADING:Si,STATE_POSTPROCESSING:er,STATE_COMPLETE:ki}=Bt;function uh(r){const{newFiles:t,allowNewUpload:e,isUploadInProgress:i,isAllPaused:n,resumableUploads:s,error:a,hideUploadButton:o,hidePauseResumeButton:l,hideCancelButton:u,hideRetryButton:d,recoveredState:h,uploadState:m,totalProgress:p,files:g,supportsUploadProgress:f,hideAfterFinish:y,isSomeGhost:b,doneButtonHandler:w,isUploadStarted:k,i18n:T,startUpload:x,uppy:F,isAllComplete:A,showProgressDetails:N,numUploads:O,complete:L,totalSize:K,totalETA:E,totalUploadedSize:z}=r;function v(){switch(m){case er:case tr:{const ft=Qi(g);return ft.mode==="determinate"?ft.value*100:p}case Es:return null;case Si:return f?p:null;default:return p}}function U(){switch(m){case er:case tr:{const{mode:ft}=Qi(g);return ft==="indeterminate"}case Si:return!f;default:return!1}}function J(){if(h)return!1;switch(m){case Ts:return o||t===0;case ki:return y;default:return!1}}const $=v(),it=J(),W=$??100,et=!a&&t&&!i&&!n&&e&&!o,B=!u&&m!==Ts&&m!==ki,I=s&&!l&&m===Si,Q=a&&!A&&!d,X=w&&m===ki,G=Dt("uppy-StatusBar-progress",{"is-indeterminate":U()}),ct=Dt("uppy-StatusBar",`is-${m}`,{"has-ghosts":b});return _("div",{className:ct,"aria-hidden":it},_("div",{className:G,style:{width:`${W}%`},role:"progressbar","aria-label":`${W}%`,"aria-valuetext":`${W}%`,"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":$}),(()=>{switch(m){case tr:case er:return _(sh,{progress:Qi(g)});case ki:return _(lh,{i18n:T});case Es:return _(hh,{error:a,i18n:T,numUploads:O,complete:L});case Si:return _(oh,{i18n:T,supportsUploadProgress:f,totalProgress:p,showProgressDetails:N,isUploadStarted:k,isAllComplete:A,isAllPaused:n,newFiles:t,numUploads:O,complete:L,totalUploadedSize:z,totalSize:K,totalETA:E,startUpload:x});default:return null}})(),_("div",{className:"uppy-StatusBar-actions"},h||et?_(Ql,{newFiles:t,isUploadStarted:k,recoveredState:h,i18n:T,isSomeGhost:b,startUpload:x,uploadState:m}):null,Q?_(th,{i18n:T,uppy:F}):null,I?_(ih,{isAllPaused:n,i18n:T,isAllComplete:A,resumableUploads:s,uppy:F}):null,B?_(eh,{i18n:T,uppy:F}):null,X?_(rh,{i18n:T,doneButtonHandler:w}):null))}const dh={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function pt(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var ch=0;function ze(r){return"__private_"+ch+++"_"+r}const ph={version:"3.2.4"},fh=2e3,mh=2e3;function gh(r,t,e,i){if(r)return Bt.STATE_ERROR;if(t)return Bt.STATE_COMPLETE;if(e)return Bt.STATE_WAITING;let n=Bt.STATE_WAITING;const s=Object.keys(i);for(let a=0;a<s.length;a++){const{progress:o}=i[s[a]];if(o.uploadStarted&&!o.uploadComplete)return Bt.STATE_UPLOADING;o.preprocess&&n!==Bt.STATE_UPLOADING&&(n=Bt.STATE_PREPROCESSING),o.postprocess&&n!==Bt.STATE_UPLOADING&&n!==Bt.STATE_PREPROCESSING&&(n=Bt.STATE_POSTPROCESSING)}return n}var Rt=ze("lastUpdateTime"),Lt=ze("previousUploadedBytes"),ee=ze("previousSpeed"),At=ze("previousETA"),ir=ze("computeSmoothETA"),Ze=ze("onUploadStart");class Jn extends Fe{constructor(t,e){super(t,e),Object.defineProperty(this,ir,{value:vh}),Object.defineProperty(this,Rt,{writable:!0,value:void 0}),Object.defineProperty(this,Lt,{writable:!0,value:void 0}),Object.defineProperty(this,ee,{writable:!0,value:void 0}),Object.defineProperty(this,At,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,Ze,{writable:!0,value:()=>{const{recoveredState:n}=this.uppy.getState();if(pt(this,ee)[ee]=null,pt(this,At)[At]=null,n){pt(this,Lt)[Lt]=Object.values(n.files).reduce((s,a)=>{let{progress:o}=a;return s+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}pt(this,Rt)[Rt]=performance.now(),pt(this,Lt)[Lt]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=dh;const i={target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};this.opts={...i,...e},this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(t){const{capabilities:e,files:i,allowNewUpload:n,totalProgress:s,error:a,recoveredState:o}=t,{newFiles:l,startedFiles:u,completeFiles:d,isUploadStarted:h,isAllComplete:m,isAllErrored:p,isAllPaused:g,isUploadInProgress:f,isSomeGhost:y}=this.uppy.getObjectOfFilesPerState(),b=o?Object.values(i):l,w=!!e.resumableUploads,k=e.uploadProgress!==!1;let T=0,x=0;u.forEach(A=>{T+=A.progress.bytesTotal||0,x+=A.progress.bytesUploaded||0});const F=pt(this,ir)[ir]({uploaded:x,total:T,remaining:T-x});return uh({error:a,uploadState:gh(a,m,o,t.files||{}),allowNewUpload:n,totalProgress:s,totalSize:T,totalUploadedSize:x,isAllComplete:!1,isAllPaused:g,isAllErrored:p,isUploadStarted:h,isUploadInProgress:f,isSomeGhost:y,recoveredState:o,complete:d.length,newFiles:b.length,numUploads:u.length,totalETA:F,files:i,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:w,supportsUploadProgress:k,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}onMount(){const t=this.el;Yn(t)||(t.dir="ltr")}install(){const{target:t}=this.opts;t&&this.mount(t,this),this.uppy.on("upload",pt(this,Ze)[Ze]),pt(this,Rt)[Rt]=performance.now(),pt(this,Lt)[Lt]=this.uppy.getFiles().reduce((e,i)=>e+i.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",pt(this,Ze)[Ze])}}function vh(r){var t,e;if(r.total===0||r.remaining===0)return 0;(e=(t=pt(this,Rt))[Rt])!=null||(t[Rt]=performance.now());const i=performance.now()-pt(this,Rt)[Rt];if(i===0){var n;return Math.round(((n=pt(this,At)[At])!=null?n:0)/100)/10}const s=r.uploaded-pt(this,Lt)[Lt];if(pt(this,Lt)[Lt]=r.uploaded,s<=0){var a;return Math.round(((a=pt(this,At)[At])!=null?a:0)/100)/10}const o=s/i,l=pt(this,ee)[ee]==null?o:Fs(o,pt(this,ee)[ee],fh,i);pt(this,ee)[ee]=l;const u=r.remaining/l,d=Math.max(pt(this,At)[At]-i,0),h=pt(this,At)[At]==null?u:Fs(u,d,mh,i);return pt(this,At)[At]=h,pt(this,Rt)[Rt]=performance.now(),Math.round(h/100)/10}Jn.VERSION=ph.version;const As=300;class yh extends Ht{constructor(){super(...arguments),this.ref=Ml()}componentWillEnter(t){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(t,As)}componentWillLeave(t){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(t,As)}render(){const{children:t}=this.props;return _("div",{className:"uppy-Informer-animated",ref:this.ref},t)}}function bh(r,t){return Object.assign(r,t)}function _h(r,t){var e;return(e=r==null?void 0:r.key)!=null?e:t}function wh(r,t){const e=r._ptgLinkedRefs||(r._ptgLinkedRefs={});return e[t]||(e[t]=i=>{r.refs[t]=i})}function Ke(r){const t={};for(let e=0;e<r.length;e++)if(r[e]!=null){const i=_h(r[e],e.toString(36));t[i]=r[e]}return t}function Sh(r,t){r=r||{},t=t||{};const e=a=>t.hasOwnProperty(a)?t[a]:r[a],i={};let n=[];for(const a in r)t.hasOwnProperty(a)?n.length&&(i[a]=n,n=[]):n.push(a);const s={};for(const a in t){if(i.hasOwnProperty(a))for(let o=0;o<i[a].length;o++){const l=i[a][o];s[i[a][o]]=e(l)}s[a]=e(a)}for(let a=0;a<n.length;a++)s[n[a]]=e(n[a]);return s}const kh=r=>r;class Qn extends Ht{constructor(t,e){super(t,e),this.refs={},this.state={children:Ke(ne(ne(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){const t=this.state.children;for(const e in t)t[e]&&this.performAppear(e)}componentWillReceiveProps(t){const e=Ke(ne(t.children)||[]),i=this.state.children;this.setState(s=>({children:Sh(s.children,e)}));let n;for(n in e)if(e.hasOwnProperty(n)){const s=i&&i.hasOwnProperty(n);e[n]&&s&&this.currentlyTransitioningKeys[n]?(this.keysToEnter.push(n),this.keysToAbortLeave.push(n)):e[n]&&!s&&!this.currentlyTransitioningKeys[n]&&this.keysToEnter.push(n)}for(n in i)if(i.hasOwnProperty(n)){const s=e&&e.hasOwnProperty(n);i[n]&&!s&&!this.currentlyTransitioningKeys[n]&&this.keysToLeave.push(n)}}componentDidUpdate(){const{keysToEnter:t}=this;this.keysToEnter=[],t.forEach(this.performEnter);const{keysToLeave:e}=this;this.keysToLeave=[],e.forEach(this.performLeave)}_finishAbort(t){const e=this.keysToAbortLeave.indexOf(t);e!==-1&&this.keysToAbortLeave.splice(e,1)}performAppear(t){this.currentlyTransitioningKeys[t]=!0;const e=this.refs[t];e!=null&&e.componentWillAppear?e.componentWillAppear(this._handleDoneAppearing.bind(this,t)):this._handleDoneAppearing(t)}_handleDoneAppearing(t){const e=this.refs[t];e!=null&&e.componentDidAppear&&e.componentDidAppear(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const i=Ke(ne(this.props.children)||[]);(!i||!i.hasOwnProperty(t))&&this.performLeave(t)}performEnter(t){this.currentlyTransitioningKeys[t]=!0;const e=this.refs[t];e!=null&&e.componentWillEnter?e.componentWillEnter(this._handleDoneEntering.bind(this,t)):this._handleDoneEntering(t)}_handleDoneEntering(t){const e=this.refs[t];e!=null&&e.componentDidEnter&&e.componentDidEnter(),delete this.currentlyTransitioningKeys[t],this._finishAbort(t);const i=Ke(ne(this.props.children)||[]);(!i||!i.hasOwnProperty(t))&&this.performLeave(t)}performLeave(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;this.currentlyTransitioningKeys[t]=!0;const i=this.refs[t];i!=null&&i.componentWillLeave?i.componentWillLeave(this._handleDoneLeaving.bind(this,t)):this._handleDoneLeaving(t)}_handleDoneLeaving(t){if(this.keysToAbortLeave.indexOf(t)!==-1)return;const i=this.refs[t];i!=null&&i.componentDidLeave&&i.componentDidLeave(),delete this.currentlyTransitioningKeys[t];const n=Ke(ne(this.props.children)||[]);if(n&&n.hasOwnProperty(t))this.performEnter(t);else{const s=bh({},this.state.children);delete s[t],this.setState({children:s})}}render(t,e){let{childFactory:i,transitionLeave:n,transitionName:s,transitionAppear:a,transitionEnter:o,transitionLeaveTimeout:l,transitionEnterTimeout:u,transitionAppearTimeout:d,component:h,...m}=t,{children:p}=e;const g=Object.entries(p).map(f=>{let[y,b]=f;if(!b)return;const w=wh(this,y);return Gn(i(b),{ref:w,key:y})}).filter(Boolean);return _(h,m,g)}}Qn.defaultProps={component:"span",childFactory:kh};const Ch={version:"3.0.3"};class ta extends Fe{constructor(t,e){super(t,e),this.render=n=>_("div",{className:"uppy uppy-Informer"},_(Qn,null,n.info.map(s=>_(yh,{key:s.message},_("p",{role:"alert"},s.message," ",s.details&&_("span",{"aria-label":s.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${s.message} 

 ${s.details}`)},"?")))))),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer";const i={};this.opts={...i,...e}}install(){const{target:t}=this.opts;t&&this.mount(t,this)}}ta.VERSION=Ch.version;const Fh=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function xh(r,t,e){var i,n;const s=Fh.exec(r),a=(i=(n=t.mimeType)!=null?n:s==null?void 0:s[1])!=null?i:"plain/text";let o;if(s[2]!=null){const l=atob(decodeURIComponent(s[3])),u=new Uint8Array(l.length);for(let d=0;d<l.length;d++)u[d]=l.charCodeAt(d);o=[u]}else o=[decodeURIComponent(s[3])];return e?new File(o,t.name||"",{type:a}):new Blob(o,{type:a})}function Ps(r){return r.startsWith("blob:")}function Os(r){return r?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(r):!1}function lt(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var ea=typeof self<"u"?self:global;const ci=typeof navigator<"u",Eh=ci&&typeof HTMLImageElement>"u",Ds=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),ia=ea.Buffer,ra=!!ia,Th=r=>r!==void 0;function sa(r){return r===void 0||(r instanceof Map?r.size===0:Object.values(r).filter(Th).length===0)}function Ct(r){let t=new Error(r);throw delete t.stack,t}function Is(r){let t=function(e){let i=0;return e.ifd0.enabled&&(i+=1024),e.exif.enabled&&(i+=2048),e.makerNote&&(i+=2048),e.userComment&&(i+=1024),e.gps.enabled&&(i+=512),e.interop.enabled&&(i+=100),e.ifd1.enabled&&(i+=1024),i+2048}(r);return r.jfif.enabled&&(t+=50),r.xmp.enabled&&(t+=2e4),r.iptc.enabled&&(t+=14e3),r.icc.enabled&&(t+=6e3),t}const rr=r=>String.fromCharCode.apply(null,r),Ns=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;let pi=class Pe{static from(t,e){return t instanceof this&&t.le===e?t:new Pe(t,void 0,void 0,e)}constructor(t,e=0,i,n){if(typeof n=="boolean"&&(this.le=n),Array.isArray(t)&&(t=new Uint8Array(t)),t===0)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){i===void 0&&(i=t.byteLength-e);let s=new DataView(t,e,i);this._swapDataView(s)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof Pe){i===void 0&&(i=t.byteLength-e),(e+=t.byteOffset)+i>t.byteOffset+t.byteLength&&Ct("Creating view outside of available memory in ArrayBuffer");let s=new DataView(t.buffer,e,i);this._swapDataView(s)}else if(typeof t=="number"){let s=new DataView(new ArrayBuffer(t));this._swapDataView(s)}else Ct("Invalid input argument for BufferView: "+t)}_swapArrayBuffer(t){this._swapDataView(new DataView(t))}_swapBuffer(t){this._swapDataView(new DataView(t.buffer,t.byteOffset,t.byteLength))}_swapDataView(t){this.dataView=t,this.buffer=t.buffer,this.byteOffset=t.byteOffset,this.byteLength=t.byteLength}_lengthToEnd(t){return this.byteLength-t}set(t,e,i=Pe){return t instanceof DataView||t instanceof Pe?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Ct("BufferView.set(): Invalid data argument."),this.toUint8().set(t,e),new i(this,e,t.byteLength)}subarray(t,e){return e=e||this._lengthToEnd(t),new Pe(this,t,e)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(t,e){return new Uint8Array(this.buffer,this.byteOffset+t,e)}getString(t=0,e=this.byteLength){return n=this.getUint8Array(t,e),Ns?Ns.decode(n):ra?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(rr(n)));var n}getLatin1String(t=0,e=this.byteLength){let i=this.getUint8Array(t,e);return rr(i)}getUnicodeString(t=0,e=this.byteLength){const i=[];for(let n=0;n<e&&t+n<this.byteLength;n+=2)i.push(this.getUint16(t+n));return rr(i)}getInt8(t){return this.dataView.getInt8(t)}getUint8(t){return this.dataView.getUint8(t)}getInt16(t,e=this.le){return this.dataView.getInt16(t,e)}getInt32(t,e=this.le){return this.dataView.getInt32(t,e)}getUint16(t,e=this.le){return this.dataView.getUint16(t,e)}getUint32(t,e=this.le){return this.dataView.getUint32(t,e)}getFloat32(t,e=this.le){return this.dataView.getFloat32(t,e)}getFloat64(t,e=this.le){return this.dataView.getFloat64(t,e)}getFloat(t,e=this.le){return this.dataView.getFloat32(t,e)}getDouble(t,e=this.le){return this.dataView.getFloat64(t,e)}getUintBytes(t,e,i){switch(e){case 1:return this.getUint8(t,i);case 2:return this.getUint16(t,i);case 4:return this.getUint32(t,i);case 8:return this.getUint64&&this.getUint64(t,i)}}getUint(t,e,i){switch(e){case 8:return this.getUint8(t,i);case 16:return this.getUint16(t,i);case 32:return this.getUint32(t,i);case 64:return this.getUint64&&this.getUint64(t,i)}}toString(t){return this.dataView.toString(t,this.constructor.name)}ensureChunk(){}};function kr(r,t){Ct(`${r} '${t}' was not loaded, try using full build of exifr.`)}let Wr=class extends Map{constructor(t){super(),this.kind=t}get(t,e){return this.has(t)||kr(this.kind,t),e&&(t in e||function(i,n){Ct(`Unknown ${i} '${n}'.`)}(this.kind,t),e[t].enabled||kr(this.kind,t)),super.get(t)}keyList(){return Array.from(this.keys())}};var na=new Wr("file parser"),jt=new Wr("segment parser"),Vr=new Wr("file reader");let Ah=ea.fetch;function Bs(r,t){return(e=r).startsWith("data:")||e.length>1e4?Fr(r,t,"base64"):Ds&&r.includes("://")?Cr(r,t,"url",Rs):Ds?Fr(r,t,"fs"):ci?Cr(r,t,"url",Rs):void Ct("Invalid input argument");var e}async function Cr(r,t,e,i){return Vr.has(e)?Fr(r,t,e):i?async function(n,s){let a=await s(n);return new pi(a)}(r,i):void Ct(`Parser ${e} is not loaded`)}async function Fr(r,t,e){let i=new(Vr.get(e))(r,t);return await i.read(),i}const Rs=r=>Ah(r).then(t=>t.arrayBuffer()),xr=r=>new Promise((t,e)=>{let i=new FileReader;i.onloadend=()=>t(i.result||new ArrayBuffer),i.onerror=e,i.readAsArrayBuffer(r)}),qr=new Map,Ph=new Map,Oh=new Map,Ci=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],aa=["jfif","xmp","icc","iptc","ihdr"],Er=["tiff",...aa],St=["ifd0","ifd1","exif","gps","interop"],Fi=[...Er,...St],xi=["makerNote","userComment"],oa=["translateKeys","translateValues","reviveValues","multiSegment"],Ei=[...oa,"sanitize","mergeOutput","silentErrors"];class la{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class Je extends la{get needed(){return this.enabled||this.deps.size>0}constructor(t,e,i,n){if(super(),lt(this,"enabled",!1),lt(this,"skip",new Set),lt(this,"pick",new Set),lt(this,"deps",new Set),lt(this,"translateKeys",!1),lt(this,"translateValues",!1),lt(this,"reviveValues",!1),this.key=t,this.enabled=e,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=St.includes(t),this.canBeFiltered&&(this.dict=qr.get(t)),i!==void 0)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(typeof i=="object"){if(this.enabled=!0,this.parse=i.parse!==!1,this.canBeFiltered){let{pick:s,skip:a}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(i)}else i===!0||i===!1?this.parse=this.enabled=i:Ct(`Invalid options argument: ${i}`)}applyInheritables(t){let e,i;for(e of oa)i=t[e],i!==void 0&&(this[e]=i)}translateTagSet(t,e){if(this.dict){let i,n,{tagKeys:s,tagValues:a}=this.dict;for(i of t)typeof i=="string"?(n=a.indexOf(i),n===-1&&(n=s.indexOf(Number(i))),n!==-1&&e.add(Number(s[n]))):e.add(i)}else for(let i of t)e.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,Mi(this.pick,this.deps)):this.enabled&&this.pick.size>0&&Mi(this.pick,this.deps)}}var xt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},zs=new Map;class Gr extends la{static useCached(t){let e=zs.get(t);return e!==void 0||(e=new this(t),zs.set(t,e)),e}constructor(t){super(),t===!0?this.setupFromTrue():t===void 0?this.setupFromUndefined():Array.isArray(t)?this.setupFromArray(t):typeof t=="object"?this.setupFromObject(t):Ct(`Invalid options argument ${t}`),this.firstChunkSize===void 0&&(this.firstChunkSize=ci?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let t;for(t of Ci)this[t]=xt[t];for(t of Ei)this[t]=xt[t];for(t of xi)this[t]=xt[t];for(t of Fi)this[t]=new Je(t,xt[t],void 0,this)}setupFromTrue(){let t;for(t of Ci)this[t]=xt[t];for(t of Ei)this[t]=xt[t];for(t of xi)this[t]=!0;for(t of Fi)this[t]=new Je(t,!0,void 0,this)}setupFromArray(t){let e;for(e of Ci)this[e]=xt[e];for(e of Ei)this[e]=xt[e];for(e of xi)this[e]=xt[e];for(e of Fi)this[e]=new Je(e,!1,void 0,this);this.setupGlobalFilters(t,void 0,St)}setupFromObject(t){let e;for(e of(St.ifd0=St.ifd0||St.image,St.ifd1=St.ifd1||St.thumbnail,Object.assign(this,t),Ci))this[e]=sr(t[e],xt[e]);for(e of Ei)this[e]=sr(t[e],xt[e]);for(e of xi)this[e]=sr(t[e],xt[e]);for(e of Er)this[e]=new Je(e,xt[e],t[e],this);for(e of St)this[e]=new Je(e,xt[e],t[e],this.tiff);this.setupGlobalFilters(t.pick,t.skip,St,Fi),t.tiff===!0?this.batchEnableWithBool(St,!0):t.tiff===!1?this.batchEnableWithUserValue(St,t):Array.isArray(t.tiff)?this.setupGlobalFilters(t.tiff,void 0,St):typeof t.tiff=="object"&&this.setupGlobalFilters(t.tiff.pick,t.tiff.skip,St)}batchEnableWithBool(t,e){for(let i of t)this[i].enabled=e}batchEnableWithUserValue(t,e){for(let i of t){let n=e[i];this[i].enabled=n!==!1&&n!==void 0}}setupGlobalFilters(t,e,i,n=i){if(t&&t.length){for(let a of n)this[a].enabled=!1;let s=Us(t,i);for(let[a,o]of s)Mi(this[a].pick,o),this[a].enabled=!0}else if(e&&e.length){let s=Us(e,i);for(let[a,o]of s)Mi(this[a].skip,o)}}filterNestedSegmentTags(){let{ifd0:t,exif:e,xmp:i,iptc:n,icc:s}=this;this.makerNote?e.deps.add(37500):e.skip.add(37500),this.userComment?e.deps.add(37510):e.skip.add(37510),i.enabled||t.skip.add(700),n.enabled||t.skip.add(33723),s.enabled||t.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:t,exif:e,gps:i,interop:n}=this;n.needed&&(e.deps.add(40965),t.deps.add(40965)),e.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=St.some(s=>this[s].enabled===!0)||this.makerNote||this.userComment;for(let s of St)this[s].finalizeFilters()}get onlyTiff(){return!aa.map(t=>this[t].enabled).some(t=>t===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let t of Er)this[t].enabled&&!jt.has(t)&&kr("segment parser",t)}}function Us(r,t){let e,i,n,s,a=[];for(n of t){for(s of(e=qr.get(n),i=[],e))(r.includes(s[0])||r.includes(s[1]))&&i.push(s[0]);i.length&&a.push([n,i])}return a}function sr(r,t){return r!==void 0?r:t!==void 0?t:void 0}function Mi(r,t){for(let e of t)r.add(e)}lt(Gr,"default",xt);class Dh{constructor(t){lt(this,"parsers",{}),lt(this,"output",{}),lt(this,"errors",[]),lt(this,"pushToErrors",e=>this.errors.push(e)),this.options=Gr.useCached(t)}async read(t){this.file=await function(e,i){return typeof e=="string"?Bs(e,i):ci&&!Eh&&e instanceof HTMLImageElement?Bs(e.src,i):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new pi(e):ci&&e instanceof Blob?Cr(e,i,"blob",xr):void Ct("Invalid input argument")}(t,this.options)}setup(){if(this.fileParser)return;let{file:t}=this,e=t.getUint16(0);for(let[i,n]of na)if(n.canHandle(t,e))return this.fileParser=new n(this.options,this.file,this.parsers),t[i]=!0;this.file.close&&this.file.close(),Ct("Unknown file format")}async parse(){let{output:t,errors:e}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),e.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&e.length>0&&(t.errors=e),sa(i=t)?void 0:i;var i}async executeParsers(){let{output:t}=this;await this.fileParser.parse();let e=Object.values(this.parsers).map(async i=>{let n=await i.parse();i.assignToOutput(t,n)});this.options.silentErrors&&(e=e.map(i=>i.catch(this.pushToErrors))),await Promise.all(e)}async extractThumbnail(){this.setup();let{options:t,file:e}=this,i=jt.get("tiff",t);var n;if(e.tiff?n={start:0,type:"tiff"}:e.jpeg&&(n=await this.fileParser.getOrFindSegment("tiff")),n===void 0)return;let s=await this.fileParser.ensureSegmentChunk(n),a=this.parsers.tiff=new i(s,t,e),o=await a.extractThumbnail();return e.close&&e.close(),o}}class Oe{static findPosition(t,e){let i=t.getUint16(e+2)+2,n=typeof this.headerLength=="function"?this.headerLength(t,e,i):this.headerLength,s=e+n,a=i-n;return{offset:e,length:i,headerLength:n,start:s,size:a,end:s+a}}static parse(t,e={}){return new this(t,new Gr({[this.type]:e}),t).parse()}normalizeInput(t){return t instanceof pi?t:new pi(t)}constructor(t,e={},i){lt(this,"errors",[]),lt(this,"raw",new Map),lt(this,"handleError",n=>{if(!this.options.silentErrors)throw n;this.errors.push(n.message)}),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=e,this.localOptions=e[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(t,e){let i=Oh.get(e),n=Ph.get(e),s=qr.get(e),a=this.options[e],o=a.reviveValues&&!!i,l=a.translateValues&&!!n,u=a.translateKeys&&!!s,d={};for(let[h,m]of t)o&&i.has(h)?m=i.get(h)(m):l&&n.has(h)&&(m=this.translateValue(m,n.get(h))),u&&s.has(h)&&(h=s.get(h)||h),d[h]=m;return d}translateValue(t,e){return e[t]||e.DEFAULT||t}assignToOutput(t,e){this.assignObjectToOutput(t,this.constructor.type,e)}assignObjectToOutput(t,e,i){if(this.globalOptions.mergeOutput)return Object.assign(t,i);t[e]?Object.assign(t[e],i):t[e]=i}}lt(Oe,"headerLength",4),lt(Oe,"type",void 0),lt(Oe,"multiSegment",!1),lt(Oe,"canHandle",()=>!1);function Ih(r){return r===192||r===194||r===196||r===219||r===221||r===218||r===254}function Nh(r){return r>=224&&r<=239}function Bh(r,t,e){for(let[i,n]of jt)if(n.canHandle(r,t,e))return i}class Ms extends class{constructor(t,e,i){lt(this,"errors",[]),lt(this,"ensureSegmentChunk",async n=>{let s=n.start,a=n.size||65536;if(this.file.chunked)if(this.file.available(s,a))n.chunk=this.file.subarray(s,a);else try{n.chunk=await this.file.readChunk(s,a)}catch(o){Ct(`Couldn't read segment: ${JSON.stringify(n)}. ${o.message}`)}else this.file.byteLength>s+a?n.chunk=this.file.subarray(s,a):n.size===void 0?n.chunk=this.file.subarray(s):Ct("Segment unreachable: "+JSON.stringify(n));return n.chunk}),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=e,this.parsers=i}injectSegment(t,e){this.options[t].enabled&&this.createParser(t,e)}createParser(t,e){let i=new(jt.get(t))(e,this.options,this.file);return this.parsers[t]=i}createParsers(t){for(let e of t){let{type:i,chunk:n}=e,s=this.options[i];if(s&&s.enabled){let a=this.parsers[i];a&&a.append||a||this.createParser(i,n)}}}async readSegments(t){let e=t.map(this.ensureSegmentChunk);await Promise.all(e)}}{constructor(...t){super(...t),lt(this,"appSegments",[]),lt(this,"jpegSegments",[]),lt(this,"unknownSegments",[])}static canHandle(t,e){return e===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(t){t===!0?(this.findAll=!0,this.wanted=new Set(jt.keyList())):(t=t===void 0?jt.keyList().filter(e=>this.options[e].enabled):t.filter(e=>this.options[e].enabled&&jt.has(e)),this.findAll=!1,this.remaining=new Set(t),this.wanted=new Set(t)),this.unfinishedMultiSegment=!1}async findAppSegments(t=0,e){this.setupSegmentFinderArgs(e);let{file:i,findAll:n,wanted:s,remaining:a}=this;if(!n&&this.file.chunked&&(n=Array.from(s).some(o=>{let l=jt.get(o),u=this.options[o];return l.multiSegment&&u.multiSegment}),n&&await this.file.readWhole()),t=this.findAppSegmentsInRange(t,i.byteLength),!this.options.onlyTiff&&i.chunked){let o=!1;for(;a.size>0&&!o&&(i.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=i,u=this.appSegments.some(d=>!this.file.available(d.offset||d.start,d.length||d.size));if(o=t>l&&!u?!await i.readNextChunk(t):!await i.readNextChunk(l),(t=this.findAppSegmentsInRange(t,i.byteLength))===void 0)return}}}findAppSegmentsInRange(t,e){e-=2;let i,n,s,a,o,l,{file:u,findAll:d,wanted:h,remaining:m,options:p}=this;for(;t<e;t++)if(u.getUint8(t)===255){if(i=u.getUint8(t+1),Nh(i)){if(n=u.getUint16(t+2),s=Bh(u,t,n),s&&h.has(s)&&(a=jt.get(s),o=a.findPosition(u,t),l=p[s],o.type=s,this.appSegments.push(o),!d&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||m.delete(s)):m.delete(s),m.size===0)))break;p.recordUnknownSegments&&(o=Oe.findPosition(u,t),o.marker=i,this.unknownSegments.push(o)),t+=n+1}else if(Ih(i)){if(n=u.getUint16(t+2),i===218&&p.stopAfterSos!==!1)return;p.recordJpegSegments&&this.jpegSegments.push({offset:t,length:n,marker:i}),t+=n+1}}return t}mergeMultiSegments(){if(!this.appSegments.some(e=>e.multiSegment))return;let t=function(e,i){let n,s,a,o=new Map;for(let l=0;l<e.length;l++)n=e[l],s=n[i],o.has(s)?a=o.get(s):o.set(s,a=[]),a.push(n);return Array.from(o)}(this.appSegments,"type");this.mergedAppSegments=t.map(([e,i])=>{let n=jt.get(e,this.options);return n.handleMultiSegments?{type:e,chunk:n.handleMultiSegments(i)}:i[0]})}getSegment(t){return this.appSegments.find(e=>e.type===t)}async getOrFindSegment(t){let e=this.getSegment(t);return e===void 0&&(await this.findAppSegments(0,[t]),e=this.getSegment(t)),e}}lt(Ms,"type","jpeg"),na.set("jpeg",Ms);const Rh=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class zh extends Oe{parseHeader(){var t=this.chunk.getUint16();t===18761?this.le=!0:t===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(t,e,i=new Map){let{pick:n,skip:s}=this.options[e];n=new Set(n);let a=n.size>0,o=s.size===0,l=this.chunk.getUint16(t);t+=2;for(let u=0;u<l;u++){let d=this.chunk.getUint16(t);if(a){if(n.has(d)&&(i.set(d,this.parseTag(t,d,e)),n.delete(d),n.size===0))break}else!o&&s.has(d)||i.set(d,this.parseTag(t,d,e));t+=12}return i}parseTag(t,e,i){let{chunk:n}=this,s=n.getUint16(t+2),a=n.getUint32(t+4),o=Rh[s];if(o*a<=4?t+=8:t=n.getUint32(t+8),(s<1||s>13)&&Ct(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${s}, offset ${t}`),t>n.byteLength&&Ct(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${e.toString(16)}, type: ${s}, offset ${t} is outside of chunk size ${n.byteLength}`),s===1)return n.getUint8Array(t,a);if(s===2)return(l=function(u){for(;u.endsWith("\0");)u=u.slice(0,-1);return u}(l=n.getString(t,a)).trim())===""?void 0:l;var l;if(s===7)return n.getUint8Array(t,a);if(a===1)return this.parseTagValue(s,t);{let u=new(function(h){switch(h){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(s))(a),d=o;for(let h=0;h<a;h++)u[h]=this.parseTagValue(s,t),t+=d;return u}}parseTagValue(t,e){let{chunk:i}=this;switch(t){case 1:return i.getUint8(e);case 3:return i.getUint16(e);case 4:return i.getUint32(e);case 5:return i.getUint32(e)/i.getUint32(e+4);case 6:return i.getInt8(e);case 8:return i.getInt16(e);case 9:return i.getInt32(e);case 10:return i.getInt32(e)/i.getInt32(e+4);case 11:return i.getFloat(e);case 12:return i.getDouble(e);case 13:return i.getUint32(e);default:Ct(`Invalid tiff type ${t}`)}}}class nr extends zh{static canHandle(t,e){return t.getUint8(e+1)===225&&t.getUint32(e+4)===1165519206&&t.getUint16(e+8)===0}async parse(){this.parseHeader();let{options:t}=this;return t.ifd0.enabled&&await this.parseIfd0Block(),t.exif.enabled&&await this.safeParse("parseExifBlock"),t.gps.enabled&&await this.safeParse("parseGpsBlock"),t.interop.enabled&&await this.safeParse("parseInteropBlock"),t.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(t){let e=this[t]();return e.catch!==void 0&&(e=e.catch(this.handleError)),e}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let t=this.chunk.getUint16(this.ifd0Offset),e=this.ifd0Offset+2+12*t;this.ifd1Offset=this.chunk.getUint32(e)}}parseBlock(t,e){let i=new Map;return this[e]=i,this.parseTags(t,e,i),i}async parseIfd0Block(){if(this.ifd0)return;let{file:t}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ct("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Ct(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&await t.ensureChunk(this.ifd0Offset,Is(this.options));let e=this.parseBlock(this.ifd0Offset,"ifd0");return e.size!==0?(this.exifOffset=e.get(34665),this.interopOffset=e.get(40965),this.gpsOffset=e.get(34853),this.xmp=e.get(700),this.iptc=e.get(33723),this.icc=e.get(34675),this.options.sanitize&&(e.delete(34665),e.delete(40965),e.delete(34853),e.delete(700),e.delete(33723),e.delete(34675)),e):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,Is(this.options));let t=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t}unpack(t,e){let i=t.get(e);i&&i.length===1&&t.set(e,i[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let t=this.parseBlock(this.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",Ls(...t.get(2),t.get(1))),t.set("longitude",Ls(...t.get(4),t.get(3)))),t}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(t=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||t))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let t=this.ifd1.get(513),e=this.ifd1.get(514);return this.chunk.getUint8Array(t,e)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let t,e,i,n={};for(e of St)if(t=this[e],!sa(t))if(i=this.canTranslate?this.translateBlock(t,e):Object.fromEntries(t),this.options.mergeOutput){if(e==="ifd1")continue;Object.assign(n,i)}else n[e]=i;return this.makerNote&&(n.makerNote=this.makerNote),this.userComment&&(n.userComment=this.userComment),n}assignToOutput(t,e){if(this.globalOptions.mergeOutput)Object.assign(t,e);else for(let[i,n]of Object.entries(e))this.assignObjectToOutput(t,i,n)}}function Ls(r,t,e,i){var n=r+t/60+e/3600;return i!=="S"&&i!=="W"||(n*=-1),n}lt(nr,"type","tiff"),lt(nr,"headerLength",10),jt.set("tiff",nr);const Xr={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Xr,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Xr,{tiff:!1,ifd1:!0,mergeOutput:!1});const Uh=Object.assign({},Xr,{firstChunkSize:4e4,ifd0:[274]});async function Mh(r){let t=new Dh(Uh);await t.read(r);let e=await t.parse();if(e&&e.ifd0)return e.ifd0[274]}const Lh=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let si=!0,ni=!0;if(typeof navigator=="object"){let r=navigator.userAgent;if(r.includes("iPad")||r.includes("iPhone")){let t=r.match(/OS (\d+)_(\d+)/);if(t){let[,e,i]=t;si=Number(e)+.1*Number(i)<13.4,ni=!1}}else if(r.includes("OS X 10")){let[,t]=r.match(/OS X 10[_.](\d+)/);si=ni=Number(t)<15}if(r.includes("Chrome/")){let[,t]=r.match(/Chrome\/(\d+)/);si=ni=Number(t)<81}else if(r.includes("Firefox/")){let[,t]=r.match(/Firefox\/(\d+)/);si=ni=Number(t)<77}}async function jh(r){let t=await Mh(r);return Object.assign({canvas:si,css:ni},Lh[t])}class $h extends pi{constructor(...t){super(...t),lt(this,"ranges",new Hh),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(t,e,i){if(t===0&&this.byteLength===0&&i){let n=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(n)}else{let n=t+e;if(n>this.byteLength){let{dataView:s}=this._extend(n);this._swapDataView(s)}}}_extend(t){let e;e=ra?ia.allocUnsafe(t):new Uint8Array(t);let i=new DataView(e.buffer,e.byteOffset,e.byteLength);return e.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:e,dataView:i}}subarray(t,e,i=!1){return e=e||this._lengthToEnd(t),i&&this._tryExtend(t,e),this.ranges.add(t,e),super.subarray(t,e)}set(t,e,i=!1){i&&this._tryExtend(e,t.byteLength,t);let n=super.set(t,e);return this.ranges.add(e,n.byteLength),n}async ensureChunk(t,e){this.chunked&&(this.ranges.available(t,e)||await this.readChunk(t,e))}available(t,e){return this.ranges.available(t,e)}}class Hh{constructor(){lt(this,"list",[])}get length(){return this.list.length}add(t,e,i=0){let n=t+e,s=this.list.filter(a=>js(t,a.offset,n)||js(t,a.end,n));if(s.length>0){t=Math.min(t,...s.map(o=>o.offset)),n=Math.max(n,...s.map(o=>o.end)),e=n-t;let a=s.shift();a.offset=t,a.length=e,a.end=n,this.list=this.list.filter(o=>!s.includes(o))}else this.list.push({offset:t,length:e,end:n})}available(t,e){let i=t+e;return this.list.some(n=>n.offset<=t&&i<=n.end)}}function js(r,t,e){return r<=t&&t<=e}class Wh extends $h{constructor(t,e){super(0),lt(this,"chunksRead",0),this.input=t,this.options=e}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(t=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let e=this.options.chunkSize,i=await this.readChunk(t,e);return!!i&&i.byteLength===e}async readChunk(t,e){if(this.chunksRead++,(e=this.safeWrapAddress(t,e))!==0)return this._readChunk(t,e)}safeWrapAddress(t,e){return this.size!==void 0&&t+e>this.size?Math.max(0,this.size-t):e}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}Vr.set("blob",class extends Wh{async readWhole(){this.chunked=!1;let r=await xr(this.input);this._swapArrayBuffer(r)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(r,t){let e=t?r+t:void 0,i=this.input.slice(r,e),n=await xr(i);return this.set(n,r,!0)}});const Vh={strings:{generatingThumbnails:"Generating thumbnails..."}},qh={version:"3.0.4"};function Gh(r,t,e){try{r.getContext("2d").getImageData(0,0,1,1)}catch(i){if(i.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return r.toBlob?new Promise(i=>{r.toBlob(i,t,e)}).then(i=>{if(i===null)throw new Error("cannot read image, probably an svg with external resources");return i}):Promise.resolve().then(()=>xh(r.toDataURL(t,e),{})).then(i=>{if(i===null)throw new Error("could not extract blob, probably an old browser");return i})}function Xh(r,t){let e=r.width,i=r.height;(t.deg===90||t.deg===270)&&(e=r.height,i=r.width);const n=document.createElement("canvas");n.width=e,n.height=i;const s=n.getContext("2d");return s.translate(e/2,i/2),t.canvas&&(s.rotate(t.rad),s.scale(t.scaleX,t.scaleY)),s.drawImage(r,-r.width/2,-r.height/2,r.width,r.height),n}function Yh(r){const t=r.width/r.height,e=5e6,i=4096;let n=Math.floor(Math.sqrt(e*t)),s=Math.floor(e/Math.sqrt(e*t));if(n>i&&(n=i,s=Math.round(n/t)),s>i&&(s=i,n=Math.round(t*s)),r.width>n){const a=document.createElement("canvas");return a.width=n,a.height=s,a.getContext("2d").drawImage(r,0,0,n,s),a}return r}class ha extends Fe{constructor(t,e){super(t,e),this.onFileAdded=n=>{!n.preview&&n.data&&Os(n.type)&&!n.isRemote&&this.addToQueue(n.id)},this.onCancelRequest=n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1)},this.onFileRemoved=n=>{const s=this.queue.indexOf(n.id);s!==-1&&this.queue.splice(s,1),n.preview&&Ps(n.preview)&&URL.revokeObjectURL(n.preview)},this.onRestored=()=>{this.uppy.getFiles().filter(s=>s.isRestored).forEach(s=>{(!s.preview||Ps(s.preview))&&this.addToQueue(s.id)})},this.onAllFilesRemoved=()=>{this.queue=[]},this.waitUntilAllProcessed=n=>{n.forEach(a=>{const o=this.uppy.getFile(a);this.uppy.emit("preprocess-progress",o,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});const s=()=>{n.forEach(a=>{const o=this.uppy.getFile(a);this.uppy.emit("preprocess-complete",o)})};return new Promise(a=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{s(),a()}):(s(),a())})},this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType||"image/jpeg",this.defaultLocale=Vh;const i={thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1};if(this.opts={...i,...e},this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(t,e,i){const n=URL.createObjectURL(t.data),s=new Promise((o,l)=>{const u=new Image;u.src=n,u.addEventListener("load",()=>{URL.revokeObjectURL(n),o(u)}),u.addEventListener("error",d=>{URL.revokeObjectURL(n),l(d.error||new Error("Could not create thumbnail"))})}),a=jh(t.data).catch(()=>1);return Promise.all([s,a]).then(o=>{let[l,u]=o;const d=this.getProportionalDimensions(l,e,i,u.deg),h=Xh(l,u),m=this.resizeImage(h,d.width,d.height);return Gh(m,this.thumbnailType,80)}).then(o=>URL.createObjectURL(o))}getProportionalDimensions(t,e,i,n){let s=t.width/t.height;return(n===90||n===270)&&(s=t.height/t.width),e!=null?{width:e,height:Math.round(e/s)}:i!=null?{width:Math.round(i*s),height:i}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/s)}}resizeImage(t,e,i){let n=Yh(t),s=Math.ceil(Math.log2(n.width/e));s<1&&(s=1);let a=e*2**(s-1),o=i*2**(s-1);const l=2;for(;s--;){const u=document.createElement("canvas");u.width=a,u.height=o,u.getContext("2d").drawImage(n,0,0,a,o),n=u,a=Math.round(a/l),o=Math.round(o/l)}return n}setPreviewURL(t,e){this.uppy.setFileState(t,{preview:e})}addToQueue(t){this.queue.push(t),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){const t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(t){return Os(t.type)&&!t.isRemote?this.createThumbnail(t,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(e=>{this.setPreviewURL(t.id,e),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${t.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(t.id),e)}).catch(e=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${t.id}:`,"warning"),this.uppy.log(e,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(t.id),e)}):Promise.resolve()}install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}ha.VERSION=qh.version;function $s(r){if(typeof r=="string"){const t=document.querySelectorAll(r);return t.length===0?null:Array.from(t)}return typeof r=="object"&&Xn(r)?[r]:null}const li=Array.from;function ua(r,t,e,i){let{onSuccess:n}=i;r.readEntries(s=>{const a=[...t,...s];s.length?queueMicrotask(()=>{ua(r,a,e,{onSuccess:n})}):n(a)},s=>{e(s),n(t)})}function da(r,t){return r==null?r:{kind:r.isFile?"file":r.isDirectory?"directory":void 0,name:r.name,getFile(){return new Promise((e,i)=>r.file(e,i))},async*values(){const e=r.createReader();yield*await new Promise(n=>{ua(e,[],t,{onSuccess:s=>n(s.map(a=>da(a,t)))})})}}}function ca(r,t,e){try{return e===void 0&&(e=void 0),async function*(){const i=()=>`${t}/${r.name}`;if(r.kind==="file"){const n=await r.getFile();n!=null?(n.relativePath=t?i():null,yield n):e!=null&&(yield e)}else if(r.kind==="directory")for await(const n of r.values())yield*ca(n,t?i():r.name);else e!=null&&(yield e)}()}catch(i){return Promise.reject(i)}}async function*Zh(r,t){const e=await Promise.all(Array.from(r.items,async i=>{var n;let s;const a=()=>typeof i.getAsEntry=="function"?i.getAsEntry():i.webkitGetAsEntry();return(n=s)!=null||(s=da(a(),t)),{fileSystemHandle:s,lastResortFile:i.getAsFile()}}));for(const{lastResortFile:i,fileSystemHandle:n}of e)if(n!=null)try{yield*ca(n,"",i)}catch(s){i!=null?yield i:t(s)}else i!=null&&(yield i)}function Kh(r){const t=li(r.files);return Promise.resolve(t)}async function Jh(r,t){let{logDropError:e=()=>{}}=t===void 0?{}:t;try{const i=[];for await(const n of Zh(r,e))i.push(n);return i}catch{return Kh(r)}}var Hs={},Qh={get exports(){return Hs},set exports(r){Hs=r}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function n(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function s(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new n(d,h||l,m),g=e?e+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],p]:l._events[g].push(p):(l._events[g]=p,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(e?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=e?e+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,g=new Array(p);m<p;m++)g[m]=h[m].fn;return g},o.prototype.listenerCount=function(u){var d=e?e+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,p,g){var f=e?e+u:u;if(!this._events[f])return!1;var y=this._events[f],b=arguments.length,w,k;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,h),!0;case 4:return y.fn.call(y.context,d,h,m),!0;case 5:return y.fn.call(y.context,d,h,m,p),!0;case 6:return y.fn.call(y.context,d,h,m,p,g),!0}for(k=1,w=new Array(b-1);k<b;k++)w[k-1]=arguments[k];y.fn.apply(y.context,w)}else{var T=y.length,x;for(k=0;k<T;k++)switch(y[k].once&&this.removeListener(u,y[k].fn,void 0,!0),b){case 1:y[k].fn.call(y[k].context);break;case 2:y[k].fn.call(y[k].context,d);break;case 3:y[k].fn.call(y[k].context,d,h);break;case 4:y[k].fn.call(y[k].context,d,h,m);break;default:if(!w)for(x=1,w=new Array(b-1);x<b;x++)w[x-1]=arguments[x];y[k].fn.apply(y[k].context,w)}}return!0},o.prototype.on=function(u,d,h){return s(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return s(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var p=e?e+u:u;if(!this._events[p])return this;if(!d)return a(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!m||g.once)&&(!h||g.context===h)&&a(this,p);else{for(var f=0,y=[],b=g.length;f<b;f++)(g[f].fn!==d||m&&!g[f].once||h&&g[f].context!==h)&&y.push(g[f]);y.length?this._events[p]=y.length===1?y[0]:y:a(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=e?e+u:u,this._events[d]&&a(this,d)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(Qh);globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;globalThis&&globalThis.__classPrivateFieldGet;var fi,vt,ar,Ws,Li=0,pa=[],Ni=[],Vs=rt.__b,qs=rt.__r,Gs=rt.diffed,Xs=rt.__c,Ys=rt.unmount;function Yr(r,t){rt.__h&&rt.__h(vt,r,Li||t),Li=0;var e=vt.__H||(vt.__H={__:[],__h:[]});return r>=e.__.length&&e.__.push({__V:Ni}),e.__[r]}function Zs(r){return Li=1,tu(ga,r)}function tu(r,t,e){var i=Yr(fi++,2);if(i.t=r,!i.__c&&(i.__=[e?e(t):ga(void 0,t),function(o){var l=i.__N?i.__N[0]:i.__[0],u=i.t(l,o);l!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=vt,!vt.u)){var n=function(o,l,u){if(!i.__c.__H)return!0;var d=i.__c.__H.__.filter(function(m){return m.__c});if(d.every(function(m){return!m.__N}))return!s||s.call(this,o,l,u);var h=!1;return d.forEach(function(m){if(m.__N){var p=m.__[0];m.__=m.__N,m.__N=void 0,p!==m.__[0]&&(h=!0)}}),!(!h&&i.__c.props===o)&&(!s||s.call(this,o,l,u))};vt.u=!0;var s=vt.shouldComponentUpdate,a=vt.componentWillUpdate;vt.componentWillUpdate=function(o,l,u){if(this.__e){var d=s;s=void 0,n(o,l,u),s=d}a&&a.call(this,o,l,u)},vt.shouldComponentUpdate=n}return i.__N||i.__}function eu(r,t){var e=Yr(fi++,3);!rt.__s&&ma(e.__H,t)&&(e.__=r,e.i=t,vt.__H.__h.push(e))}function fa(r,t){var e=Yr(fi++,7);return ma(e.__H,t)?(e.__V=r(),e.i=t,e.__h=r,e.__V):e.__}function iu(r,t){return Li=8,fa(function(){return r},t)}function ru(){for(var r;r=pa.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(Bi),r.__H.__h.forEach(Tr),r.__H.__h=[]}catch(t){r.__H.__h=[],rt.__e(t,r.__v)}}rt.__b=function(r){vt=null,Vs&&Vs(r)},rt.__r=function(r){qs&&qs(r),fi=0;var t=(vt=r.__c).__H;t&&(ar===vt?(t.__h=[],vt.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.__V=Ni,e.__N=e.i=void 0})):(t.__h.forEach(Bi),t.__h.forEach(Tr),t.__h=[],fi=0)),ar=vt},rt.diffed=function(r){Gs&&Gs(r);var t=r.__c;t&&t.__H&&(t.__H.__h.length&&(pa.push(t)!==1&&Ws===rt.requestAnimationFrame||((Ws=rt.requestAnimationFrame)||su)(ru)),t.__H.__.forEach(function(e){e.i&&(e.__H=e.i),e.__V!==Ni&&(e.__=e.__V),e.i=void 0,e.__V=Ni})),ar=vt=null},rt.__c=function(r,t){t.some(function(e){try{e.__h.forEach(Bi),e.__h=e.__h.filter(function(i){return!i.__||Tr(i)})}catch(i){t.some(function(n){n.__h&&(n.__h=[])}),t=[],rt.__e(i,e.__v)}}),Xs&&Xs(r,t)},rt.unmount=function(r){Ys&&Ys(r);var t,e=r.__c;e&&e.__H&&(e.__H.__.forEach(function(i){try{Bi(i)}catch(n){t=n}}),e.__H=void 0,t&&rt.__e(t,e.__v))};var Ks=typeof requestAnimationFrame=="function";function su(r){var t,e=function(){clearTimeout(i),Ks&&cancelAnimationFrame(t),setTimeout(r)},i=setTimeout(e,100);Ks&&(t=requestAnimationFrame(e))}function Bi(r){var t=vt,e=r.__c;typeof e=="function"&&(r.__c=void 0,e()),vt=t}function Tr(r){var t=vt;r.__c=r.__(),vt=t}function ma(r,t){return!r||r.length!==t.length||t.some(function(e,i){return e!==r[i]})}function ga(r,t){return typeof t=="function"?t(r):t}function Ar(){return Ar=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ar.apply(this,arguments)}const nu={position:"relative",width:"100%",minHeight:"100%"},au={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"};class ou extends Ht{constructor(t){super(t),this.handleScroll=()=>{this.setState({offset:this.base.scrollTop})},this.handleResize=()=>{this.resize()},this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}resize(){const{height:t}=this.state;t!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render(t){let{data:e,rowHeight:i,renderRow:n,overscanCount:s=10,...a}=t;const{offset:o,height:l}=this.state;let u=Math.floor(o/i),d=Math.floor(l/i);s&&(u=Math.max(0,u-u%s),d+=s);const h=u+d+4,m=e.slice(u,h),p={...nu,height:e.length*i},g={...au,top:u*i};return _("div",Ar({onScroll:this.handleScroll},a),_("div",{role:"presentation",style:p},_("div",{role:"presentation",style:g},m.map(n))))}}function lu(){return _("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},_("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Js=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function hu(r,t){return!!(r===t||Js(r)&&Js(t))}function uu(r,t){if(r.length!==t.length)return!1;for(var e=0;e<r.length;e++)if(!hu(r[e],t[e]))return!1;return!0}function Qs(r,t){t===void 0&&(t=uu);var e=null;function i(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(e&&e.lastThis===this&&t(n,e.lastArgs))return e.lastResult;var a=r.apply(this,n);return e={lastResult:a,lastArgs:n,lastThis:this},a}return i.clear=function(){e=null},i}const va=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function ya(r,t){if(t){const e=r.querySelector(`[data-uppy-paneltype="${t}"]`);if(e)return e}return r}function tn(r,t){const e=t[0];e&&(e.focus(),r.preventDefault())}function du(r,t){const e=t[t.length-1];e&&(e.focus(),r.preventDefault())}function cu(r){return r.contains(document.activeElement)}function ba(r,t,e){const i=ya(e,t),n=li(i.querySelectorAll(va)),s=n.indexOf(document.activeElement);cu(i)?r.shiftKey&&s===0?du(r,n):!r.shiftKey&&s===n.length-1&&tn(r,n):tn(r,n)}function pu(r,t,e){t===null||ba(r,t,e)}function fu(){let r=!1;return An((e,i)=>{const n=ya(e,i),s=n.contains(document.activeElement);if(s&&r)return;const a=n.querySelector("[data-uppy-super-focusable]");if(!(s&&!a))if(a)a.focus({preventScroll:!0}),r=!0;else{const o=n.querySelector(va);o==null||o.focus({preventScroll:!0}),r=!1}},260)}function mu(){const r=document.body;return!(!("draggable"in r)||!("ondragstart"in r&&"ondrop"in r)||!("FormData"in window)||!("FileReader"in window))}var gu=function(t,e){if(t===e)return!0;for(var i in t)if(!(i in e))return!1;for(var i in e)if(t[i]!==e[i])return!1;return!0};function vu(){return _("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},_("g",{fill:"#686DE0",fillRule:"evenodd"},_("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),_("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),_("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))}function yu(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},_("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))}function bu(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},_("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))}function _u(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},_("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))}function wu(){return _("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},_("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}function Su(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},_("g",{fill:"#A7AFB7",fillRule:"nonzero"},_("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),_("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))}function ku(){return _("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},_("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))}function Zr(r){const t={color:"#838999",icon:Su()};if(!r)return t;const e=r.split("/")[0],i=r.split("/")[1];return e==="text"?{color:"#5a5e69",icon:ku()}:e==="image"?{color:"#686de0",icon:vu()}:e==="audio"?{color:"#068dbb",icon:yu()}:e==="video"?{color:"#19af67",icon:bu()}:e==="application"&&i==="pdf"?{color:"#e25149",icon:_u()}:e==="application"&&["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)!==-1?{color:"#00C469",icon:wu()}:t}function _a(r){const{file:t}=r;if(t.preview)return _("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});const{color:e,icon:i}=Zr(t.type);return _("div",{className:"uppy-Dashboard-Item-previewIconWrap"},_("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:e}},i),_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},_("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}const Cu=(r,t)=>(typeof t=="function"?t():t).filter(n=>n.id===r)[0].name;function wa(r){const{file:t,toggleFileCard:e,i18n:i,metaFields:n}=r,{missingRequiredMetaFields:s}=t;if(!(s!=null&&s.length))return null;const a=s.map(o=>Cu(o,n)).join(", ");return _("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:s.length,fields:a})," ",_("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>e(!0,t.id)},i("editFile")))}function Fu(r){const{file:t,i18n:e,toggleFileCard:i,metaFields:n,showLinkToFileUploadResult:s}=r,a="rgba(255, 255, 255, 0.5)",o=t.preview?a:Zr(r.file.type).color;return _("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:o}},s&&t.uploadURL&&_("a",{className:"uppy-Dashboard-Item-previewLink",href:t.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":t.meta.name},_("span",{hidden:!0},t.meta.name)),_(_a,{file:t}),_(wa,{file:t,i18n:e,toggleFileCard:i,metaFields:n}))}function xu(r){if(!r.isUploaded){if(r.error&&!r.hideRetryButton){r.uppy.retryUpload(r.file.id);return}r.resumableUploads&&!r.hidePauseResumeButton?r.uppy.pauseResume(r.file.id):r.individualCancellation&&!r.hideCancelButton&&r.uppy.removeFile(r.file.id)}}function en(r){return r.isUploaded?r.i18n("uploadComplete"):r.error?r.i18n("retryUpload"):r.resumableUploads?r.file.isPaused?r.i18n("resumeUpload"):r.i18n("pauseUpload"):r.individualCancellation?r.i18n("cancelUpload"):""}function or(r){return _("div",{className:"uppy-Dashboard-Item-progress"},_("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":en(r),title:en(r),onClick:()=>xu(r)},r.children))}function Ti(r){let{children:t}=r;return _("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function lr(r){let{progress:t}=r;const e=2*Math.PI*15;return _("g",null,_("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),_("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*t}))}function Eu(r){if(!r.file.progress.uploadStarted)return null;if(r.isUploaded)return _("div",{className:"uppy-Dashboard-Item-progress"},_("div",{className:"uppy-Dashboard-Item-progressIndicator"},_(Ti,null,_("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),_("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"}))));if(!r.recoveredState)return r.error&&!r.hideRetryButton?_(or,r,_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},_("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),_("path",{d:"M7.9 3H10v2H7.9z"}),_("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),_("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):r.resumableUploads&&!r.hidePauseResumeButton?_(or,r,_(Ti,null,_(lr,{progress:r.file.progress.percentage}),r.file.isPaused?_("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):_("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},_("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),_("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):!r.resumableUploads&&r.individualCancellation&&!r.hideCancelButton?_(or,r,_(Ti,null,_(lr,{progress:r.file.progress.percentage}),_("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):_("div",{className:"uppy-Dashboard-Item-progress"},_("div",{className:"uppy-Dashboard-Item-progressIndicator"},_(Ti,null,_(lr,{progress:r.file.progress.percentage}))))}var Tu=function(t){if(typeof t!="number"||isNaN(t))throw new TypeError("Expected a number, got "+typeof t);var e=t<0,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var n=Math.min(Math.floor(Math.log(t)/Math.log(1024)),i.length-1);t=Number(t/Math.pow(1024,n));var s=i[n];return t>=10||t%1===0?(e?"-":"")+t.toFixed(0)+" "+s:(e?"-":"")+t.toFixed(1)+" "+s};const hr="...";function Sa(r,t){if(t===0)return"";if(r.length<=t)return r;if(t<=hr.length+1)return`${r.slice(0,t-1)}…`;const e=t-hr.length,i=Math.ceil(e/2),n=Math.floor(e/2);return r.slice(0,i)+hr+r.slice(-n)}const Au=r=>{const{author:t,name:e}=r.file.meta;function i(){return r.isSingleFile&&r.containerHeight>=350?90:r.containerWidth<=352?35:r.containerWidth<=576?60:t?20:30}return _("div",{className:"uppy-Dashboard-Item-name",title:e},Sa(e,i()))},Pu=r=>{const{author:t}=r.file.meta,{providerName:e}=r.file.remote,i="·";return t?_("div",{className:"uppy-Dashboard-Item-author"},_("a",{href:`${t.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer"},Sa(t.name,13)),e?_(ue,null,` ${i} `,e,` ${i} `):null):null},Ou=r=>r.file.size&&_("div",{className:"uppy-Dashboard-Item-statusSize"},Tu(r.file.size)),Du=r=>r.file.isGhost&&_("span",null," • ",_("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:r.toggleAddFilesPanel},r.i18n("reSelect"))),Iu=r=>{let{file:t,onClick:e}=r;return t.error?_("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button"},"?"):null};function Nu(r){const{file:t}=r;return _("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},_("div",{className:"uppy-Dashboard-Item-fileName"},Au(r),_(Iu,{file:r.file,onClick:()=>alert(r.file.error)})),_("div",{className:"uppy-Dashboard-Item-status"},Pu(r),Ou(r),Du(r)),_(wa,{file:r.file,i18n:r.i18n,toggleFileCard:r.toggleFileCard,metaFields:r.metaFields}))}function Bu(r,t){return t===void 0&&(t="Copy the URL below"),new Promise(e=>{const i=document.createElement("textarea");i.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),i.value=r,document.body.appendChild(i),i.select();const n=()=>{document.body.removeChild(i),window.prompt(t,r),e()};try{return document.execCommand("copy")?(document.body.removeChild(i),e()):n("copy command unavailable")}catch{return document.body.removeChild(i),n()}})}function Ru(r){let{file:t,uploadInProgressOrComplete:e,metaFields:i,canEditFile:n,i18n:s,onClick:a}=r;return!e&&i&&i.length>0||!e&&n(t)?_("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:t.meta.name}),title:s("editFileWithFilename",{file:t.meta.name}),onClick:()=>a()},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},_("g",{fillRule:"evenodd"},_("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),_("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),_("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function zu(r){let{i18n:t,onClick:e,file:i}=r;return _("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:i.meta.name}),title:t("removeFile",{file:i.meta.name}),onClick:()=>e()},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},_("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),_("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}const Uu=(r,t)=>{Bu(t.file.uploadURL,t.i18n("copyLinkToClipboardFallback")).then(()=>{t.uppy.log("Link copied to clipboard."),t.uppy.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)}).catch(t.uppy.log).then(()=>r.target.focus({preventScroll:!0}))};function Mu(r){const{i18n:t}=r;return _("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:e=>Uu(e,r)},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},_("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function Lu(r){const{uppy:t,file:e,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,showLinkToFileUploadResult:a,showRemoveButton:o,i18n:l,toggleFileCard:u,openFileEditor:d}=r;return _("div",{className:"uppy-Dashboard-Item-actionWrapper"},_(Ru,{i18n:l,file:e,uploadInProgressOrComplete:i,canEditFile:n,metaFields:s,onClick:()=>{s&&s.length>0?u(!0,e.id):d(e)}}),a&&e.uploadURL?_(Mu,{file:e,uppy:t,i18n:l}):null,o?_(zu,{i18n:l,file:e,uppy:t,onClick:()=>r.uppy.removeFile(e.id,"removed-by-user")}):null)}class ju extends Ht{componentDidMount(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}shouldComponentUpdate(t){return!gu(this.props,t)}componentDidUpdate(){const{file:t}=this.props;t.preview||this.props.handleRequestThumbnail(t)}componentWillUnmount(){const{file:t}=this.props;t.preview||this.props.handleCancelThumbnail(t)}render(){const{file:t}=this.props,e=t.progress.preprocess||t.progress.postprocess,i=t.progress.uploadComplete&&!e&&!t.error,n=t.progress.uploadStarted||e,s=t.progress.uploadStarted&&!t.progress.uploadComplete||e,a=t.error||!1,{isGhost:o}=t;let l=(this.props.individualCancellation||!s)&&!i;i&&this.props.showRemoveButtonAfterComplete&&(l=!0);const u=Dt({"uppy-Dashboard-Item":!0,"is-inprogress":s&&!this.props.recoveredState,"is-processing":e,"is-complete":i,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return _("div",{className:u,id:`uppy_${t.id}`,role:this.props.role},_("div",{className:"uppy-Dashboard-Item-preview"},_(Fu,{file:t,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),_(Eu,{uppy:this.props.uppy,file:t,error:a,isUploaded:i,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),_("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},_(Nu,{file:t,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),_(Lu,{file:t,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:n,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}function $u(r,t){const e=[];let i=[];return r.forEach(n=>{i.length<t?i.push(n):(e.push(i),i=[n])}),i.length&&e.push(i),e}const Hu=r=>{let{id:t,error:e,i18n:i,uppy:n,files:s,acquirers:a,resumableUploads:o,hideRetryButton:l,hidePauseResumeButton:u,hideCancelButton:d,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:m,isWide:p,metaFields:g,isSingleFile:f,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:w,recoveredState:k,individualCancellation:T,itemsPerRow:x,openFileEditor:F,canEditFile:A,toggleAddFilesPanel:N,containerWidth:O,containerHeight:L}=r;const K=x===1?71:200,E=fa(()=>{const v=(J,$)=>s[$].isGhost-s[J].isGhost,U=Object.keys(s);return k&&U.sort(v),$u(U,x)},[s,x,k]),z=v=>_("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:v[0]},v.map(U=>_(ju,{key:U,uppy:n,id:t,error:e,i18n:i,acquirers:a,resumableUploads:o,individualCancellation:T,hideRetryButton:l,hidePauseResumeButton:u,hideCancelButton:d,showLinkToFileUploadResult:h,showRemoveButtonAfterComplete:m,isWide:p,metaFields:g,recoveredState:k,isSingleFile:f,containerWidth:O,containerHeight:L,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:w,role:"listitem",openFileEditor:F,canEditFile:A,toggleAddFilesPanel:N,file:s[U]})));return f?_("div",{class:"uppy-Dashboard-files"},z(E[0])):_(ou,{class:"uppy-Dashboard-files",role:"list",data:E,renderRow:z,rowHeight:K})};let ka;ka=Symbol.for("uppy test: disable unused locale key warning");class Ca extends Ht{constructor(){super(...arguments),this.triggerFileInputClick=()=>{this.fileInput.click()},this.triggerFolderInputClick=()=>{this.folderInput.click()},this.triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput.click()},this.triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput.click()},this.onFileInputChange=t=>{this.props.handleInputChange(t),t.target.value=null},this.renderHiddenInput=(t,e)=>_("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes,ref:e}),this.renderHiddenCameraInput=(t,e,i)=>{const s={photo:"image/*",video:"video/*"}[t];return _("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${t}`,onChange:this.onFileInputChange,capture:e,accept:s,ref:i})},this.renderMyDeviceAcquirer=()=>_("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},_("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick},_("div",{className:"uppy-DashboardTab-inner"},_("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},_("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"}))),_("div",{className:"uppy-DashboardTab-name"},this.props.i18n("myDevice")))),this.renderPhotoCamera=()=>_("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},_("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick},_("div",{className:"uppy-DashboardTab-inner"},_("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},_("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"}))),_("div",{className:"uppy-DashboardTab-name"},this.props.i18n("takePictureBtn")))),this.renderVideoCamera=()=>_("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},_("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick},_("div",{className:"uppy-DashboardTab-inner"},_("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},_("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "}))),_("div",{className:"uppy-DashboardTab-name"},this.props.i18n("recordVideoBtn")))),this.renderBrowseButton=(t,e)=>{const i=this.props.acquirers.length;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:e,"data-uppy-super-focusable":i===0},t)},this.renderDropPasteBrowseTagline=t=>{const e=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),i=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),n=this.props.fileManagerSelectionType,s=n.charAt(0).toUpperCase()+n.slice(1);return _("div",{class:"uppy-Dashboard-AddFiles-title"},this.props.disableLocalFiles?this.props.i18n("importFiles"):t>0?this.props.i18nArray(`dropPasteImport${s}`,{browseFiles:e,browseFolders:i,browse:e}):this.props.i18nArray(`dropPaste${s}`,{browseFiles:e,browseFolders:i,browse:e}))},this.renderAcquirer=t=>_("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id},_("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":`uppy-DashboardContent-panel--${t.id}`,"aria-selected":this.props.activePickerPanel.id===t.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(t.id)},_("div",{className:"uppy-DashboardTab-inner"},t.icon()),_("div",{className:"uppy-DashboardTab-name"},t.name))),this.renderAcquirers=t=>{const e=[...t],i=e.splice(t.length-2,t.length);return _(ue,null,e.map(n=>this.renderAcquirer(n)),_("span",{role:"presentation",style:{"white-space":"nowrap"}},i.map(n=>this.renderAcquirer(n))))},this.renderSourcesList=(t,e)=>{const{showNativePhotoCameraButton:i,showNativeVideoCameraButton:n}=this.props;let s=[];const a="myDevice";e||(s.push({key:a,elements:this.renderMyDeviceAcquirer()}),i&&s.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),n&&s.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()})),s.push(...t.map(h=>({key:h.id,elements:this.renderAcquirer(h)}))),s.length===1&&s[0].key===a&&(s=[]);const l=[...s],u=l.splice(s.length-2,s.length),d=h=>h.map(m=>{let{key:p,elements:g}=m;return _(ue,{key:p},g)});return _(ue,null,this.renderDropPasteBrowseTagline(s.length),_("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},d(l),_("span",{role:"presentation",style:{"white-space":"nowrap"}},d(u))))}}[ka](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderPoweredByUppy(){const{i18nArray:t}=this.props,e=_("span",null,_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},_("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),_("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy")),i=t("poweredBy",{uppy:e});return _("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},i)}render(){const{showNativePhotoCameraButton:t,showNativeVideoCameraButton:e,nativeCameraFacingMode:i}=this.props;return _("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,n=>{this.fileInput=n}),this.renderHiddenInput(!0,n=>{this.folderInput=n}),t&&this.renderHiddenCameraInput("photo",i,n=>{this.mobilePhotoFileInput=n}),e&&this.renderHiddenCameraInput("video",i,n=>{this.mobileVideoFileInput=n}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),_("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&_("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}const Wu=r=>_("div",{className:Dt("uppy-Dashboard-AddFilesPanel",r.className),"data-uppy-panelType":"AddFiles","aria-hidden":r.showAddFilesPanel},_("div",{className:"uppy-DashboardContent-bar"},_("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18n("addingMoreFiles")),_("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>r.toggleAddFilesPanel(!1)},r.i18n("back"))),_(Ca,r));function oe(r){const{tagName:t}=r.target;if(t==="INPUT"||t==="TEXTAREA"){r.stopPropagation();return}r.preventDefault(),r.stopPropagation()}function Vu(r){let{activePickerPanel:t,className:e,hideAllPanels:i,i18n:n,state:s,uppy:a}=r;return _("div",{className:Dt("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${t.id}`,onDragOver:oe,onDragLeave:oe,onDrop:oe,onPaste:oe},_("div",{className:"uppy-DashboardContent-bar"},_("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},n("importFrom",{name:t.name})),_("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},n("cancel"))),_("div",{className:"uppy-DashboardContent-panelBody"},a.getPlugin(t.id).render(s)))}function qu(r){const t=r.files[r.fileCardFor];return _("div",{className:Dt("uppy-DashboardContent-panel",r.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},_("div",{className:"uppy-DashboardContent-bar"},_("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r.i18nArray("editing",{file:_("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),_("button",{className:"uppy-DashboardContent-back",type:"button",onClick:r.hideAllPanels},r.i18n("cancel")),_("button",{className:"uppy-DashboardContent-save",type:"button",onClick:r.saveFileEditor},r.i18n("save"))),_("div",{className:"uppy-DashboardContent-panelBody"},r.editors.map(e=>r.uppy.getPlugin(e.id).render(r.state))))}const qt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function Gu(r,t,e,i){if(i===void 0&&(i={}),r)return qt.STATE_ERROR;if(t)return qt.STATE_COMPLETE;if(e)return qt.STATE_PAUSED;let n=qt.STATE_WAITING;const s=Object.keys(i);for(let a=0;a<s.length;a++){const{progress:o}=i[s[a]];if(o.uploadStarted&&!o.uploadComplete)return qt.STATE_UPLOADING;o.preprocess&&n!==qt.STATE_UPLOADING&&(n=qt.STATE_PREPROCESSING),o.postprocess&&n!==qt.STATE_UPLOADING&&n!==qt.STATE_PREPROCESSING&&(n=qt.STATE_POSTPROCESSING)}return n}function Xu(r){let{files:t,i18n:e,isAllComplete:i,isAllErrored:n,isAllPaused:s,inProgressNotPausedFiles:a,newFiles:o,processingFiles:l}=r;switch(Gu(n,i,s,t)){case"uploading":return e("uploadingXFiles",{smart_count:a.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:l.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error")}}function Yu(r){const{i18n:t,isAllComplete:e,hideCancelButton:i,maxNumberOfFiles:n,toggleAddFilesPanel:s,uppy:a}=r;let{allowNewUpload:o}=r;return o&&n&&(o=r.totalFileCount<r.maxNumberOfFiles),_("div",{className:"uppy-DashboardContent-bar"},!e&&!i?_("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>a.cancelAll()},t("cancel")):_("div",null),_("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},_(Xu,r)),o?_("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:()=>s(!0)},_("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},_("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),_("span",{className:"uppy-DashboardContent-addMoreCaption"},t("addMore"))):_("div",null))}function Zu(r){const{computedMetaFields:t,requiredMetaFields:e,updateMeta:i,form:n,formState:s}=r,a={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return t.map(o=>{const l=`uppy-Dashboard-FileCard-input-${o.id}`,u=e.includes(o.id);return _("fieldset",{key:o.id,className:"uppy-Dashboard-FileCard-fieldset"},_("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l},o.name),o.render!==void 0?o.render({value:s[o.id],onChange:d=>i(d,o.id),fieldCSSClasses:a,required:u,form:n.id},_):_("input",{className:a.text,id:l,form:n.id,type:o.type||"text",required:u,value:s[o.id],placeholder:o.placeholder,onInput:d=>i(d.target.value,o.id),"data-uppy-super-focusable":!0}))})}function Ku(r){var t;const{uppy:e,files:i,fileCardFor:n,toggleFileCard:s,saveFileCard:a,metaFields:o,requiredMetaFields:l,openFileEditor:u,i18n:d,i18nArray:h,className:m,canEditFile:p}=r,g=()=>typeof o=="function"?o(i[n]):o,f=i[n],y=(t=g())!=null?t:[],b=p(f),w={};y.forEach(O=>{var L;w[O.id]=(L=f.meta[O.id])!=null?L:""});const[k,T]=Zs(w),x=iu(O=>{O.preventDefault(),a(k,n)},[a,k,n]),F=(O,L)=>{T({...k,[L]:O})},A=()=>{e.emit("file-editor:cancel",f),s(!1)},[N]=Zs(()=>{const O=document.createElement("form");return O.setAttribute("tabindex","-1"),O.id=Lr(),O});return eu(()=>(document.body.appendChild(N),N.addEventListener("submit",x),()=>{N.removeEventListener("submit",x),document.body.removeChild(N)}),[N,x]),_("div",{className:Dt("uppy-Dashboard-FileCard",m),"data-uppy-panelType":"FileCard",onDragOver:oe,onDragLeave:oe,onDrop:oe,onPaste:oe},_("div",{className:"uppy-DashboardContent-bar"},_("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},h("editing",{file:_("span",{className:"uppy-DashboardContent-titleFile"},f.meta?f.meta.name:f.name)})),_("button",{className:"uppy-DashboardContent-back",type:"button",form:N.id,title:d("finishEditingFile"),onClick:A},d("cancel"))),_("div",{className:"uppy-Dashboard-FileCard-inner"},_("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Zr(f.type).color}},_(_a,{file:f}),b&&_("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:O=>{x(O),u(f)}},d("editFile"))),_("div",{className:"uppy-Dashboard-FileCard-info"},_(Zu,{computedMetaFields:y,requiredMetaFields:l,updateMeta:F,form:N,formState:k})),_("div",{className:"uppy-Dashboard-FileCard-actions"},_("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:N.id},d("saveChanges")),_("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:A,form:N.id},d("cancel")))))}const Te="uppy-transition-slideDownUp",rn=250;class Ai extends Ht{constructor(t){super(t),this.state={cachedChildren:null,className:""}}componentWillUpdate(t){const{cachedChildren:e}=this.state,i=ne(t.children)[0];if(e===i)return null;const n={cachedChildren:i};i&&!e&&(n.className=`${Te}-enter`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${Te}-enter ${Te}-enter-active`}),this.enterTimeout=setTimeout(()=>{this.setState({className:""})},rn)})),e&&!i&&this.leaveTimeout===void 0&&(n.cachedChildren=e,n.className=`${Te}-leave`,cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame(()=>{this.setState({className:`${Te}-leave ${Te}-leave-active`}),this.leaveTimeout=setTimeout(()=>{this.setState({cachedChildren:null,className:""})},rn)})),this.setState(n)}render(){const{cachedChildren:t,className:e}=this.state;return t?Gn(t,{className:Dt(e,t.props.className)}):null}}function we(){return we=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},we.apply(this,arguments)}const sn=900,nn=700,ur=576,an=330;function Ju(r){const t=r.totalFileCount===0,e=r.totalFileCount===1,i=r.containerWidth>ur,n=r.containerHeight>an,s=Dt({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":r.disabled,"uppy-Dashboard--animateOpenClose":r.animateOpenClose,"uppy-Dashboard--isClosing":r.isClosing,"uppy-Dashboard--isDraggingOver":r.isDraggingOver,"uppy-Dashboard--modal":!r.inline,"uppy-size--md":r.containerWidth>ur,"uppy-size--lg":r.containerWidth>nn,"uppy-size--xl":r.containerWidth>sn,"uppy-size--height-md":r.containerHeight>an,"uppy-Dashboard--isAddFilesPanelVisible":r.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":r.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":r.singleFileFullScreen&&e&&n});let a=1;r.containerWidth>sn?a=5:r.containerWidth>nn?a=4:r.containerWidth>ur&&(a=3);const o=r.showSelectedFiles&&!t,l=r.recoveredState?Object.keys(r.recoveredState.files).length:null,u=r.files?Object.keys(r.files).filter(m=>r.files[m].isGhost).length:null,d=()=>u>0?r.i18n("recoveredXFiles",{smart_count:u}):r.i18n("recoveredAllFiles");return _("div",{className:s,"data-uppy-theme":r.theme,"data-uppy-num-acquirers":r.acquirers.length,"data-uppy-drag-drop-supported":!r.disableLocalFiles&&mu(),"aria-hidden":r.inline?"false":r.isHidden,"aria-disabled":r.disabled,"aria-label":r.inline?r.i18n("dashboardTitle"):r.i18n("dashboardWindowTitle"),onPaste:r.handlePaste,onDragOver:r.handleDragOver,onDragLeave:r.handleDragLeave,onDrop:r.handleDrop},_("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:r.handleClickOutside}),_("div",{className:"uppy-Dashboard-inner","aria-modal":!r.inline&&"true",role:!r.inline&&"dialog",style:{width:r.inline&&r.width?r.width:"",height:r.inline&&r.height?r.height:""}},r.inline?null:_("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":r.i18n("closeModal"),title:r.i18n("closeModal"),onClick:r.closeModal},_("span",{"aria-hidden":"true"},"×")),_("div",{className:"uppy-Dashboard-innerWrap"},_("div",{className:"uppy-Dashboard-dropFilesHereHint"},r.i18n("dropHint")),o&&_(Yu,r),l&&_("div",{className:"uppy-Dashboard-serviceMsg"},_("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},_("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},_("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),_("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),_("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),_("strong",{className:"uppy-Dashboard-serviceMsg-title"},r.i18n("sessionRestored")),_("div",{className:"uppy-Dashboard-serviceMsg-text"},d())),o?_(Hu,{id:r.id,error:r.error,i18n:r.i18n,uppy:r.uppy,files:r.files,acquirers:r.acquirers,resumableUploads:r.resumableUploads,hideRetryButton:r.hideRetryButton,hidePauseResumeButton:r.hidePauseResumeButton,hideCancelButton:r.hideCancelButton,showLinkToFileUploadResult:r.showLinkToFileUploadResult,showRemoveButtonAfterComplete:r.showRemoveButtonAfterComplete,isWide:r.isWide,metaFields:r.metaFields,toggleFileCard:r.toggleFileCard,handleRequestThumbnail:r.handleRequestThumbnail,handleCancelThumbnail:r.handleCancelThumbnail,recoveredState:r.recoveredState,individualCancellation:r.individualCancellation,openFileEditor:r.openFileEditor,canEditFile:r.canEditFile,toggleAddFilesPanel:r.toggleAddFilesPanel,isSingleFile:e,itemsPerRow:a}):_(Ca,we({},r,{isSizeMD:i})),_(Ai,null,r.showAddFilesPanel?_(Wu,we({key:"AddFiles"},r,{isSizeMD:i})):null),_(Ai,null,r.fileCardFor?_(Ku,we({key:"FileCard"},r)):null),_(Ai,null,r.activePickerPanel?_(Vu,we({key:"Picker"},r)):null),_(Ai,null,r.showFileEditor?_(qu,we({key:"Editor"},r)):null),_("div",{className:"uppy-Dashboard-progressindicators"},r.progressindicators.map(m=>r.uppy.getPlugin(m.id).render(r.state))))))}const Qu={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function _t(r,t){if(!Object.prototype.hasOwnProperty.call(r,t))throw new TypeError("attempted to use private field on non-instance");return r}var td=0;function de(r){return"__private_"+td+++"_"+r}const ed={version:"3.5.1"},dr=Qs.default||Qs,on=9,id=27;function ln(){const r={};return r.promise=new Promise((t,e)=>{r.resolve=t,r.reject=e}),r}var pe=de("disabledNodes"),Qt=de("generateLargeThumbnailIfSingleFile"),Qe=de("openFileEditorWhenFilesAdded"),fe=de("attachRenderFunctionToTarget"),cr=de("isTargetSupported"),pr=de("getAcquirers"),fr=de("getProgressIndicators"),te=de("getEditors");class Pr extends Fe{constructor(t,e){var i;super(t,e),i=this,Object.defineProperty(this,pe,{writable:!0,value:null}),this.removeTarget=s=>{const o=this.getPluginState().targets.filter(l=>l.id!==s.id);this.setPluginState({targets:o})},this.addTarget=s=>{const a=s.id||s.constructor.name,o=s.title||a,l=s.type;if(l!=="acquirer"&&l!=="progressindicator"&&l!=="editor"){const m="Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor";this.uppy.log(m,"error");return}const u={id:a,name:o,type:l},h=this.getPluginState().targets.slice();return h.push(u),this.setPluginState({targets:h}),this.el},this.hideAllPanels=()=>{const s=this.getPluginState(),a={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};s.activePickerPanel===a.activePickerPanel&&s.showAddFilesPanel===a.showAddFilesPanel&&s.showFileEditor===a.showFileEditor&&s.activeOverlayType===a.activeOverlayType||(this.setPluginState(a),this.uppy.emit("dashboard:close-panel",s.activePickerPanel.id))},this.showPanel=s=>{const{targets:a}=this.getPluginState(),o=a.filter(l=>l.type==="acquirer"&&l.id===s)[0];this.setPluginState({activePickerPanel:o,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",s)},this.canEditFile=s=>{const{targets:a}=this.getPluginState();return _t(this,te)[te](a).some(l=>this.uppy.getPlugin(l.id).canEditFile(s))},this.openFileEditor=s=>{const{targets:a}=this.getPluginState(),o=_t(this,te)[te](a);this.setPluginState({showFileEditor:!0,fileCardFor:s.id||null,activeOverlayType:"FileEditor"}),o.forEach(l=>{this.uppy.getPlugin(l.id).selectFile(s)})},this.saveFileEditor=()=>{const{targets:s}=this.getPluginState();_t(this,te)[te](s).forEach(o=>{this.uppy.getPlugin(o.id).save()}),this.hideAllPanels()},this.openModal=()=>{const{promise:s,resolve:a}=ln();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){const o=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",o,!1),a()};this.el.addEventListener("animationend",o,!1)}else this.setPluginState({isHidden:!1}),a();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),s},this.closeModal=function(s){s===void 0&&(s={});const{manualClose:a=!0}=s,{isHidden:o,isClosing:l}=i.getPluginState();if(o||l)return;const{promise:u,resolve:d}=ln();if(i.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),i.opts.animateOpenClose){i.setPluginState({isClosing:!0});const m=()=>{i.setPluginState({isHidden:!0,isClosing:!1}),i.superFocus.cancel(),i.savedActiveElement.focus(),i.el.removeEventListener("animationend",m,!1),d()};i.el.addEventListener("animationend",m,!1)}else i.setPluginState({isHidden:!0}),i.superFocus.cancel(),i.savedActiveElement.focus(),d();if(document.removeEventListener("keydown",i.handleKeyDownInModal),a&&i.opts.browserBackButtonClose){var h;(h=history.state)!=null&&h[i.modalName]&&history.back()}return i.uppy.emit("dashboard:modal-closed"),u},this.isModalOpen=()=>!this.getPluginState().isHidden||!1,this.requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal(),this.setDarkModeCapability=s=>{const{capabilities:a}=this.uppy.getState();this.uppy.setState({capabilities:{...a,darkMode:s}})},this.handleSystemDarkModeChange=s=>{const a=s.matches;this.uppy.log(`[Dashboard] Dark mode is ${a?"on":"off"}`),this.setDarkModeCapability(a)},this.toggleFileCard=(s,a)=>{const o=this.uppy.getFile(a);s?this.uppy.emit("dashboard:file-edit-start",o):this.uppy.emit("dashboard:file-edit-complete",o),this.setPluginState({fileCardFor:s?a:null,activeOverlayType:s?"FileCard":null})},this.toggleAddFilesPanel=s=>{this.setPluginState({showAddFilesPanel:s,activeOverlayType:s?"AddFiles":null})},this.addFiles=s=>{const a=s.map(o=>({source:this.id,name:o.name,type:o.type,data:o,meta:{relativePath:o.relativePath||o.webkitRelativePath||null}}));try{this.uppy.addFiles(a)}catch(o){this.uppy.log(o)}},this.startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(s=>{const a=s[0],{width:o,height:l}=a.contentRect;this.setPluginState({containerWidth:o,containerHeight:l,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{const s=this.getPluginState(),a=!this.opts.inline&&s.isHidden;!s.areInsidesReadyToBeVisible&&!a&&(this.uppy.log("[Dashboard] resize event didn’t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)},this.stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)},this.recordIfFocusedOnUppyRecently=s=>{this.el.contains(s.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())},this.disableInteractiveElements=s=>{var a;const o=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],l=(a=_t(this,pe)[pe])!=null?a:li(this.el.querySelectorAll(o)).filter(u=>!u.classList.contains("uppy-Dashboard-close"));for(const u of l)u.tagName==="A"?u.setAttribute("aria-disabled",s):u.disabled=s;s?_t(this,pe)[pe]=l:_t(this,pe)[pe]=null,this.dashboardIsDisabled=s},this.updateBrowserHistory=()=>{var s;(s=history.state)!=null&&s[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)},this.handlePopState=s=>{var a;this.isModalOpen()&&(!s.state||!s.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&(a=s.state)!=null&&a[this.modalName]&&history.back()},this.handleKeyDownInModal=s=>{s.keyCode===id&&this.requestCloseModal(s),s.keyCode===on&&ba(s,this.getPluginState().activeOverlayType,this.el)},this.handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()},this.handlePaste=s=>{this.uppy.iteratePlugins(o=>{o.type==="acquirer"&&(o.handleRootPaste==null||o.handleRootPaste(s))});const a=li(s.clipboardData.files);a.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(a))},this.handleInputChange=s=>{s.preventDefault();const a=li(s.target.files);a.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(a))},this.handleDragOver=s=>{var a,o;s.preventDefault(),s.stopPropagation();const l=()=>{let m=!0;return this.uppy.iteratePlugins(p=>{p.canHandleRootDrop!=null&&p.canHandleRootDrop(s)&&(m=!0)}),m},u=()=>{const{types:m}=s.dataTransfer;return m.some(p=>p==="Files")},d=l(),h=u();if(!d&&!h||this.opts.disabled||this.opts.disableLocalFiles&&(h||!d)||!this.uppy.getState().allowNewUpload){s.dataTransfer.dropEffect="none",clearTimeout(this.removeDragOverClassTimeout);return}s.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),(a=(o=this.opts).onDragOver)==null||a.call(o,s)},this.handleDragLeave=s=>{var a,o;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout(()=>{this.setPluginState({isDraggingOver:!1})},50),(a=(o=this.opts).onDragLeave)==null||a.call(o,s)},this.handleDrop=async s=>{var a,o;s.preventDefault(),s.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(h=>{h.type==="acquirer"&&(h.handleRootDrop==null||h.handleRootDrop(s))});let l=!1;const u=h=>{this.uppy.log(h,"error"),l||(this.uppy.info(h.message,"error"),l=!0)};this.uppy.log("[Dashboard] Processing dropped files");const d=await Jh(s.dataTransfer,{logDropError:u});d.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(d)),(a=(o=this.opts).onDrop)==null||a.call(o,s)},this.handleRequestThumbnail=s=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",s)},this.handleCancelThumbnail=s=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",s)},this.handleKeyDownInInline=s=>{s.keyCode===on&&pu(s,this.getPluginState().activeOverlayType,this.el)},this.handlePasteOnBody=s=>{this.el.contains(document.activeElement)&&this.handlePaste(s)},this.handleComplete=s=>{let{failed:a}=s;this.opts.closeAfterFinish&&a.length===0&&this.requestCloseModal()},this.handleCancelRestore=()=>{this.uppy.emit("restore-canceled")},Object.defineProperty(this,Qt,{writable:!0,value:()=>{if(this.opts.disableThumbnailGenerator)return;const s=600,a=this.uppy.getFiles();if(a.length===1){const o=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);o==null||o.setOptions({thumbnailWidth:s});const l={...a[0],preview:void 0};o.requestThumbnail(l).then(()=>{o==null||o.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}}}),Object.defineProperty(this,Qe,{writable:!0,value:s=>{const a=s[0];this.canEditFile(a)&&this.openFileEditor(a)}}),this.initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){const s=$s(this.opts.trigger);s?s.forEach(a=>a.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("file-editor:complete",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",_t(this,Qt)[Qt]),this.uppy.on("file-removed",_t(this,Qt)[Qt]),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.on("files-added",_t(this,Qe)[Qe])},this.removeEvents=()=>{const s=$s(this.opts.trigger);!this.opts.inline&&s&&s.forEach(a=>a.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("file-editor:complete",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",_t(this,Qt)[Qt]),this.uppy.off("file-removed",_t(this,Qt)[Qt]),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpenFileEditor&&this.uppy.off("files-added",_t(this,Qe)[Qe])},this.superFocusOnEachUpdate=()=>{const s=this.el.contains(document.activeElement),a=document.activeElement===document.body||document.activeElement===null,o=this.uppy.getState().info.length===0,l=!this.opts.inline;o&&(l||s||a&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()},this.afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()},this.saveFileCard=(s,a)=>{this.uppy.setFileMeta(a,s),this.toggleFileCard(!1,a)},Object.defineProperty(this,fe,{writable:!0,value:s=>{const a=this.uppy.getPlugin(s.id);return{...s,icon:a.icon||this.opts.defaultPickerIcon,render:a.render}}}),Object.defineProperty(this,cr,{writable:!0,value:s=>{const a=this.uppy.getPlugin(s.id);return typeof a.isSupported!="function"?!0:a.isSupported()}}),Object.defineProperty(this,pr,{writable:!0,value:dr(s=>s.filter(a=>a.type==="acquirer"&&_t(this,cr)[cr](a)).map(_t(this,fe)[fe]))}),Object.defineProperty(this,fr,{writable:!0,value:dr(s=>s.filter(a=>a.type==="progressindicator").map(_t(this,fe)[fe]))}),Object.defineProperty(this,te,{writable:!0,value:dr(s=>s.filter(a=>a.type==="editor").map(_t(this,fe)[fe]))}),this.render=s=>{const a=this.getPluginState(),{files:o,capabilities:l,allowNewUpload:u}=s,{newFiles:d,uploadStartedFiles:h,completeFiles:m,erroredFiles:p,inProgressFiles:g,inProgressNotPausedFiles:f,processingFiles:y,isUploadStarted:b,isAllComplete:w,isAllErrored:k,isAllPaused:T}=this.uppy.getObjectOfFilesPerState(),x=_t(this,pr)[pr](a.targets),F=_t(this,fr)[fr](a.targets),A=_t(this,te)[te](a.targets);let N;return this.opts.theme==="auto"?N=l.darkMode?"dark":"light":N=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),Ju({state:s,isHidden:a.isHidden,files:o,newFiles:d,uploadStartedFiles:h,completeFiles:m,erroredFiles:p,inProgressFiles:g,inProgressNotPausedFiles:f,processingFiles:y,isUploadStarted:b,isAllComplete:w,isAllErrored:k,isAllPaused:T,totalFileCount:Object.keys(o).length,totalProgress:s.totalProgress,allowNewUpload:u,acquirers:x,theme:N,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:a.activePickerPanel,showFileEditor:a.showFileEditor,saveFileEditor:this.saveFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:a.isClosing,progressindicators:F,editors:A,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:s.recoveredState,metaFields:a.metaFields,resumableUploads:l.resumableUploads||!1,individualCancellation:l.individualCancellation,isMobileDevice:l.isMobileDevice,fileCardFor:a.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:a.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:a.containerWidth,containerHeight:a.containerHeight,areInsidesReadyToBeVisible:a.areInsidesReadyToBeVisible,isTargetDOMEl:this.isTargetDOMEl,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:a.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})},this.discoverProviderPlugins=()=>{this.uppy.iteratePlugins(s=>{s&&!s.target&&s.opts&&s.opts.target===this.constructor&&this.addTarget(s)})},this.install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});const{inline:s,closeAfterFinish:a}=this.opts;if(s&&a)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");const{allowMultipleUploads:o,allowMultipleUploadBatches:l}=this.uppy.opts;(o||l)&&a&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");const{target:u}=this.opts;u&&this.mount(u,this),(this.opts.plugins||[]).forEach(m=>{const p=this.uppy.getPlugin(m);p&&p.mount(this,p)}),this.opts.disableStatusBar||this.uppy.use(Jn,{id:`${this.id}:StatusBar`,target:this,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,showProgressDetails:this.opts.showProgressDetails,hideAfterFinish:this.opts.hideProgressAfterFinish,locale:this.opts.locale,doneButtonHandler:this.opts.doneButtonHandler}),this.opts.disableInformer||this.uppy.use(ta,{id:`${this.id}:Informer`,target:this}),this.opts.disableThumbnailGenerator||this.uppy.use(ha,{id:`${this.id}:ThumbnailGenerator`,thumbnailWidth:this.opts.thumbnailWidth,thumbnailHeight:this.opts.thumbnailHeight,thumbnailType:this.opts.thumbnailType,waitForThumbnailsBeforeUpload:this.opts.waitForThumbnailsBeforeUpload,lazy:!this.opts.waitForThumbnailsBeforeUpload}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;const h=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${h?"on":"off"}`),this.setDarkModeCapability(h),this.opts.theme==="auto"&&this.darkModeMediaQuery.addListener(this.handleSystemDarkModeChange),this.discoverProviderPlugins(),this.initEvents()},this.uninstall=()=>{if(!this.opts.disableInformer){const a=this.uppy.getPlugin(`${this.id}:Informer`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableStatusBar){const a=this.uppy.getPlugin(`${this.id}:StatusBar`);a&&this.uppy.removePlugin(a)}if(!this.opts.disableThumbnailGenerator){const a=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);a&&this.uppy.removePlugin(a)}(this.opts.plugins||[]).forEach(a=>{const o=this.uppy.getPlugin(a);o&&o.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery.removeListener(this.handleSystemDarkModeChange),this.unmount(),this.removeEvents()},this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.modalName=`uppy-Dashboard-${Lr()}`,this.defaultLocale=Qu;const n={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:lu,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:()=>{this.uppy.cancelAll(),this.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:()=>this.closeModal(),showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};this.opts={...n,...e},this.i18nInit(),this.superFocus=fu(),this.ifFocusedOnUppyRecently=!1,this.makeDashboardInsidesVisibleAnywayTimeout=null,this.removeDragOverClassTimeout=null}}Pr.VERSION=ed.version;/*!
 * Cropper.js v1.5.7
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2020-05-23T05:23:00.081Z
 */function Ri(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ri=function(t){return typeof t}:Ri=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(r)}function rd(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(r,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function sd(r,t,e){return t&&hn(r.prototype,t),e&&hn(r,e),r}function nd(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function un(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})),e.push.apply(e,i)}return e}function Fa(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?un(Object(e),!0).forEach(function(i){nd(r,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):un(Object(e)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(e,i))})}return r}function xa(r){return ad(r)||od(r)||ld(r)||hd()}function ad(r){if(Array.isArray(r))return Or(r)}function od(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}function ld(r,t){if(r){if(typeof r=="string")return Or(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Or(r,t)}}function Or(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=r[e];return i}function hd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Hi=typeof window<"u"&&typeof window.document<"u",Xt=Hi?window:{},Kr=Hi&&Xt.document.documentElement?"ontouchstart"in Xt.document.documentElement:!1,Jr=Hi?"PointerEvent"in Xt:!1,ut="cropper",Qr="all",Ea="crop",Ta="move",Aa="zoom",me="e",ge="w",Ae="s",se="n",ti="ne",ei="nw",ii="se",ri="sw",Dr="".concat(ut,"-crop"),dn="".concat(ut,"-disabled"),Tt="".concat(ut,"-hidden"),cn="".concat(ut,"-hide"),ud="".concat(ut,"-invisible"),ji="".concat(ut,"-modal"),Ir="".concat(ut,"-move"),mi="".concat(ut,"Action"),Pi="".concat(ut,"Preview"),ts="crop",Pa="move",Oa="none",Nr="crop",Br="cropend",Rr="cropmove",zr="cropstart",pn="dblclick",dd=Kr?"touchstart":"mousedown",cd=Kr?"touchmove":"mousemove",pd=Kr?"touchend touchcancel":"mouseup",fn=Jr?"pointerdown":dd,mn=Jr?"pointermove":cd,gn=Jr?"pointerup pointercancel":pd,vn="ready",yn="resize",bn="wheel",Ur="zoom",_n="image/jpeg",fd=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,md=/^data:/,gd=/^data:image\/jpeg;base64,/,vd=/^img|canvas$/i,wn={viewMode:0,dragMode:ts,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},yd='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',bd=Number.isNaN||Xt.isNaN;function st(r){return typeof r=="number"&&!bd(r)}var Sn=function(t){return t>0&&t<1/0};function mr(r){return typeof r>"u"}function Ce(r){return Ri(r)==="object"&&r!==null}var _d=Object.prototype.hasOwnProperty;function De(r){if(!Ce(r))return!1;try{var t=r.constructor,e=t.prototype;return t&&e&&_d.call(e,"isPrototypeOf")}catch{return!1}}function Et(r){return typeof r=="function"}var wd=Array.prototype.slice;function Da(r){return Array.from?Array.from(r):wd.call(r)}function yt(r,t){return r&&Et(t)&&(Array.isArray(r)||st(r.length)?Da(r).forEach(function(e,i){t.call(r,e,i,r)}):Ce(r)&&Object.keys(r).forEach(function(e){t.call(r,r[e],e,r)})),r}var dt=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return Ce(t)&&i.length>0&&i.forEach(function(s){Ce(s)&&Object.keys(s).forEach(function(a){t[a]=s[a]})}),t},Sd=/\.\d*(?:0|9){12}\d*$/;function Be(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Sd.test(r)?Math.round(r*t)/t:r}var kd=/^width|height|left|top|marginLeft|marginTop$/;function le(r,t){var e=r.style;yt(t,function(i,n){kd.test(n)&&st(i)&&(i="".concat(i,"px")),e[n]=i})}function Cd(r,t){return r.classList?r.classList.contains(t):r.className.indexOf(t)>-1}function kt(r,t){if(t){if(st(r.length)){yt(r,function(i){kt(i,t)});return}if(r.classList){r.classList.add(t);return}var e=r.className.trim();e?e.indexOf(t)<0&&(r.className="".concat(e," ").concat(t)):r.className=t}}function Gt(r,t){if(t){if(st(r.length)){yt(r,function(e){Gt(e,t)});return}if(r.classList){r.classList.remove(t);return}r.className.indexOf(t)>=0&&(r.className=r.className.replace(t,""))}}function Ie(r,t,e){if(t){if(st(r.length)){yt(r,function(i){Ie(i,t,e)});return}e?kt(r,t):Gt(r,t)}}var Fd=/([a-z\d])([A-Z])/g;function es(r){return r.replace(Fd,"$1-$2").toLowerCase()}function Mr(r,t){return Ce(r[t])?r[t]:r.dataset?r.dataset[t]:r.getAttribute("data-".concat(es(t)))}function gi(r,t,e){Ce(e)?r[t]=e:r.dataset?r.dataset[t]=e:r.setAttribute("data-".concat(es(t)),e)}function xd(r,t){if(Ce(r[t]))try{delete r[t]}catch{r[t]=void 0}else if(r.dataset)try{delete r.dataset[t]}catch{r.dataset[t]=void 0}else r.removeAttribute("data-".concat(es(t)))}var Ia=/\s\s*/,Na=function(){var r=!1;if(Hi){var t=!1,e=function(){},i=Object.defineProperty({},"once",{get:function(){return r=!0,t},set:function(s){t=s}});Xt.addEventListener("test",e,i),Xt.removeEventListener("test",e,i)}return r}();function Ut(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;t.trim().split(Ia).forEach(function(s){if(!Na){var a=r.listeners;a&&a[s]&&a[s][e]&&(n=a[s][e],delete a[s][e],Object.keys(a[s]).length===0&&delete a[s],Object.keys(a).length===0&&delete r.listeners)}r.removeEventListener(s,n,i)})}function Nt(r,t,e){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=e;t.trim().split(Ia).forEach(function(s){if(i.once&&!Na){var a=r.listeners,o=a===void 0?{}:a;n=function(){delete o[s][e],r.removeEventListener(s,n,i);for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];e.apply(r,d)},o[s]||(o[s]={}),o[s][e]&&r.removeEventListener(s,o[s][e],i),o[s][e]=n,r.listeners=o}r.addEventListener(s,n,i)})}function Re(r,t,e){var i;return Et(Event)&&Et(CustomEvent)?i=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,e)),r.dispatchEvent(i)}function Ba(r){var t=r.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var gr=Xt.location,Ed=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function kn(r){var t=r.match(Ed);return t!==null&&(t[1]!==gr.protocol||t[2]!==gr.hostname||t[3]!==gr.port)}function Cn(r){var t="timestamp=".concat(new Date().getTime());return r+(r.indexOf("?")===-1?"?":"&")+t}function hi(r){var t=r.rotate,e=r.scaleX,i=r.scaleY,n=r.translateX,s=r.translateY,a=[];st(n)&&n!==0&&a.push("translateX(".concat(n,"px)")),st(s)&&s!==0&&a.push("translateY(".concat(s,"px)")),st(t)&&t!==0&&a.push("rotate(".concat(t,"deg)")),st(e)&&e!==1&&a.push("scaleX(".concat(e,")")),st(i)&&i!==1&&a.push("scaleY(".concat(i,")"));var o=a.length?a.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function Td(r){var t=Fa({},r),e=[];return yt(r,function(i,n){delete t[n],yt(t,function(s){var a=Math.abs(i.startX-s.startX),o=Math.abs(i.startY-s.startY),l=Math.abs(i.endX-s.endX),u=Math.abs(i.endY-s.endY),d=Math.sqrt(a*a+o*o),h=Math.sqrt(l*l+u*u),m=(h-d)/d;e.push(m)})}),e.sort(function(i,n){return Math.abs(i)<Math.abs(n)}),e[0]}function Oi(r,t){var e=r.pageX,i=r.pageY,n={endX:e,endY:i};return t?n:Fa({startX:e,startY:i},n)}function Ad(r){var t=0,e=0,i=0;return yt(r,function(n){var s=n.startX,a=n.startY;t+=s,e+=a,i+=1}),t/=i,e/=i,{pageX:t,pageY:e}}function he(r){var t=r.aspectRatio,e=r.height,i=r.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",s=Sn(i),a=Sn(e);if(s&&a){var o=e*t;n==="contain"&&o>i||n==="cover"&&o<i?e=i/t:i=e*t}else s?e=i/t:a&&(i=e*t);return{width:i,height:e}}function Pd(r){var t=r.width,e=r.height,i=r.degree;if(i=Math.abs(i)%180,i===90)return{width:e,height:t};var n=i%90*Math.PI/180,s=Math.sin(n),a=Math.cos(n),o=t*a+e*s,l=t*s+e*a;return i>90?{width:l,height:o}:{width:o,height:l}}function Od(r,t,e,i){var n=t.aspectRatio,s=t.naturalWidth,a=t.naturalHeight,o=t.rotate,l=o===void 0?0:o,u=t.scaleX,d=u===void 0?1:u,h=t.scaleY,m=h===void 0?1:h,p=e.aspectRatio,g=e.naturalWidth,f=e.naturalHeight,y=i.fillColor,b=y===void 0?"transparent":y,w=i.imageSmoothingEnabled,k=w===void 0?!0:w,T=i.imageSmoothingQuality,x=T===void 0?"low":T,F=i.maxWidth,A=F===void 0?1/0:F,N=i.maxHeight,O=N===void 0?1/0:N,L=i.minWidth,K=L===void 0?0:L,E=i.minHeight,z=E===void 0?0:E,v=document.createElement("canvas"),U=v.getContext("2d"),J=he({aspectRatio:p,width:A,height:O}),$=he({aspectRatio:p,width:K,height:z},"cover"),it=Math.min(J.width,Math.max($.width,g)),W=Math.min(J.height,Math.max($.height,f)),et=he({aspectRatio:n,width:A,height:O}),B=he({aspectRatio:n,width:K,height:z},"cover"),I=Math.min(et.width,Math.max(B.width,s)),Q=Math.min(et.height,Math.max(B.height,a)),X=[-I/2,-Q/2,I,Q];return v.width=Be(it),v.height=Be(W),U.fillStyle=b,U.fillRect(0,0,it,W),U.save(),U.translate(it/2,W/2),U.rotate(l*Math.PI/180),U.scale(d,m),U.imageSmoothingEnabled=k,U.imageSmoothingQuality=x,U.drawImage.apply(U,[r].concat(xa(X.map(function(G){return Math.floor(Be(G))})))),U.restore(),v}var Ra=String.fromCharCode;function Dd(r,t,e){var i="";e+=t;for(var n=t;n<e;n+=1)i+=Ra(r.getUint8(n));return i}var Id=/^data:.*,/;function Nd(r){var t=r.replace(Id,""),e=atob(t),i=new ArrayBuffer(e.length),n=new Uint8Array(i);return yt(n,function(s,a){n[a]=e.charCodeAt(a)}),i}function Bd(r,t){for(var e=[],i=8192,n=new Uint8Array(r);n.length>0;)e.push(Ra.apply(null,Da(n.subarray(0,i)))),n=n.subarray(i);return"data:".concat(t,";base64,").concat(btoa(e.join("")))}function Rd(r){var t=new DataView(r),e;try{var i,n,s;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var a=t.byteLength,o=2;o+1<a;){if(t.getUint8(o)===255&&t.getUint8(o+1)===225){n=o;break}o+=1}if(n){var l=n+4,u=n+10;if(Dd(t,l,4)==="Exif"){var d=t.getUint16(u);if(i=d===18761,(i||d===19789)&&t.getUint16(u+2,i)===42){var h=t.getUint32(u+4,i);h>=8&&(s=u+h)}}}if(s){var m=t.getUint16(s,i),p,g;for(g=0;g<m;g+=1)if(p=s+g*12+2,t.getUint16(p,i)===274){p+=8,e=t.getUint16(p,i),t.setUint16(p,1,i);break}}}catch{e=1}return e}function zd(r){var t=0,e=1,i=1;switch(r){case 2:e=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,e=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:e,scaleY:i}}var Ud={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,n=this.cropper;kt(n,Tt),Gt(t,Tt);var s={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=s,le(n,{width:s.width,height:s.height}),kt(t,Tt),Gt(n,Tt)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,n=Math.abs(e.rotate)%180===90,s=n?e.naturalHeight:e.naturalWidth,a=n?e.naturalWidth:e.naturalHeight,o=s/a,l=t.width,u=t.height;t.height*o>t.width?i===3?l=t.height*o:u=t.width/o:i===3?u=t.width/o:l=t.height*o;var d={aspectRatio:o,naturalWidth:s,naturalHeight:a,width:l,height:u};d.left=(t.width-l)/2,d.top=(t.height-u)/2,d.oldLeft=d.left,d.oldTop=d.top,this.canvasData=d,this.limited=i===1||i===2,this.limitCanvas(!0,!0),this.initialImageData=dt({},e),this.initialCanvasData=dt({},d)},limitCanvas:function(t,e){var i=this.options,n=this.containerData,s=this.canvasData,a=this.cropBoxData,o=i.viewMode,l=s.aspectRatio,u=this.cropped&&a;if(t){var d=Number(i.minCanvasWidth)||0,h=Number(i.minCanvasHeight)||0;o>1?(d=Math.max(d,n.width),h=Math.max(h,n.height),o===3&&(h*l>d?d=h*l:h=d/l)):o>0&&(d?d=Math.max(d,u?a.width:0):h?h=Math.max(h,u?a.height:0):u&&(d=a.width,h=a.height,h*l>d?d=h*l:h=d/l));var m=he({aspectRatio:l,width:d,height:h});d=m.width,h=m.height,s.minWidth=d,s.minHeight=h,s.maxWidth=1/0,s.maxHeight=1/0}if(e)if(o>(u?0:1)){var p=n.width-s.width,g=n.height-s.height;s.minLeft=Math.min(0,p),s.minTop=Math.min(0,g),s.maxLeft=Math.max(0,p),s.maxTop=Math.max(0,g),u&&this.limited&&(s.minLeft=Math.min(a.left,a.left+(a.width-s.width)),s.minTop=Math.min(a.top,a.top+(a.height-s.height)),s.maxLeft=a.left,s.maxTop=a.top,o===2&&(s.width>=n.width&&(s.minLeft=Math.min(0,p),s.maxLeft=Math.max(0,p)),s.height>=n.height&&(s.minTop=Math.min(0,g),s.maxTop=Math.max(0,g))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=n.width,s.maxTop=n.height},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var s=Pd({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),a=s.width,o=s.height,l=i.width*(a/i.naturalWidth),u=i.height*(o/i.naturalHeight);i.left-=(l-i.width)/2,i.top-=(u-i.height)/2,i.width=l,i.height=u,i.aspectRatio=a/o,i.naturalWidth=a,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,le(this.canvas,dt({width:i.width,height:i.height},hi({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),s=i.naturalHeight*(e.height/e.naturalHeight);dt(i,{width:n,height:s,left:(e.width-n)/2,top:(e.height-s)/2}),le(this.image,dt({width:i.width,height:i.height},hi(dt({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,s={width:e.width,height:e.height};i&&(e.height*i>e.width?s.height=s.width/i:s.width=s.height*i),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*n),s.height=Math.max(s.minHeight,s.height*n),s.left=e.left+(e.width-s.width)/2,s.top=e.top+(e.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=dt({},s)},limitCropBox:function(t,e){var i=this.options,n=this.containerData,s=this.canvasData,a=this.cropBoxData,o=this.limited,l=i.aspectRatio;if(t){var u=Number(i.minCropBoxWidth)||0,d=Number(i.minCropBoxHeight)||0,h=o?Math.min(n.width,s.width,s.width+s.left,n.width-s.left):n.width,m=o?Math.min(n.height,s.height,s.height+s.top,n.height-s.top):n.height;u=Math.min(u,n.width),d=Math.min(d,n.height),l&&(u&&d?d*l>u?d=u/l:u=d*l:u?d=u/l:d&&(u=d*l),m*l>h?m=h/l:h=m*l),a.minWidth=Math.min(u,h),a.minHeight=Math.min(d,m),a.maxWidth=h,a.maxHeight=m}e&&(o?(a.minLeft=Math.max(0,s.left),a.minTop=Math.max(0,s.top),a.maxLeft=Math.min(n.width,s.left+s.width)-a.width,a.maxTop=Math.min(n.height,s.top+s.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=n.width-a.width,a.maxTop=n.height-a.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&gi(this.face,mi,i.width>=e.width&&i.height>=e.height?Ta:Qr),le(this.cropBox,dt({width:i.width,height:i.height},hi({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Re(this.element,Nr,this.getData())}},Md={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,n=e?this.crossOriginUrl:this.url,s=t.alt||"The image to preview",a=document.createElement("img");if(e&&(a.crossOrigin=e),a.src=n,a.alt=s,this.viewBox.appendChild(a),this.viewBoxImage=a,!!i){var o=i;typeof i=="string"?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,yt(o,function(l){var u=document.createElement("img");gi(l,Pi,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),e&&(u.crossOrigin=e),u.src=n,u.alt=s,u.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(u)})}},resetPreview:function(){yt(this.previews,function(t){var e=Mr(t,Pi);le(t,{width:e.width,height:e.height}),t.innerHTML=e.html,xd(t,Pi)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,s=i.height,a=t.width,o=t.height,l=i.left-e.left-t.left,u=i.top-e.top-t.top;!this.cropped||this.disabled||(le(this.viewBoxImage,dt({width:a,height:o},hi(dt({translateX:-l,translateY:-u},t)))),yt(this.previews,function(d){var h=Mr(d,Pi),m=h.width,p=h.height,g=m,f=p,y=1;n&&(y=m/n,f=s*y),s&&f>p&&(y=p/s,g=n*y,f=p),le(d,{width:g,height:f}),le(d.getElementsByTagName("img")[0],dt({width:a*y,height:o*y},hi(dt({translateX:-l*y,translateY:-u*y},t))))}))}},Ld={bind:function(){var t=this.element,e=this.options,i=this.cropper;Et(e.cropstart)&&Nt(t,zr,e.cropstart),Et(e.cropmove)&&Nt(t,Rr,e.cropmove),Et(e.cropend)&&Nt(t,Br,e.cropend),Et(e.crop)&&Nt(t,Nr,e.crop),Et(e.zoom)&&Nt(t,Ur,e.zoom),Nt(i,fn,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Nt(i,bn,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Nt(i,pn,this.onDblclick=this.dblclick.bind(this)),Nt(t.ownerDocument,mn,this.onCropMove=this.cropMove.bind(this)),Nt(t.ownerDocument,gn,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Nt(window,yn,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;Et(e.cropstart)&&Ut(t,zr,e.cropstart),Et(e.cropmove)&&Ut(t,Rr,e.cropmove),Et(e.cropend)&&Ut(t,Br,e.cropend),Et(e.crop)&&Ut(t,Nr,e.crop),Et(e.zoom)&&Ut(t,Ur,e.zoom),Ut(i,fn,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Ut(i,bn,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ut(i,pn,this.onDblclick),Ut(t.ownerDocument,mn,this.onCropMove),Ut(t.ownerDocument,gn,this.onCropEnd),e.responsive&&Ut(window,yn,this.onResize)}},jd={resize:function(){if(!this.disabled){var t=this.options,e=this.container,i=this.containerData,n=e.offsetWidth/i.width;if(n!==1||e.offsetHeight!==i.height){var s,a;t.restore&&(s=this.getCanvasData(),a=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(yt(s,function(o,l){s[l]=o*n})),this.setCropBoxData(yt(a,function(o,l){a[l]=o*n})))}}},dblclick:function(){this.disabled||this.options.dragMode===Oa||this.setDragMode(Cd(this.dragBox,Dr)?Pa:ts)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(st(e)&&e!==1||st(i)&&i!==0||t.ctrlKey))){var n=this.options,s=this.pointers,a;t.changedTouches?yt(t.changedTouches,function(o){s[o.identifier]=Oi(o)}):s[t.pointerId||0]=Oi(t),Object.keys(s).length>1&&n.zoomable&&n.zoomOnTouch?a=Aa:a=Mr(t.target,mi),fd.test(a)&&Re(this.element,zr,{originalEvent:t,action:a})!==!1&&(t.preventDefault(),this.action=a,this.cropping=!1,a===Ea&&(this.cropping=!0,kt(this.dragBox,ji)))}},cropMove:function(t){var e=this.action;if(!(this.disabled||!e)){var i=this.pointers;t.preventDefault(),Re(this.element,Rr,{originalEvent:t,action:e})!==!1&&(t.changedTouches?yt(t.changedTouches,function(n){dt(i[n.identifier]||{},Oi(n,!0))}):dt(i[t.pointerId||0]||{},Oi(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?yt(t.changedTouches,function(n){delete i[n.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ie(this.dragBox,ji,this.cropped&&this.options.modal)),Re(this.element,Br,{originalEvent:t,action:e}))}}},$d={change:function(t){var e=this.options,i=this.canvasData,n=this.containerData,s=this.cropBoxData,a=this.pointers,o=this.action,l=e.aspectRatio,u=s.left,d=s.top,h=s.width,m=s.height,p=u+h,g=d+m,f=0,y=0,b=n.width,w=n.height,k=!0,T;!l&&t.shiftKey&&(l=h&&m?h/m:1),this.limited&&(f=s.minLeft,y=s.minTop,b=f+Math.min(n.width,i.width,i.left+i.width),w=y+Math.min(n.height,i.height,i.top+i.height));var x=a[Object.keys(a)[0]],F={x:x.endX-x.startX,y:x.endY-x.startY},A=function(O){switch(O){case me:p+F.x>b&&(F.x=b-p);break;case ge:u+F.x<f&&(F.x=f-u);break;case se:d+F.y<y&&(F.y=y-d);break;case Ae:g+F.y>w&&(F.y=w-g);break}};switch(o){case Qr:u+=F.x,d+=F.y;break;case me:if(F.x>=0&&(p>=b||l&&(d<=y||g>=w))){k=!1;break}A(me),h+=F.x,h<0&&(o=ge,h=-h,u-=h),l&&(m=h/l,d+=(s.height-m)/2);break;case se:if(F.y<=0&&(d<=y||l&&(u<=f||p>=b))){k=!1;break}A(se),m-=F.y,d+=F.y,m<0&&(o=Ae,m=-m,d-=m),l&&(h=m*l,u+=(s.width-h)/2);break;case ge:if(F.x<=0&&(u<=f||l&&(d<=y||g>=w))){k=!1;break}A(ge),h-=F.x,u+=F.x,h<0&&(o=me,h=-h,u-=h),l&&(m=h/l,d+=(s.height-m)/2);break;case Ae:if(F.y>=0&&(g>=w||l&&(u<=f||p>=b))){k=!1;break}A(Ae),m+=F.y,m<0&&(o=se,m=-m,d-=m),l&&(h=m*l,u+=(s.width-h)/2);break;case ti:if(l){if(F.y<=0&&(d<=y||p>=b)){k=!1;break}A(se),m-=F.y,d+=F.y,h=m*l}else A(se),A(me),F.x>=0?p<b?h+=F.x:F.y<=0&&d<=y&&(k=!1):h+=F.x,F.y<=0?d>y&&(m-=F.y,d+=F.y):(m-=F.y,d+=F.y);h<0&&m<0?(o=ri,m=-m,h=-h,d-=m,u-=h):h<0?(o=ei,h=-h,u-=h):m<0&&(o=ii,m=-m,d-=m);break;case ei:if(l){if(F.y<=0&&(d<=y||u<=f)){k=!1;break}A(se),m-=F.y,d+=F.y,h=m*l,u+=s.width-h}else A(se),A(ge),F.x<=0?u>f?(h-=F.x,u+=F.x):F.y<=0&&d<=y&&(k=!1):(h-=F.x,u+=F.x),F.y<=0?d>y&&(m-=F.y,d+=F.y):(m-=F.y,d+=F.y);h<0&&m<0?(o=ii,m=-m,h=-h,d-=m,u-=h):h<0?(o=ti,h=-h,u-=h):m<0&&(o=ri,m=-m,d-=m);break;case ri:if(l){if(F.x<=0&&(u<=f||g>=w)){k=!1;break}A(ge),h-=F.x,u+=F.x,m=h/l}else A(Ae),A(ge),F.x<=0?u>f?(h-=F.x,u+=F.x):F.y>=0&&g>=w&&(k=!1):(h-=F.x,u+=F.x),F.y>=0?g<w&&(m+=F.y):m+=F.y;h<0&&m<0?(o=ti,m=-m,h=-h,d-=m,u-=h):h<0?(o=ii,h=-h,u-=h):m<0&&(o=ei,m=-m,d-=m);break;case ii:if(l){if(F.x>=0&&(p>=b||g>=w)){k=!1;break}A(me),h+=F.x,m=h/l}else A(Ae),A(me),F.x>=0?p<b?h+=F.x:F.y>=0&&g>=w&&(k=!1):h+=F.x,F.y>=0?g<w&&(m+=F.y):m+=F.y;h<0&&m<0?(o=ei,m=-m,h=-h,d-=m,u-=h):h<0?(o=ri,h=-h,u-=h):m<0&&(o=ti,m=-m,d-=m);break;case Ta:this.move(F.x,F.y),k=!1;break;case Aa:this.zoom(Td(a),t),k=!1;break;case Ea:if(!F.x||!F.y){k=!1;break}T=Ba(this.cropper),u=x.startX-T.left,d=x.startY-T.top,h=s.minWidth,m=s.minHeight,F.x>0?o=F.y>0?ii:ti:F.x<0&&(u-=h,o=F.y>0?ri:ei),F.y<0&&(d-=m),this.cropped||(Gt(this.cropBox,Tt),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}k&&(s.width=h,s.height=m,s.left=u,s.top=d,this.action=o,this.renderCropBox()),yt(a,function(N){N.startX=N.endX,N.startY=N.endY})}},Hd={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&kt(this.dragBox,ji),Gt(this.cropBox,Tt),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=dt({},this.initialImageData),this.canvasData=dt({},this.initialCanvasData),this.cropBoxData=dt({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(dt(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Gt(this.dragBox,ji),kt(this.cropBox,Tt)),this},replace:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,yt(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Gt(this.cropper,dn)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,kt(this.cropper,dn)),this},destroy:function(){var t=this.element;return t[ut]?(t[ut]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,n=i.left,s=i.top;return this.moveTo(mr(t)?t:n+Number(t),mr(e)?e:s+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(st(t)&&(i.left=t,n=!0),st(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.options,s=this.canvasData,a=s.width,o=s.height,l=s.naturalWidth,u=s.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&n.zoomable){var d=l*t,h=u*t;if(Re(this.element,Ur,{ratio:t,oldRatio:a/l,originalEvent:i})===!1)return this;if(i){var m=this.pointers,p=Ba(this.cropper),g=m&&Object.keys(m).length?Ad(m):{pageX:i.pageX,pageY:i.pageY};s.left-=(d-a)*((g.pageX-p.left-s.left)/a),s.top-=(h-o)*((g.pageY-p.top-s.top)/o)}else De(e)&&st(e.x)&&st(e.y)?(s.left-=(d-a)*((e.x-s.left)/a),s.top-=(h-o)*((e.y-s.top)/o)):(s.left-=(d-a)/2,s.top-=(h-o)/2);s.width=d,s.height=h,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),st(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,st(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(st(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(st(t)&&(i.scaleX=t,n=!0),st(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.options,i=this.imageData,n=this.canvasData,s=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:s.left-n.left,y:s.top-n.top,width:s.width,height:s.height};var o=i.width/i.naturalWidth;if(yt(a,function(d,h){a[h]=d/o}),t){var l=Math.round(a.y+a.height),u=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=u-a.x,a.height=l-a.y}}else a={x:0,y:0,width:0,height:0};return e.rotatable&&(a.rotate=i.rotate||0),e.scalable&&(a.scaleX=i.scaleX||1,a.scaleY=i.scaleY||1),a},setData:function(t){var e=this.options,i=this.imageData,n=this.canvasData,s={};if(this.ready&&!this.disabled&&De(t)){var a=!1;e.rotatable&&st(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,a=!0),e.scalable&&(st(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,a=!0),st(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;st(t.x)&&(s.left=t.x*o+n.left),st(t.y)&&(s.top=t.y*o+n.top),st(t.width)&&(s.width=t.width*o),st(t.height)&&(s.height=t.height*o),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?dt({},this.containerData):{}},getImageData:function(){return this.sized?dt({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&yt(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&De(t)&&(st(t.left)&&(e.left=t.left),st(t.top)&&(e.top=t.top),st(t.width)?(e.width=t.width,e.height=t.width/i):st(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,e;return this.ready&&this.cropped&&(e={left:t.left,top:t.top,width:t.width,height:t.height}),e||{}},setCropBoxData:function(t){var e=this.cropBoxData,i=this.options.aspectRatio,n,s;return this.ready&&this.cropped&&!this.disabled&&De(t)&&(st(t.left)&&(e.left=t.left),st(t.top)&&(e.top=t.top),st(t.width)&&t.width!==e.width&&(n=!0,e.width=t.width),st(t.height)&&t.height!==e.height&&(s=!0,e.height=t.height),i&&(n?e.height=e.width/i:s&&(e.width=e.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=Od(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),s=n.x,a=n.y,o=n.width,l=n.height,u=i.width/Math.floor(e.naturalWidth);u!==1&&(s*=u,a*=u,o*=u,l*=u);var d=o/l,h=he({aspectRatio:d,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),m=he({aspectRatio:d,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=he({aspectRatio:d,width:t.width||(u!==1?i.width:o),height:t.height||(u!==1?i.height:l)}),g=p.width,f=p.height;g=Math.min(h.width,Math.max(m.width,g)),f=Math.min(h.height,Math.max(m.height,f));var y=document.createElement("canvas"),b=y.getContext("2d");y.width=Be(g),y.height=Be(f),b.fillStyle=t.fillColor||"transparent",b.fillRect(0,0,g,f);var w=t.imageSmoothingEnabled,k=w===void 0?!0:w,T=t.imageSmoothingQuality;b.imageSmoothingEnabled=k,T&&(b.imageSmoothingQuality=T);var x=i.width,F=i.height,A=s,N=a,O,L,K,E,z,v;A<=-o||A>x?(A=0,O=0,K=0,z=0):A<=0?(K=-A,A=0,O=Math.min(x,o+A),z=O):A<=x&&(K=0,O=Math.min(o,x-A),z=O),O<=0||N<=-l||N>F?(N=0,L=0,E=0,v=0):N<=0?(E=-N,N=0,L=Math.min(F,l+N),v=L):N<=F&&(E=0,L=Math.min(l,F-N),v=L);var U=[A,N,O,L];if(z>0&&v>0){var J=g/o;U.push(K*J,E*J,z*J,v*J)}return b.drawImage.apply(b,[i].concat(xa(U.map(function($){return Math.floor(Be($))})))),y},setAspectRatio:function(t){var e=this.options;return!this.disabled&&!mr(t)&&(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var s=t===ts,a=e.movable&&t===Pa;t=s||a?t:Oa,e.dragMode=t,gi(i,mi,t),Ie(i,Dr,s),Ie(i,Ir,a),e.cropBoxMovable||(gi(n,mi,t),Ie(n,Dr,s),Ie(n,Ir,a))}return this}},Wd=Xt.Cropper,za=function(){function r(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(rd(this,r),!t||!vd.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=dt({},wn,De(e)&&e),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return sd(r,[{key:"init",value:function(){var e=this.element,i=e.tagName.toLowerCase(),n;if(!e[ut]){if(e[ut]=this,i==="img"){if(this.isImg=!0,n=e.getAttribute("src")||"",this.originalUrl=n,!n)return;n=e.src}else i==="canvas"&&window.HTMLCanvasElement&&(n=e.toDataURL());this.load(n)}}},{key:"load",value:function(e){var i=this;if(e){this.url=e,this.imageData={};var n=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(md.test(e)){gd.test(e)?this.read(Nd(e)):this.clone();return}var a=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=o,a.onerror=o,a.ontimeout=o,a.onprogress=function(){a.getResponseHeader("content-type")!==_n&&a.abort()},a.onload=function(){i.read(a.response)},a.onloadend=function(){i.reloading=!1,i.xhr=null},s.checkCrossOrigin&&kn(e)&&n.crossOrigin&&(e=Cn(e)),a.open("GET",e),a.responseType="arraybuffer",a.withCredentials=n.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(e){var i=this.options,n=this.imageData,s=Rd(e),a=0,o=1,l=1;if(s>1){this.url=Bd(e,_n);var u=zd(s);a=u.rotate,o=u.scaleX,l=u.scaleY}i.rotatable&&(n.rotate=a),i.scalable&&(n.scaleX=o,n.scaleY=l),this.clone()}},{key:"clone",value:function(){var e=this.element,i=this.url,n=e.crossOrigin,s=i;this.options.checkCrossOrigin&&kn(i)&&(n||(n="anonymous"),s=Cn(i)),this.crossOrigin=n,this.crossOriginUrl=s;var a=document.createElement("img");n&&(a.crossOrigin=n),a.src=s||i,a.alt=e.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),kt(a,cn),e.parentNode.insertBefore(a,e.nextSibling)}},{key:"start",value:function(){var e=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var n=Xt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Xt.navigator.userAgent),s=function(u,d){dt(e.imageData,{naturalWidth:u,naturalHeight:d,aspectRatio:u/d}),e.sizing=!1,e.sized=!0,e.build()};if(i.naturalWidth&&!n){s(i.naturalWidth,i.naturalHeight);return}var a=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){s(a.width,a.height),n||o.removeChild(a)},a.src=i.src,n||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}},{key:"stop",value:function(){var e=this.image;e.onload=null,e.onerror=null,e.parentNode.removeChild(e),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var e=this.element,i=this.options,n=this.image,s=e.parentNode,a=document.createElement("div");a.innerHTML=yd;var o=a.querySelector(".".concat(ut,"-container")),l=o.querySelector(".".concat(ut,"-canvas")),u=o.querySelector(".".concat(ut,"-drag-box")),d=o.querySelector(".".concat(ut,"-crop-box")),h=d.querySelector(".".concat(ut,"-face"));this.container=s,this.cropper=o,this.canvas=l,this.dragBox=u,this.cropBox=d,this.viewBox=o.querySelector(".".concat(ut,"-view-box")),this.face=h,l.appendChild(n),kt(e,Tt),s.insertBefore(o,e.nextSibling),this.isImg||Gt(n,cn),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,kt(d,Tt),i.guides||kt(d.getElementsByClassName("".concat(ut,"-dashed")),Tt),i.center||kt(d.getElementsByClassName("".concat(ut,"-center")),Tt),i.background&&kt(o,"".concat(ut,"-bg")),i.highlight||kt(h,ud),i.cropBoxMovable&&(kt(h,Ir),gi(h,mi,Qr)),i.cropBoxResizable||(kt(d.getElementsByClassName("".concat(ut,"-line")),Tt),kt(d.getElementsByClassName("".concat(ut,"-point")),Tt)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),Et(i.ready)&&Nt(e,vn,i.ready,{once:!0}),Re(e,vn)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),Gt(this.element,Tt))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Wd,r}},{key:"setDefaults",value:function(e){dt(wn,De(e)&&e)}}]),r}();dt(za.prototype,Ud,Md,Ld,jd,$d,Hd);class Vd extends Ht{constructor(t){super(t),this.granularRotateOnChange=e=>{const{rotationAngle:i,rotationDelta:n}=this.state,s=Number(e.target.value)-n;if(cancelAnimationFrame(this.granularRotateOnInputNextFrame),s!==0){const a=i+s;this.granularRotateOnInputNextFrame=requestAnimationFrame(()=>{this.cropper.rotateTo(a)})}},this.state={rotationAngle:0,rotationDelta:0}}componentDidMount(){const{opts:t,storeCropperInstance:e}=this.props;this.cropper=new za(this.imgElement,t.cropperOptions),e(this.cropper),t.actions.granularRotate&&this.imgElement.addEventListener("crop",i=>{const n=i.detail.rotate;this.setState({rotationAngle:n,rotationDelta:(n+405)%90-45})})}componentWillUnmount(){this.cropper.destroy()}renderGranularRotate(){const{i18n:t}=this.props,{rotationDelta:e,rotationAngle:i}=this.state;return _("label",{"data-microtip-position":"top",role:"tooltip","aria-label":`${i}º`,className:"uppy-ImageCropper-rangeWrapper uppy-u-reset"},_("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.granularRotateOnChange,onChange:this.granularRotateOnChange,value:e,min:"-45",max:"44","aria-label":t("rotate")}))}renderRevert(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("revert"),"data-microtip-position":"top",onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(0)}},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M0 0h24v24H0z",fill:"none"}),_("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.rotate(-90),"aria-label":t("rotate"),"data-microtip-position":"top"},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),_("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("flipHorizontal"),"data-microtip-position":"top",onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M0 0h24v24H0z",fill:"none"}),_("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomIn"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(.1)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},_("path",{d:"M0 0h24v24H0V0z",fill:"none"}),_("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),_("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomOut"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(-.1)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M0 0h24v24H0V0z",fill:"none"}),_("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioSquare"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(1)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M0 0h24v24H0z",fill:"none"}),_("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioLandscape"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(16/9)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),_("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){const{i18n:t}=this.props;return _("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioPortrait"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(9/16)},_("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},_("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),_("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){const{currentImage:t,opts:e}=this.props,{actions:i}=e,n=URL.createObjectURL(t.data);return _("div",{className:"uppy-ImageCropper"},_("div",{className:"uppy-ImageCropper-container"},_("img",{className:"uppy-ImageCropper-image",alt:t.name,src:n,ref:s=>{this.imgElement=s}})),_("div",{className:"uppy-ImageCropper-controls"},i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.granularRotate&&this.renderGranularRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}}const qd={strings:{revert:"Revert",rotate:"Rotate",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontal",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}},Gd={version:"2.1.3"};class Ua extends Fe{constructor(t,e){super(t,e),this.save=()=>{const a=l=>{const{currentImage:u}=this.getPluginState();this.uppy.setFileState(u.id,{data:l,size:l.size,preview:null});const d=this.uppy.getFile(u.id);this.uppy.emit("thumbnail:request",d),this.setPluginState({currentImage:d}),this.uppy.emit("file-editor:complete",d)},{currentImage:o}=this.getPluginState();this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(a,o.type,this.opts.quality)},this.storeCropperInstance=a=>{this.cropper=a},this.selectFile=a=>{this.uppy.emit("file-editor:start",a),this.setPluginState({currentImage:a})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=qd;const i={viewMode:1,background:!1,autoCropArea:1,responsive:!0,croppedCanvasOptions:{}},n={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},s={quality:.8};this.opts={...s,...e,actions:{...n,...e.actions},cropperOptions:{...i,...e.cropperOptions}},this.i18nInit()}canEditFile(t){if(!t.type||t.isRemote)return!1;const e=t.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(e)}install(){this.setPluginState({currentImage:null});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){const{currentImage:t}=this.getPluginState();if(t){const e=this.uppy.getFile(t.id);this.uppy.emit("file-editor:cancel",e)}this.unmount()}render(){const{currentImage:t}=this.getPluginState();return t===null||t.isRemote?null:_(Vd,{currentImage:t,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}}Ua.VERSION=Gd.version;const is={pluralize(){return 0}};is.strings={addBulkFilesFailed:"内部错误导致添加 %{smart_count} 个文件失败",addMore:"添加更多文件",addMoreFiles:"添加更多文件",addingMoreFiles:"添加更多文件",allowAccessDescription:"为了通过您的相机进行拍照或录像，请给网站相机的访问权限",allowAccessTitle:"请允许对相机的访问权限",authenticateWith:"连接到 %{pluginName}",authenticateWithTitle:"请使用 %{pluginName} 进行认证以选择文件",back:"返回",browse:"浏览",browseFiles:"浏览",cancel:"取消",cancelUpload:"取消上传",chooseFiles:"选择文件",closeModal:"关闭窗口",companionError:"和 Companion 连接失败了",companionUnauthorizeHint:"请访问 %{url} 以认证您的 %{provider} 账户",complete:"上传完毕",connectedToInternet:"连接至网络",copyLink:"复制链接",copyLinkToClipboardFallback:"复制以下网址",copyLinkToClipboardSuccess:"链接已复制到剪贴板",creatingAssembly:"正在准备上传…",creatingAssemblyFailed:"Transloadit：无法创建程序集",dashboardTitle:"文件上传工具",dashboardWindowTitle:"文件上传工具窗口（点击离开以关闭）",dataUploadedOfTotal:"%{total} / %{complete}",done:"完成",dropHereOr:"拖拽文件到这里，或%{browse}",dropHint:"拖拽文件到这里",dropPasteBoth:"拖拽文件到这里，或者%{browse}文件",dropPasteFiles:"拖拽文件到这里，或者%{browse}文件",dropPasteFolders:"拖拽文件到这里，或者%{browse}文件",dropPasteImportBoth:"拖拽文件到这里，粘贴、%{browse}或者导入",dropPasteImportFiles:"拖拽文件到这里，粘贴、%{browse}或者导入",dropPasteImportFolders:"拖拽文件到这里，粘贴、%{browse}或者导入",editFile:"编辑文件",editing:"正在编辑 %{file}",emptyFolderAdded:"无法从空文件夹添加文件",encoding:"正在编码…",enterCorrectUrl:"错误链接： 请确认您输入的是文件的链接",enterUrlToImport:"输入链接或者导入文件",exceedsSize:"文件超过了最大尺寸限制 %{size}",failedToFetch:"Companion 无法抓取此链接，请确保它是正确的",failedToUpload:"上传 %{file} 失败",fileSource:"文件源：%{name}",filesUploadedOfTotal:"已上传 %{smart_count} 个文件中的 %{complete} 个",filter:"筛选器",finishEditingFile:"完成文件编辑",folderAdded:"从 %{folder} 添加了 %{smart_count} 个文件",generatingThumbnails:"正在生成缩略图…",import:"导入",importFrom:"从 %{name} 导入",inferiorSize:"文件大小必须超过 %{size}",loading:"正在载入…",logOut:"登出",micDisabled:"麦克风的权限访问被用户拒绝",myDevice:"我的设备",noCameraDescription:"为了拍摄照片或录制视频，请连接一个摄像设备",noCameraTitle:"摄像头不可用",noDuplicates:"无法添加重复文件 %{fileName}，该文件已存在",noFilesFound:"这里空空如也",noInternetConnection:"无法连接到网络",noMoreFilesAllowed:"无法添加新文件：已正在上传文件",openFolderNamed:"打开文件夹 %{name}",pause:"暂停",pauseUpload:"暂停上传",paused:"已暂停",poweredBy:"强力驱动于 %{uppy}",processingXFiles:"正在处理 %{smart_count} 个文件",recording:"正在录制",recordingLength:"录制长度 %{recording_length}",recordingStoppedMaxSize:"录像已停止，文件大小即将超过限制",removeFile:"删除文件",resetFilter:"重置筛选器",resume:"恢复",resumeUpload:"恢复上传",retry:"重试",retryUpload:"重试",saveChanges:"保存变更",selectFileNamed:"选择文件 %{name}",selectX:"选择 %{smart_count}",smile:"笑一笑！",startCapturing:"开始屏幕录制",startRecording:"开始视频录制",stopCapturing:"停止屏幕录制",stopRecording:"停止视频录制",streamActive:"视频流已激活",streamPassive:"视频流未激活",submitRecordedFile:"提交已录制视频",takePicture:"拍照",timedOut:"上传已超时 %{seconds} 秒，中止上传",unselectFileNamed:"取消选择文件 %{name}",upload:"上传",uploadComplete:"上传完成",uploadFailed:"上传失败",uploadPaused:"上传暂停",uploadXFiles:"上传 %{smart_count} 个文件",uploadXNewFiles:"新上传了 %{smart_count} 个文件",uploading:"正在上传",uploadingXFiles:"正在上传 %{smart_count} 个文件",xFilesSelected:"%{smart_count} 个文件待上传",xMoreFilesAdded:"又有 %{smart_count} 个文件被添加",xTimeLeft:"剩余 %{time}",youCanOnlyUploadFileTypes:"您只能上传这些文件类型：%{types}",youCanOnlyUploadX:"您只能上传 %{smart_count} 个文件",youHaveToAtLeastSelectX:"您至少要选择 %{smart_count} 个文件"};typeof Uppy<"u"&&(globalThis.Uppy.locales.zh_CN=is);const Xd={class:"d-flex flex-column align-center"},Yd=ke("div",{id:"_dashboard"},null,-1),Zd={key:0,class:"mt-4 d-flex align-center"},Kd=ke("span",{class:"mr-4"},"选择目标格式：",-1),Jd={style:{width:"100px"},class:"mr-4"},Qd={key:1,class:"mt-4 d-flex flex-column align-center"},tc=ke("span",null,"转换完成，点击下载zip文件：",-1),ec=ke("span",{class:"mx-1"}," 或者 ",-1),vr=1,yr=2,fc={__name:"index",setup(r){const t=ns([]),e=ns([]),i=xe(null),n=xe(!1),s=xe("jpeg"),a=xe(!1),o=xe(vr),l=xe(!1);let u=null;const d=()=>{u==null||u.cancelAll(),t.splice(0),e.splice(0)},h=()=>{a.value=!0,document.getElementById("_dashboard").style.display="none";const f=[];for(const y of t){if(y.type==="image/"+s.value){f.push(Promise.resolve({file:y,target:y,base64:!1}));continue}const b=new Promise((w,k)=>{const T=new FileReader;T.onload=x=>{const F=new Image;F.onload=()=>{const A=document.createElement("canvas"),N=A.getContext("2d");A.width=F.width,A.height=F.height,N.drawImage(F,0,0);const O=A.toDataURL("image/"+s.value);w({file:y,target:O.substring(O.indexOf(",")+1),base64:!0})},F.onerror=A=>{k(A)},F.src=x.target.result},T.onerror=x=>{k(x)},T.readAsDataURL(y)});f.push(b)}Promise.allSettled(f).then(y=>{for(let b of y)if(b.status==="rejected"){n.value=!0;break}else e.push(b.value);a.value=!1,n.value?d():o.value=yr})},m=()=>{l.value=!0;const f=new Xa,y=f.folder("images");for(const b of e){let w=b.file.name;const k=w.lastIndexOf(".");k>0&&(w=w.substring(0,k+1)+s.value);const T=b.base64?{base64:!0}:{binary:!0};y.file(w,b.target,T)}f.generateAsync({type:"blob"}).then(b=>{p(b,"images.zip"),l.value=!1})};function p(f,y){var b=URL.createObjectURL(f),w=document.createElement("a");w.href=b,w.download=y,w.click(),URL.revokeObjectURL(b)}const g=()=>{document.getElementById("_dashboard").style.display="block",d(),o.value=vr};return Ha(()=>{u=new zn({locale:is,restrictions:{allowedFileTypes:["image/*"]}}).use(Pr,{target:"#_dashboard",inline:!0,hideUploadButton:!0}).use(Ua,{target:Pr}),u.on("file-added",f=>{t.push(f.data)}),u.on("file-removed",f=>{const y=t.indexOf(f.data);y>=0&&t.splice(y,1)}),u.on("file-editor:start",f=>{i.value=f.data}),u.on("file-editor:complete",f=>{f.data.name=i.value.name,t[t.indexOf(i.value)]=f.data,i.value=null})}),(f,y)=>(je(),Vi("div",null,[ce($a,{toolId:2}),ce(Wa,{rounded:"",color:"white",class:"ma-4 pa-4"},{default:Ee(()=>[n.value?(je(),as(os,{key:0,type:"error",class:"mb-4",closable:""},{default:Ee(()=>[$e(" 图片转换异常，请重新开始 ")]),_:1})):_i("",!0),ce(os,{type:"info",class:"mb-4",closable:""},{default:Ee(()=>[$e(" 所有转换工作将在您的机器通过浏览器完成。 ")]),_:1}),ke("div",Xd,[Yd,t.length>0&&o.value!==yr?(je(),Vi("div",Zd,[Kd,ke("span",Jd,[ce(qa,{items:["jpeg","png","webp","gif","bmp","tiff","ico","jpg","jfif","pjpeg","pjp"],modelValue:s.value,"onUpdate:modelValue":y[0]||(y[0]=b=>s.value=b),"hide-details":"",variant:"underlined"},null,8,["modelValue"])]),o.value===vr?(je(),as(qi,{key:0,color:"primary",variant:"outlined",onClick:h,loading:a.value},{default:Ee(()=>[$e("执行转换")]),_:1},8,["loading"])):_i("",!0)])):_i("",!0)]),o.value===yr?(je(),Vi("div",Qd,[ce(Va,{class:"mt-5 mb-10",icon:"mdi-check-circle-outline",size:"200",color:"success"}),ke("div",null,[tc,ce(qi,{color:"primary",variant:"text",size:"small",loading:l.value,onClick:m},{default:Ee(()=>[$e(" 下载 ")]),_:1},8,["loading"]),ec,ce(qi,{color:"primary",variant:"text",size:"small",onClick:g},{default:Ee(()=>[$e(" 重新开始 ")]),_:1})])])):_i("",!0)]),_:1})]))}};export{fc as default};
